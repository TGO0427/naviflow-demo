<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NaviFlow Supply Chain Intelligence - Weather-Driven Shipment Tracking</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="shipping-api-integration.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .page { display: none; }
        .page.active { display: block; }
        
        /* Enhanced Loading Animations */
        .loading-shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        .loading-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .loading-bounce {
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(-25%); animation-timing-function: cubic-bezier(0.8, 0, 1, 1); }
            50% { transform: translateY(0); animation-timing-function: cubic-bezier(0, 0, 0.2, 1); }
        }
        
        .loading-spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .loading-dots::after {
            content: '';
            animation: dots 1.5s steps(5, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { color: rgba(0,0,0,0); text-shadow: .25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0); }
            40% { color: blue; text-shadow: .25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0); }
            60% { text-shadow: .25em 0 0 blue, .5em 0 0 rgba(0,0,0,0); }
            80%, 100% { text-shadow: .25em 0 0 blue, .5em 0 0 blue; }
        }
        
        .progress-bar {
            height: 4px;
            background: linear-gradient(90deg, #3B82F6, #06B6D4);
            animation: progress 2s ease-in-out infinite;
        }
        
        @keyframes progress {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }
        
        .tracking-timeline {
            position: relative;
        }
        
        .tracking-timeline::before {
            content: '';
            position: absolute;
            left: 12px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #3B82F6, #06B6D4);
            z-index: 1;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Live Chat Animations */
        .animate-slide-in {
            animation: slideIn 0.8s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .animate-bounce {
            animation: bounce 2s infinite;
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .chat-glow {
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.6);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(34, 197, 94, 0.4); }
            to { box-shadow: 0 0 30px rgba(34, 197, 94, 0.8); }
        }
        
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .notification-appear {
            animation: notificationAppear 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes notificationAppear {
            0% { transform: scale(0.8) translateY(-10px); opacity: 0; }
            100% { transform: scale(1) translateY(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(100%); }
        }
        
        /* Login Screen Styles */
        .login-card {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .feature-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .pulse-dot {
            animation: pulse-dot 2s infinite;
        }
        
        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .floating-icon {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-gradient-to-br from-blue-900 via-blue-600 to-cyan-500 flex items-center justify-center z-50">
        <div class="text-center">
            <div class="floating-icon mb-6">
                <img src="naviflow-logo-v2.png?v=2" alt="NaviFlow Logo" class="h-28 w-auto mx-auto rounded-lg shadow-lg">
            </div>
            <h2 class="text-3xl font-bold text-white mb-2">NaviFlow E-Commerce Shield</h2>
            <p class="text-xl text-blue-100 mb-6">Optimizing every mile</p>
            <div class="flex space-x-1 justify-center mb-4">
                <div class="w-3 h-3 bg-white rounded-full pulse-dot" style="animation-delay: 0s;"></div>
                <div class="w-3 h-3 bg-white rounded-full pulse-dot" style="animation-delay: 0.3s;"></div>
                <div class="w-3 h-3 bg-white rounded-full pulse-dot" style="animation-delay: 0.6s;"></div>
            </div>
            <p class="text-blue-100 text-lg">Initializing Weather-Driven Shipping Intelligence...</p>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="hidden min-h-screen flex">
        <!-- Left Panel - Features & Info -->
        <div class="hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-900 via-blue-700 to-cyan-600 p-12 flex-col justify-center">
            <div class="max-w-lg">
                <div class="flex items-center mb-8">
                    <img src="naviflow-logo-v2.png?v=2" alt="NaviFlow Logo" class="h-20 w-auto mr-6 rounded-lg shadow-lg">
                    <div>
                        <h1 class="text-3xl font-bold text-white">NaviFlow E-Commerce Shield</h1>
                        <p class="text-blue-100">Optimizing every mile</p>
                        <p class="text-sm text-blue-200">Amazon Sellers ‚Ä¢ Customer Notifications ‚Ä¢ 5-Star Protection</p>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="feature-card bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20">
                        <div class="flex items-center mb-3">
                            <span class="text-2xl mr-3">üå§Ô∏è</span>
                            <h3 class="text-xl font-semibold text-white">Customer Service Automation</h3>
                        </div>
                        <p class="text-blue-100 text-sm">Stop drowning in "Where's my order?" emails. Auto-notify customers about weather delays before they contact you.</p>
                    </div>

                    <div class="feature-card bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20">
                        <div class="flex items-center mb-3">
                            <span class="text-2xl mr-3">üõ©Ô∏è</span>
                            <h3 class="text-xl font-semibold text-white">Professional Notifications</h3>
                        </div>
                        <p class="text-blue-100 text-sm">Send branded weather delay alerts that make you look like Amazon, not a garage seller. Build customer trust.</p>
                    </div>

                    <div class="feature-card bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20">
                        <div class="flex items-center mb-3">
                            <span class="text-2xl mr-3">üì±</span>
                            <h3 class="text-xl font-semibold text-white">Amazon/eBay Protection</h3>
                        </div>
                        <p class="text-blue-100 text-sm">Auto-generate weather delay documentation for marketplace disputes. Protect your seller metrics from unfair penalties.</p>
                    </div>

                    <div class="feature-card bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20">
                        <div class="flex items-center mb-3">
                            <span class="text-2xl mr-3">üìä</span>
                            <h3 class="text-xl font-semibold text-white">Review & Rating Shield</h3>
                        </div>
                        <p class="text-blue-100 text-sm">Proactive communication prevents bad reviews. Keep customers informed and happy even when weather hits your shipments.</p>
                    </div>
                </div>

                <div class="mt-8 p-4 bg-green-500/20 border border-green-400/30 rounded-lg">
                    <div class="flex items-center">
                        <span class="text-green-400 text-sm font-medium">üü¢ System Status:</span>
                        <span class="text-green-300 text-sm ml-2">All services operational</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Login Form -->
        <div class="w-full lg:w-1/2 flex items-center justify-center p-8">
            <div class="login-card rounded-2xl shadow-2xl p-8 w-full max-w-md">
                <div class="text-center mb-8">
                    <img src="naviflow-logo-v2.png?v=2" alt="NaviFlow Logo" class="h-16 w-auto mx-auto mb-4 rounded">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Welcome Back</h2>
                    <p class="text-gray-600">Sign in to protect your e-commerce business</p>
                </div>

                <form id="loginForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                        <input type="email" id="email" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                               placeholder="seller@yourbrand.com">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" id="password" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                               placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>

                    <div class="flex items-center justify-between">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                            <span class="ml-2 text-sm text-gray-600">Remember me</span>
                        </label>
                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800">Forgot password?</a>
                    </div>

                    <button type="submit" 
                            class="w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all">
                        Sign In to E-Commerce Shield
                    </button>
                </form>

                <!-- Quick Access Buttons -->
                <div class="mt-6 space-y-3">
                    <button onclick="demoLogin()" 
                            class="w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors border border-gray-300">
                        üé¨ Demo Mode (No Login Required)
                    </button>
                    
                    <button onclick="guestAccess()" 
                            class="w-full bg-green-50 text-green-700 py-3 px-4 rounded-lg font-medium hover:bg-green-100 transition-colors border border-green-300">
                        üë§ Guest Access
                    </button>
                </div>

                <!-- Help Link -->
                <div class="mt-6 text-center">
                    <button onclick="showLoginHelp()" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                        üìñ Need help? View User Guide
                    </button>
                </div>

                <!-- Footer -->
                <div class="mt-8 pt-6 border-t border-gray-200 text-center">
                    <p class="text-xs text-gray-500">
                        NaviFlow Supply Chain Intelligence v3.0<br>
                        Powered by Open-Meteo Weather API
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden min-h-screen flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-white border-r border-gray-200 relative min-h-screen">
            <div class="p-4 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <img src="naviflow-logo-v2.png?v=2" alt="NaviFlow Logo" class="h-12 w-auto mr-2 rounded">
                        <div>
                            <h1 class="text-lg font-bold text-gray-900">E-Commerce Shield</h1>
                            <p class="text-xs text-gray-500">Optimizing every mile</p>
                        </div>
                    </div>
                    <button onclick="showUserMenu()" class="text-gray-500 hover:text-gray-700">
                        üë§
                    </button>
                </div>
                <p class="text-xs text-gray-500 mt-1" id="userInfo">Demo User</p>
            </div>
            
            <nav class="mt-4 pb-24">
                <a href="#" onclick="showPage('aviation-weather'); return false;" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    ‚úàÔ∏è Air Freight Intelligence
                </a>
                <a href="#" onclick="showPage('sea-freight'); return false;" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    üö¢ Sea Freight Intelligence
                </a>
                <a href="#" onclick="showPage('route-analysis'); return false;" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    üìà Customer Notifications
                </a>
                <a href="#" onclick="showPage('flight-tracking'); return false;" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    üìß Auto Alerts
                </a>
                <a href="#" onclick="showPage('alert-history'); return false;" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    üìä Alert History
                </a>
                <a href="#" onclick="showPage('analytics-dashboard'); return false;" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    üìà ROI Analytics
                </a>
                <a href="#" onclick="showPage('api-connections'); return false;" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    üîó API Connections
                </a>
            </nav>
            
            <div class="absolute bottom-4 left-4 right-4 bg-white">
                <div class="border-t border-gray-200 pt-4">
                    <button onclick="showAppHelp()" class="w-full text-left px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg text-sm mb-2">
                        üìñ Help & Guide
                    </button>
                    <button onclick="contactSupport()" class="w-full text-left px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg text-sm mb-2">
                        üí¨ Contact Support
                    </button>
                    <button onclick="logout()" class="w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg text-sm">
                        üö™ Logout
                    </button>
                </div>
            </div>
        </aside>


        <!-- Main Content -->
        <main class="flex-1 p-8">
            <!-- Aviation Weather Page -->
            <div id="aviation-weather" class="page active">
                <h2 class="text-2xl font-bold mb-6">‚úàÔ∏è Air Freight Intelligence</h2>
                
                <!-- Statistics Dashboard -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-blue-800">‚úàÔ∏è Active Shipments</h3>
                        <div id="activeShipmentCount" class="text-3xl font-bold text-blue-900">0</div>
                        <p class="text-sm text-blue-600 mt-1">Being tracked</p>
                        <div class="mt-2 text-xs text-blue-700">
                            üìà <span id="arrivingTodayCount">0</span> arriving today
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-green-800">‚≠ê On-Time Rate</h3>
                        <div class="text-3xl font-bold text-green-900">96%</div>
                        <p class="text-sm text-green-600 mt-1">With weather intelligence</p>
                        <div class="mt-2 text-xs text-green-700">
                            üìä +22% vs industry avg
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-yellow-800">üå™Ô∏è Weather Alerts</h3>
                        <div class="text-3xl font-bold text-yellow-900">2</div>
                        <p class="text-sm text-yellow-600 mt-1">Active events</p>
                        <div class="mt-2 text-xs text-yellow-700">
                            ‚õàÔ∏è Storms over Frankfurt
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-purple-800">üí∞ Cargo Value</h3>
                        <div class="text-3xl font-bold text-purple-900">$1.8M</div>
                        <p class="text-sm text-purple-600 mt-1">Under protection</p>
                        <div class="mt-2 text-xs text-purple-700">
                            üì¶ High-value electronics
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">Search & Track Client Shipments</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Shipment Reference / AWB Number</label>
                            <input type="text" id="shipmentRef" placeholder="e.g., 123456789012 (FedEx), 1Z999AA1234567890 (UPS), 1234567890 (DHL)" class="w-full border border-gray-300 rounded-lg px-3 py-2" />
                            <button onclick="trackShipment()" class="mt-2 w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg text-sm">
                                üîç Track Shipment
                            </button>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Customer Search</label>
                            <div class="relative">
                                <input type="text" id="customerSearch" placeholder="Search customers or import from Shopify/WooCommerce/Amazon..." class="w-full border border-gray-300 rounded-lg px-3 py-2 pr-24" />
                                <div class="absolute right-2 top-2 flex space-x-1">
                                    <button onclick="showAddCustomer()" class="text-green-600 hover:text-green-800 p-1" title="Add new customer">
                                        üë§+
                                    </button>
                                    <button onclick="showCustomerImport()" class="text-blue-600 hover:text-blue-800 p-1" title="Import customers">
                                        üì•
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Origin</label>
                            <select id="originLocation" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <optgroup label="üåè Asia Pacific">
                                    <option value="HKG">HKG - Hong Kong International</option>
                                    <option value="SIN">SIN - Singapore Changi</option>
                                    <option value="ICN">ICN - Seoul Incheon</option>
                                    <option value="NRT">NRT - Tokyo Narita</option>
                                    <option value="PVG">PVG - Shanghai Pudong</option>
                                </optgroup>
                                <optgroup label="üá™üá∫ Europe">
                                    <option value="FRA">FRA - Frankfurt Airport</option>
                                    <option value="CDG">CDG - Paris Charles de Gaulle</option>
                                    <option value="AMS">AMS - Amsterdam Schiphol</option>
                                    <option value="LHR">LHR - London Heathrow</option>
                                </optgroup>
                                <optgroup label="üá∫üá∏ North America">
                                    <option value="LAX">LAX - Los Angeles International</option>
                                    <option value="ORD">ORD - Chicago O'Hare</option>
                                    <option value="JFK">JFK - New York JFK</option>
                                </optgroup>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Destination</label>
                            <select id="destinationLocation" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="">Any Destination</option>
                                <option value="LAX">LAX - Los Angeles</option>
                                <option value="FRA">FRA - Frankfurt</option>
                                <option value="CDG">CDG - Paris</option>
                                <option value="AMS">AMS - Amsterdam</option>
                                <option value="HKG">HKG - Hong Kong</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select id="shipmentStatus" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="">All Status</option>
                                <option value="intransit">In Transit</option>
                                <option value="delayed">Weather Delayed</option>
                                <option value="delivered">Delivered</option>
                                <option value="pending">Pending Pickup</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="flex space-x-4">
                        <button onclick="searchShipments()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                            üîç Search Shipments
                        </button>
                        <button onclick="loadSampleShipments()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">
                            üì¶ Load Sample Orders
                        </button>
                    </div>
                </div>

                <!-- Real-Time Tracking Results -->
                <div id="trackingResults" class="bg-white rounded-lg shadow p-6" style="display: none;">
                    <h3 class="text-lg font-semibold mb-4">üì¶ Real-Time Tracking Results</h3>
                    <div id="trackingContent">
                        <!-- Results will be populated here -->
                    </div>
                </div>

                <!-- Shipment Results -->
                <div id="shipmentResults" class="bg-white rounded-lg shadow p-6" style="display: none;">
                    <h3 class="text-lg font-semibold mb-4">üì¶ Customer Order Status</h3>
                    <div id="shipmentContent">
                        <div class="space-y-4">
                            <div class="border rounded-lg p-4 bg-gradient-to-r from-blue-50 to-blue-100">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <h4 class="font-semibold text-blue-900">iPhone 15 Pro Cases (Premium Bundle)</h4>
                                        <p class="text-sm text-blue-700">Order: #IP789456123 | Customer: Sarah Johnson | Value: $89.99</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">In Transit</span>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
                                    <div>
                                        <p class="text-gray-600">Route</p>
                                        <p class="font-semibold">CHI ‚Üí MEM ‚Üí Customer</p>
                                    </div>
                                    <div>
                                        <p class="text-gray-600">Delivery ETA</p>
                                        <p class="font-semibold text-green-600">On Schedule (Tomorrow 2-6pm)</p>
                                    </div>
                                    <div>
                                        <p class="text-gray-600">Weather Status</p>
                                        <p class="font-semibold text-blue-600">Clear conditions, no delays</p>
                                    </div>
                                    <div>
                                        <p class="text-gray-600">Customer Status</p>
                                        <p class="font-semibold text-green-600">‚úì Auto-notified</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="route-analysis" class="page">
                <h2 class="text-2xl font-bold mb-6">üìà Customer Notifications</h2>
                
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">üìß Notification Settings</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Notification Channels</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2">
                                    üìß Email Notifications
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2">
                                    üì± SMS Alerts
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2">
                                    üì≤ WhatsApp Messages
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Alert Types</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2">
                                    üå¶Ô∏è Weather Delays
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2">
                                    üì¶ Delivery Updates
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2">
                                    ‚ö†Ô∏è Route Changes
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <button onclick="saveNotificationSettings()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                            üíæ Save Settings
                        </button>
                        <button onclick="testNotification()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 ml-4">
                            üß™ Send Test Notification
                        </button>
                    </div>
                </div>
                
                <!-- Sample Customer Notifications -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">üì± Live Customer Notification Examples</h3>
                        <button onclick="showNotificationPreview()" class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm hover:bg-blue-200">
                            üëÅÔ∏è Preview All
                        </button>
                    </div>
                    
                    <!-- Email Notification Example -->
                    <div class="mb-6">
                        <h4 class="font-semibold text-gray-800 mb-2">üìß Email Notification (Customer View)</h4>
                        <div class="border rounded-lg bg-gray-50 p-4">
                            <div class="bg-white rounded border p-4 max-w-lg">
                                <div class="border-b pb-2 mb-3">
                                    <div class="flex items-center justify-between">
                                        <div class="text-sm text-gray-500">From: TechGadgets Pro Store</div>
                                        <div class="text-sm text-gray-500">üìß Email</div>
                                    </div>
                                    <div class="text-lg font-semibold text-gray-800">Your iPhone Case Order Update</div>
                                </div>
                                
                                <div class="space-y-3">
                                    <p class="text-gray-800">Hi Sarah,</p>
                                    
                                    <div class="bg-blue-50 border border-blue-200 rounded p-3">
                                        <p class="text-blue-900 font-medium">‚ö° Weather Update for Your Order #IP789456123</p>
                                        <p class="text-blue-800 text-sm mt-1">We're proactively monitoring weather conditions along your shipment route.</p>
                                    </div>
                                    
                                    <p class="text-gray-700">Great news! Your iPhone 15 Pro Cases are on track for delivery tomorrow (March 16) between 2-6 PM despite storm systems in the region.</p>
                                    
                                    <div class="bg-green-50 border border-green-200 rounded p-3">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-green-700">Current Status:</span>
                                            <span class="font-medium text-green-800">‚úàÔ∏è In Transit - Memphis Hub</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span class="text-green-700">Weather Impact:</span>
                                            <span class="font-medium text-green-800">‚úÖ No delays expected</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span class="text-green-700">Tracking:</span>
                                            <span class="font-medium text-blue-600 underline">NV789456123</span>
                                        </div>
                                    </div>
                                    
                                    <p class="text-gray-700 text-sm">Our AI weather intelligence system is monitoring your shipment 24/7 to ensure timely delivery.</p>
                                    
                                    <div class="border-t pt-3 text-xs text-gray-500">
                                        <p>Thanks for choosing TechGadgets Pro!</p>
                                        <p>Questions? Reply to this email or call (555) 123-4567</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- SMS Notification Example -->
                    <div class="mb-6">
                        <h4 class="font-semibold text-gray-800 mb-2">üì± SMS Notification (Customer View)</h4>
                        <div class="border rounded-lg bg-gray-50 p-4">
                            <div class="bg-blue-600 rounded-2xl p-3 max-w-sm text-white">
                                <div class="text-xs opacity-75 mb-1">TechGadgets Pro Store</div>
                                <p class="text-sm">Hi Sarah! üì¶ Your iPhone cases are on track for tomorrow 2-6pm delivery! No weather delays expected. Track: NV789456123 ‚úàÔ∏è</p>
                                <div class="text-xs opacity-75 mt-2">11:23 AM</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Weather Delay Notification Example -->
                    <div class="mb-6">
                        <h4 class="font-semibold text-gray-800 mb-2">üå¶Ô∏è Weather Delay Alert (Customer View)</h4>
                        <div class="border rounded-lg bg-gray-50 p-4">
                            <div class="bg-white rounded border p-4 max-w-lg">
                                <div class="border-b pb-2 mb-3">
                                    <div class="text-lg font-semibold text-gray-800">Weather Update - Your Gaming Headset Order</div>
                                    <div class="text-sm text-gray-500">From: ElectroWorld Store</div>
                                </div>
                                
                                <div class="space-y-3">
                                    <p class="text-gray-800">Hi Mike,</p>
                                    
                                    <div class="bg-yellow-50 border border-yellow-200 rounded p-3">
                                        <p class="text-yellow-900 font-medium">‚ö†Ô∏è Weather Alert for Order #GH234567890</p>
                                        <p class="text-yellow-800 text-sm mt-1">Storm system affecting Louisville hub causing 2-day delay.</p>
                                    </div>
                                    
                                    <p class="text-gray-700">Your SteelSeries Arctis 7P headset delivery is delayed 2 days due to severe weather in Louisville. New delivery date: March 18-19.</p>
                                    
                                    <div class="bg-green-50 border border-green-200 rounded p-3">
                                        <p class="text-green-800 font-medium">üõ°Ô∏è Good News:</p>
                                        <ul class="text-sm text-green-700 mt-1 space-y-1">
                                            <li>‚úÖ Your Amazon seller metrics are protected</li>
                                            <li>‚úÖ $10 credit applied to your account</li>
                                            <li>‚úÖ Priority shipping once weather clears</li>
                                        </ul>
                                    </div>
                                    
                                    <p class="text-gray-700 text-sm">We're sorry for the delay and appreciate your understanding. The safety of our shipments is our top priority.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- WhatsApp Style Notification -->
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">üí¨ WhatsApp Notification (Customer View)</h4>
                        <div class="border rounded-lg bg-gray-50 p-4">
                            <div class="bg-green-500 rounded-2xl p-3 max-w-sm text-white ml-auto">
                                <div class="text-xs opacity-75 mb-1">Fashion Forward Boutique</div>
                                <p class="text-sm">üéâ Great news! Your dress order just cleared customs in Miami. Delivery confirmed for tomorrow 10am-2pm! ‚ú®üëó</p>
                                <div class="flex justify-end text-xs opacity-75 mt-2">
                                    <span>2:45 PM ‚úì‚úì</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="flight-tracking" class="page">
                <h2 class="text-2xl font-bold mb-6">üìß Auto Alerts</h2>
                
                <!-- Alert Performance Metrics -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-blue-800">üìß Alerts Today</h3>
                        <div class="text-3xl font-bold text-blue-900">127</div>
                        <p class="text-sm text-blue-600 mt-1">89% Proactive</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-green-800">‚ö° Response Time</h3>
                        <div class="text-3xl font-bold text-green-900">2.3s</div>
                        <p class="text-sm text-green-600 mt-1">Average delivery</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-purple-800">üìû Inquiries Reduced</h3>
                        <div class="text-3xl font-bold text-purple-900">73%</div>
                        <p class="text-sm text-purple-600 mt-1">Customer calls saved</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-orange-800">üí∞ Cost Savings</h3>
                        <div class="text-3xl font-bold text-orange-900">$12.4K</div>
                        <p class="text-sm text-orange-600 mt-1">This month</p>
                    </div>
                </div>
                
                <!-- Alert Rules Configuration -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">‚öôÔ∏è Alert Rules</h3>
                    
                    <div class="space-y-4">
                        <div class="border rounded-lg p-4 bg-blue-50">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="font-semibold text-blue-900">Weather Delay Alerts</h4>
                                    <p class="text-sm text-blue-700">Auto-notify customers when weather causes >2hr delays</p>
                                </div>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2">
                                    <span class="text-sm">Enabled</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-4 bg-green-50">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="font-semibold text-green-900">Delivery Confirmations</h4>
                                    <p class="text-sm text-green-700">Send delivery confirmation with tracking updates</p>
                                </div>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2">
                                    <span class="text-sm">Enabled</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-4 bg-yellow-50">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="font-semibold text-yellow-900">Route Change Notifications</h4>
                                    <p class="text-sm text-yellow-700">Alert when shipment route changes due to weather</p>
                                </div>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2">
                                    <span class="text-sm">Disabled</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <button onclick="saveAlertRules()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                            üíæ Save Alert Rules
                        </button>
                    </div>
                </div>
                
                <!-- Active Alerts -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">üö® Active Weather Alerts</h3>
                        <button onclick="refreshAlerts()" class="bg-gray-100 text-gray-700 px-3 py-1 rounded-lg text-sm hover:bg-gray-200">
                            üîÑ Refresh
                        </button>
                    </div>
                    
                    <div id="activeAlerts" class="space-y-3">
                        <div class="border-l-4 border-red-500 bg-red-50 p-4">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-semibold text-red-900">Storm System - Memphis Hub</h4>
                                    <p class="text-sm text-red-700">47 shipments affected ‚Ä¢ 2-day delay expected</p>
                                    <p class="text-xs text-red-600 mt-1">Auto-alert sent to all affected customers</p>
                                </div>
                                <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs">ACTIVE</span>
                            </div>
                        </div>
                        
                        <div class="border-l-4 border-yellow-500 bg-yellow-50 p-4">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-semibold text-yellow-900">Fog Advisory - LAX</h4>
                                    <p class="text-sm text-yellow-700">12 shipments monitoring ‚Ä¢ Minimal delay</p>
                                    <p class="text-xs text-yellow-600 mt-1">Proactive monitoring active</p>
                                </div>
                                <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">MONITORING</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="alert-history" class="page">
                <h2 class="text-2xl font-bold mb-6">üìä Alert History</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-blue-800">Total Alerts</h3>
                        <div class="text-3xl font-bold text-blue-900">1,247</div>
                        <p class="text-sm text-blue-600 mt-1">All time</p>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-green-800">Success Rate</h3>
                        <div class="text-3xl font-bold text-green-900">94%</div>
                        <p class="text-sm text-green-600 mt-1">Delivery success</p>
                    </div>
                    <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-yellow-800">Avg Response</h3>
                        <div class="text-3xl font-bold text-yellow-900">2.1s</div>
                        <p class="text-sm text-yellow-600 mt-1">Delivery speed</p>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-purple-800">Customer Saves</h3>
                        <div class="text-3xl font-bold text-purple-900">892</div>
                        <p class="text-sm text-purple-600 mt-1">Proactive notifications</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold mb-4">üìã Recent Alert Activity</h3>
                    <div class="space-y-3">
                        <div class="border rounded-lg p-3 bg-gray-50">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-medium">Weather delay notification sent to 47 customers</p>
                                    <p class="text-sm text-gray-600">Memphis storm system affecting gaming headset orders</p>
                                </div>
                                <span class="text-xs text-gray-500">2 hours ago</span>
                            </div>
                        </div>
                        <div class="border rounded-lg p-3 bg-gray-50">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-medium">Delivery confirmation sent to Sarah Johnson</p>
                                    <p class="text-sm text-gray-600">iPhone 15 Pro Cases delivered successfully</p>
                                </div>
                                <span class="text-xs text-gray-500">4 hours ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="analytics-dashboard" class="page">
                <h2 class="text-2xl font-bold mb-6">üìà ROI Analytics</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-green-800">üí∞ Monthly Savings</h3>
                        <div class="text-3xl font-bold text-green-900">$47.2K</div>
                        <p class="text-sm text-green-600 mt-1">+23% vs last month</p>
                    </div>
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-blue-800">üìû Call Reduction</h3>
                        <div class="text-3xl font-bold text-blue-900">73%</div>
                        <p class="text-sm text-blue-600 mt-1">Customer inquiries saved</p>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-purple-800">‚≠ê ROI</h3>
                        <div class="text-3xl font-bold text-purple-900">340%</div>
                        <p class="text-sm text-purple-600 mt-1">Return on investment</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold mb-4">üìä Performance Metrics</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                            <span>Customer Satisfaction Score</span>
                            <span class="font-bold text-green-600">9.2/10</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                            <span>On-Time Delivery Rate</span>
                            <span class="font-bold text-blue-600">94.7%</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                            <span>Proactive Alert Coverage</span>
                            <span class="font-bold text-purple-600">89.3%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="api-connections" class="page">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">üîó API Connections & Client Integration</h2>
                    <button onclick="openLiveChat()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 shadow-lg">
                        <span class="text-lg">üí¨</span>
                        <span>Need Help?</span>
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                    </button>
                </div>
                
                <!-- Connection Status Dashboard -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-green-800">üõí Shopify Stores</h3>
                        <div class="text-3xl font-bold text-green-900">12</div>
                        <p class="text-sm text-green-600 mt-1">Connected & syncing</p>
                        <div class="mt-2 text-xs text-green-700">
                            ‚úì Last sync: 5 minutes ago
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-blue-800">üõçÔ∏è WooCommerce</h3>
                        <div class="text-3xl font-bold text-blue-900">8</div>
                        <p class="text-sm text-blue-600 mt-1">Active integrations</p>
                        <div class="mt-2 text-xs text-blue-700">
                            ‚úì Real-time order sync
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-orange-800">üì¶ Amazon Seller</h3>
                        <div class="text-3xl font-bold text-orange-900">5</div>
                        <p class="text-sm text-orange-600 mt-1">FBA integrations</p>
                        <div class="mt-2 text-xs text-orange-700">
                            ‚úì Performance protected
                        </div>
                    </div>
                </div>

                <!-- Platform Connections -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">üîå Platform Connections</h3>
                    
                    <div class="space-y-4">
                        <!-- Shopify Integration -->
                        <div class="border rounded-lg p-4 bg-green-50">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center text-white font-bold mr-4">
                                        S
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-green-900">Shopify Integration</h4>
                                        <p class="text-sm text-green-700">Connect your Shopify stores for automatic order tracking</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button onclick="showShopifyTutorial()" class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs hover:bg-blue-200 flex items-center">
                                        üì∫ Tutorial
                                    </button>
                                    <button onclick="generateShopifyPermissions()" class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs hover:bg-purple-200 flex items-center">
                                        üìã Permissions
                                    </button>
                                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">CONNECTED</span>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Store URL</label>
                                    <input type="text" id="shopifyUrl" placeholder="your-store.myshopify.com" class="w-full border border-gray-300 rounded-lg px-3 py-2" onblur="validateShopifyUrl(this)" />
                                    <p class="text-xs text-gray-500 mt-1">‚úì Auto-detects .myshopify.com format</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                                    <input type="password" id="shopifyApiKey" placeholder="shpat_..." class="w-full border border-gray-300 rounded-lg px-3 py-2" onblur="validateShopifyApiKey(this)" />
                                    <p class="text-xs text-gray-500 mt-1">‚úì Auto-validates API key format</p>
                                </div>
                            </div>
                            
                            <div class="flex space-x-2">
                                <button onclick="connectShopify()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm">
                                    üîó Connect Store
                                </button>
                                <button onclick="testShopifyConnection()" class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 text-sm">
                                    üß™ Test Connection
                                </button>
                                <button onclick="syncShopifyOrders()" class="bg-blue-100 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-200 text-sm">
                                    üîÑ Sync Orders
                                </button>
                            </div>
                        </div>

                        <!-- WooCommerce Integration -->
                        <div class="border rounded-lg p-4 bg-blue-50">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold mr-4">
                                        W
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-blue-900">WooCommerce Integration</h4>
                                        <p class="text-sm text-blue-700">Connect WordPress/WooCommerce sites for order management</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button onclick="showWooCommerceTutorial()" class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs hover:bg-blue-200 flex items-center">
                                        üì∫ Tutorial
                                    </button>
                                    <button onclick="generateWooCommercePermissions()" class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs hover:bg-purple-200 flex items-center">
                                        üìã Permissions
                                    </button>
                                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">CONNECTED</span>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Website URL</label>
                                    <input type="text" id="wooUrl" placeholder="https://yourstore.com" class="w-full border border-gray-300 rounded-lg px-3 py-2" onblur="validateWooUrl(this)" />
                                    <p class="text-xs text-gray-500 mt-1">‚úì Auto-detects WordPress/WooCommerce sites</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Consumer Secret</label>
                                    <input type="password" id="wooSecret" placeholder="cs_..." class="w-full border border-gray-300 rounded-lg px-3 py-2" onblur="validateWooSecret(this)" />
                                    <p class="text-xs text-gray-500 mt-1">‚úì Auto-validates secret format</p>
                                </div>
                            </div>
                            
                            <div class="flex space-x-2">
                                <button onclick="connectWooCommerce()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm">
                                    üîó Connect Store
                                </button>
                                <button onclick="testWooConnection()" class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 text-sm">
                                    üß™ Test Connection
                                </button>
                            </div>
                        </div>

                        <!-- Amazon Integration -->
                        <div class="border rounded-lg p-4 bg-orange-50">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center text-white font-bold mr-4">
                                        A
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-orange-900">Amazon Seller Central</h4>
                                        <p class="text-sm text-orange-700">Protect your Amazon seller metrics with proactive alerts</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button onclick="showAmazonTutorial()" class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs hover:bg-blue-200 flex items-center">
                                        üì∫ Tutorial
                                    </button>
                                    <button onclick="generateAmazonPermissions()" class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs hover:bg-purple-200 flex items-center">
                                        üìã Permissions
                                    </button>
                                    <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm">CONNECTED</span>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Seller ID</label>
                                    <input type="text" id="amazonSellerId" placeholder="A1BCDEFGHIJKLM" class="w-full border border-gray-300 rounded-lg px-3 py-2" onblur="validateAmazonSellerId(this)" />
                                    <p class="text-xs text-gray-500 mt-1">‚úì Auto-validates Amazon Seller ID format</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">MWS Auth Token</label>
                                    <input type="password" id="amazonToken" placeholder="amzn.mws..." class="w-full border border-gray-300 rounded-lg px-3 py-2" onblur="validateAmazonToken(this)" />
                                    <p class="text-xs text-gray-500 mt-1">‚úì Auto-validates MWS token format</p>
                                </div>
                            </div>
                            
                            <div class="flex space-x-2">
                                <button onclick="connectAmazon()" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 text-sm">
                                    üîó Connect Account
                                </button>
                                <button onclick="testAmazonConnection()" class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 text-sm">
                                    üß™ Test Connection
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Customer Alert Channels -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">üì± Customer Alert Channels</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Email Configuration -->
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-gray-900 mb-3">üìß Email Alerts</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">SMTP Server</label>
                                    <input type="text" placeholder="smtp.gmail.com" class="w-full border border-gray-300 rounded px-3 py-2 text-sm" />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">From Email</label>
                                    <input type="email" placeholder="alerts@yourstore.com" class="w-full border border-gray-300 rounded px-3 py-2 text-sm" />
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="saveEmailConfig()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        üíæ Save
                                    </button>
                                    <button onclick="testEmailAlert()" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                                        üìß Test Email
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- SMS Configuration -->
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-gray-900 mb-3">üì± SMS Alerts</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Twilio Account SID</label>
                                    <input type="text" placeholder="AC..." class="w-full border border-gray-300 rounded px-3 py-2 text-sm" />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Auth Token</label>
                                    <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="w-full border border-gray-300 rounded px-3 py-2 text-sm" />
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="saveSMSConfig()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        üíæ Save
                                    </button>
                                    <button onclick="testSMSAlert()" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                                        üì± Test SMS
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CSV Data Import/Export -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">üìä CSV Data Import/Export</h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- CSV Upload Section -->
                        <div class="border rounded-lg p-4 bg-blue-50">
                            <div class="flex items-center mb-4">
                                <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white text-lg mr-3">
                                    üì§
                                </div>
                                <div>
                                    <h4 class="font-semibold text-blue-900">Upload Order Data</h4>
                                    <p class="text-sm text-blue-700">Import orders from CSV or Excel files</p>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <!-- File Upload Zone -->
                                <div id="apiCsvDropZone" class="border-2 border-dashed border-blue-300 rounded-lg p-6 text-center bg-blue-25 hover:border-blue-400 transition-colors cursor-pointer">
                                    <div class="text-4xl mb-2">üìÅ</div>
                                    <p class="text-blue-800 font-medium">Drop CSV/Excel files here</p>
                                    <p class="text-sm text-blue-600 mt-1">or click to browse</p>
                                    <input type="file" id="apiCsvFileInput" accept=".csv,.xlsx,.xls" multiple class="hidden">
                                </div>
                                
                                <!-- Upload Progress -->
                                <div id="apiUploadProgress" class="hidden space-y-2">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-gray-600">Processing files...</span>
                                        <span id="apiProgressPercent" class="text-blue-600 font-medium">0%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div id="apiProgressBar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <!-- Quick Actions -->
                                <div class="flex space-x-2">
                                    <div class="relative">
                                        <button onclick="showTemplateOptions()" class="bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm flex items-center">
                                            üìä Excel Templates ‚ñº
                                        </button>
                                        <div id="templateDropdown" class="hidden absolute top-full left-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 min-w-max">
                                            <div class="px-3 py-2 text-xs text-gray-500 border-b">Excel-compatible templates</div>
                                            <button onclick="downloadAPICSVTemplate(); hideTemplateOptions()" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                                üìä Order Data Template
                                            </button>
                                            <button onclick="downloadCustomerCSVTemplate(); hideTemplateOptions()" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                                üë• Customer Data Template
                                            </button>
                                            <div class="px-3 py-2 text-xs text-blue-600 border-t">Edit in Excel ‚Üí Save as CSV</div>
                                        </div>
                                    </div>
                                    <button onclick="showAPIUploadHistory()" class="bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 text-sm">
                                        üìã Upload History
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- CSV Export Section -->
                        <div class="border rounded-lg p-4 bg-green-50">
                            <div class="flex items-center mb-4">
                                <div class="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center text-white text-lg mr-3">
                                    üì•
                                </div>
                                <div>
                                    <h4 class="font-semibold text-green-900">Export Order Data</h4>
                                    <p class="text-sm text-green-700">Download order data and analytics</p>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <!-- Export Options -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Export Type</label>
                                    <select id="exportType" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                        <option value="all-orders">All Orders</option>
                                        <option value="weather-delays">Weather Delayed Orders</option>
                                        <option value="customer-alerts">Customer Alert History</option>
                                        <option value="api-connections">API Connection Status</option>
                                        <option value="performance-metrics">Performance Metrics</option>
                                    </select>
                                </div>
                                
                                <!-- Date Range -->
                                <div class="grid grid-cols-2 gap-2">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">From</label>
                                        <input type="date" id="exportStartDate" class="w-full border border-gray-300 rounded px-3 py-2 text-sm">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">To</label>
                                        <input type="date" id="exportEndDate" class="w-full border border-gray-300 rounded px-3 py-2 text-sm">
                                    </div>
                                </div>
                                
                                <!-- Export Actions -->
                                <div class="flex space-x-2">
                                    <button onclick="exportOrdersCSV()" class="bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm flex items-center">
                                        üìä Export CSV
                                    </button>
                                    <button onclick="exportOrdersExcel()" class="bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 text-sm">
                                        üìà Export Excel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CSV Processing Status -->
                    <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                        <h5 class="font-medium text-gray-800 mb-2">üìà Processing Statistics</h5>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div>
                                <div class="text-2xl font-bold text-blue-600" id="csvProcessedCount">0</div>
                                <p class="text-sm text-gray-600">Files Processed</p>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-green-600" id="csvImportedOrders">0</div>
                                <p class="text-sm text-gray-600">Orders Imported</p>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-orange-600" id="csvErrorCount">0</div>
                                <p class="text-sm text-gray-600">Validation Errors</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Customer Management -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <div>
                            <h3 class="text-lg font-semibold">üë• Customer Management</h3>
                            <p class="text-sm text-gray-600">Add individual customers or manage existing customer database</p>
                        </div>
                        <button onclick="showCustomerDatabase()" class="bg-blue-100 text-blue-700 px-3 py-2 rounded-lg hover:bg-blue-200 text-sm">
                            üìä View Database
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Add Individual Customer -->
                        <div class="border rounded-lg p-4 bg-green-50">
                            <div class="flex items-center mb-4">
                                <div class="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center text-white text-lg mr-3">
                                    üë§
                                </div>
                                <div>
                                    <h4 class="font-semibold text-green-900">Add Individual Customer</h4>
                                    <p class="text-sm text-green-700">Manually add customers not connected via API</p>
                                </div>
                            </div>
                            
                            <div class="space-y-3">
                                <div>
                                    <p class="text-sm text-green-800 mb-2">Perfect for:</p>
                                    <ul class="text-xs text-green-700 space-y-1">
                                        <li>‚Ä¢ Walk-in customers</li>
                                        <li>‚Ä¢ Phone/email orders</li>
                                        <li>‚Ä¢ One-time shipments</li>
                                        <li>‚Ä¢ Custom client relationships</li>
                                    </ul>
                                </div>
                                
                                <button onclick="showAddCustomer()" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium">
                                    üë§+ Add New Customer
                                </button>
                            </div>
                        </div>
                        
                        <!-- Customer Database Overview -->
                        <div class="border rounded-lg p-4 bg-blue-50">
                            <div class="flex items-center mb-4">
                                <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white text-lg mr-3">
                                    üìä
                                </div>
                                <div>
                                    <h4 class="font-semibold text-blue-900">Customer Database</h4>
                                    <p class="text-sm text-blue-700">Manage and view all customer information</p>
                                </div>
                            </div>
                            
                            <div class="space-y-3">
                                <!-- Customer Stats -->
                                <div class="grid grid-cols-3 gap-3 text-center">
                                    <div class="bg-white p-3 rounded">
                                        <div class="text-lg font-bold text-blue-600" id="apiTotalCustomers">247</div>
                                        <p class="text-xs text-gray-600">Total Customers</p>
                                    </div>
                                    <div class="bg-white p-3 rounded">
                                        <div class="text-lg font-bold text-green-600" id="apiActiveCustomers">189</div>
                                        <p class="text-xs text-gray-600">Active</p>
                                    </div>
                                    <div class="bg-white p-3 rounded">
                                        <div class="text-lg font-bold text-orange-600" id="apiNewCustomers">12</div>
                                        <p class="text-xs text-gray-600">This Month</p>
                                    </div>
                                </div>
                                
                                <div class="flex space-x-2">
                                    <button onclick="showCustomerDatabase()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-3 rounded text-sm">
                                        üìä View All
                                    </button>
                                    <button onclick="exportCustomerData()" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 px-3 rounded text-sm">
                                        üì• Export
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Customer Search -->
                    <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                        <h5 class="font-medium text-gray-800 mb-3">üîç Quick Customer Search</h5>
                        <div class="flex space-x-3">
                            <div class="flex-1 relative">
                                <input type="text" id="apiCustomerSearch" placeholder="Search customers by name, email, or phone..." class="w-full border border-gray-300 rounded-lg px-3 py-2 pr-10" />
                                <button onclick="searchAPICustomers()" class="absolute right-2 top-2 text-gray-500 hover:text-gray-700">
                                    üîç
                                </button>
                            </div>
                            <button onclick="showAdvancedCustomerFilters()" class="bg-purple-100 text-purple-700 px-4 py-2 rounded-lg hover:bg-purple-200 text-sm">
                                üéõÔ∏è Filters
                            </button>
                        </div>
                        <div id="apiCustomerSearchResults" class="mt-3 hidden">
                            <!-- Search results will appear here -->
                        </div>
                    </div>
                </div>

                <!-- Connected Clients -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">üë• Connected Client Stores</h3>
                        <button onclick="refreshClientList()" class="bg-gray-100 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-200">
                            üîÑ Refresh
                        </button>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="border rounded-lg p-3 bg-gray-50">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="font-medium">TechGadgets Pro Store</h4>
                                    <p class="text-sm text-gray-600">Shopify ‚Ä¢ 1,247 orders synced ‚Ä¢ Last: 2 minutes ago</p>
                                </div>
                                <div class="flex space-x-2">
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">ACTIVE</span>
                                    <button onclick="viewClientOrders('techgadgets')" class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs hover:bg-blue-200">
                                        üì¶ View Orders
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-3 bg-gray-50">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="font-medium">Fashion Forward Boutique</h4>
                                    <p class="text-sm text-gray-600">WooCommerce ‚Ä¢ 892 orders synced ‚Ä¢ Last: 5 minutes ago</p>
                                </div>
                                <div class="flex space-x-2">
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">ACTIVE</span>
                                    <button onclick="viewClientOrders('fashion')" class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs hover:bg-blue-200">
                                        üì¶ View Orders
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-3 bg-gray-50">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="font-medium">ElectroWorld Amazon Store</h4>
                                    <p class="text-sm text-gray-600">Amazon FBA ‚Ä¢ 2,156 orders protected ‚Ä¢ Performance: 99.2%</p>
                                </div>
                                <div class="flex space-x-2">
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">PROTECTED</span>
                                    <button onclick="viewClientOrders('electroworld')" class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs hover:bg-blue-200">
                                        üìä Metrics
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Store Connection Modal -->
            <div id="connectionModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
                <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-2xl font-bold text-gray-800" id="modalTitle">Connect Your Store</h2>
                            <button onclick="closeConnectionModal()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div id="connectionSteps">
                            <!-- Step 1: Store Details -->
                            <div id="step1" class="connection-step">
                                <div class="mb-6">
                                    <div class="flex items-center mb-4">
                                        <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">1</div>
                                        <h3 class="text-lg font-semibold">Store Information</h3>
                                    </div>
                                    
                                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                                        <div class="flex items-center">
                                            <span class="text-blue-600 mr-2">‚ÑπÔ∏è</span>
                                            <p class="text-sm text-blue-800">We'll connect to your store and automatically sync orders for weather-intelligent tracking.</p>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Store Name</label>
                                            <input type="text" id="storeName" placeholder="e.g., TechGadgets Pro" class="w-full border border-gray-300 rounded-lg px-3 py-2" />
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Store URL</label>
                                            <input type="text" id="storeUrl" placeholder="techgadgets.myshopify.com" class="w-full border border-gray-300 rounded-lg px-3 py-2" />
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Email</label>
                                            <input type="email" id="contactEmail" placeholder="owner@techgadgets.com" class="w-full border border-gray-300 rounded-lg px-3 py-2" />
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Monthly Order Volume</label>
                                            <select id="orderVolume" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                                <option value="">Select volume</option>
                                                <option value="small">1-100 orders/month</option>
                                                <option value="medium">100-1000 orders/month</option>
                                                <option value="large">1000+ orders/month</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex justify-end">
                                    <button onclick="goToStep(2)" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                                        Next: API Setup ‚Üí
                                    </button>
                                </div>
                            </div>

                            <!-- Step 2: API Configuration -->
                            <div id="step2" class="connection-step hidden">
                                <div class="mb-6">
                                    <div class="flex items-center mb-4">
                                        <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">2</div>
                                        <h3 class="text-lg font-semibold">API Configuration</h3>
                                    </div>
                                    
                                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4">
                                        <div class="flex items-center">
                                            <span class="text-yellow-600 mr-2">üîê</span>
                                            <div>
                                                <p class="text-sm text-yellow-800 font-medium">Secure Connection Required</p>
                                                <p class="text-xs text-yellow-700">Your API credentials are encrypted and never stored in plain text.</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                                            <input type="password" id="apiKey" placeholder="shpat_..." class="w-full border border-gray-300 rounded-lg px-3 py-2" />
                                            <p class="text-xs text-gray-500 mt-1">Found in your Shopify Admin ‚Üí Apps ‚Üí Private apps</p>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Webhook Secret</label>
                                            <input type="password" id="webhookSecret" placeholder="whsec_..." class="w-full border border-gray-300 rounded-lg px-3 py-2" />
                                            <p class="text-xs text-gray-500 mt-1">For real-time order updates and secure communication</p>
                                        </div>
                                        
                                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                                            <h4 class="font-medium text-gray-900 mb-2">üìã Required Permissions</h4>
                                            <div class="space-y-1 text-sm text-gray-700">
                                                <div class="flex items-center">
                                                    <span class="text-green-600 mr-2">‚úì</span>
                                                    <span>Read orders and customer information</span>
                                                </div>
                                                <div class="flex items-center">
                                                    <span class="text-green-600 mr-2">‚úì</span>
                                                    <span>Write order notes and tracking updates</span>
                                                </div>
                                                <div class="flex items-center">
                                                    <span class="text-green-600 mr-2">‚úì</span>
                                                    <span>Send customer notifications</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex justify-between">
                                    <button onclick="goToStep(1)" class="bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200">
                                        ‚Üê Back
                                    </button>
                                    <button onclick="goToStep(3)" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                                        Next: Test Connection ‚Üí
                                    </button>
                                </div>
                            </div>

                            <!-- Step 3: Test & Verify -->
                            <div id="step3" class="connection-step hidden">
                                <div class="mb-6">
                                    <div class="flex items-center mb-4">
                                        <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3">3</div>
                                        <h3 class="text-lg font-semibold">Test & Verify Connection</h3>
                                    </div>
                                    
                                    <div class="space-y-4">
                                        <div class="border rounded-lg p-4">
                                            <div class="flex items-center justify-between mb-2">
                                                <span class="font-medium">API Connection Test</span>
                                                <button onclick="runConnectionTest()" class="bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm hover:bg-blue-200">
                                                    üß™ Test Now
                                                </button>
                                            </div>
                                            <div id="connectionTestResult" class="text-sm text-gray-600">
                                                Click "Test Now" to verify your API credentials
                                            </div>
                                        </div>
                                        
                                        <div class="border rounded-lg p-4">
                                            <div class="flex items-center justify-between mb-2">
                                                <span class="font-medium">Order Data Preview</span>
                                                <button onclick="previewOrders()" class="bg-green-100 text-green-800 px-3 py-1 rounded text-sm hover:bg-green-200">
                                                    üì¶ Preview Orders
                                                </button>
                                            </div>
                                            <div id="orderPreviewResult" class="text-sm text-gray-600">
                                                Preview recent orders that will be imported
                                            </div>
                                        </div>
                                        
                                        <div class="border rounded-lg p-4">
                                            <div class="flex items-center justify-between mb-2">
                                                <span class="font-medium">Webhook Setup</span>
                                                <button onclick="setupWebhooks()" class="bg-purple-100 text-purple-800 px-3 py-1 rounded text-sm hover:bg-purple-200">
                                                    üîó Setup Webhooks
                                                </button>
                                            </div>
                                            <div id="webhookSetupResult" class="text-sm text-gray-600">
                                                Configure real-time order notifications
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex justify-between">
                                    <button onclick="goToStep(2)" class="bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200">
                                        ‚Üê Back
                                    </button>
                                    <button onclick="completeConnection()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">
                                        üéâ Complete Setup
                                    </button>
                                </div>
                            </div>

                            <!-- Step 4: Success -->
                            <div id="step4" class="connection-step hidden">
                                <div class="text-center">
                                    <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span class="text-4xl">üéâ</span>
                                    </div>
                                    <h3 class="text-2xl font-bold text-green-900 mb-2">Store Connected Successfully!</h3>
                                    <p class="text-gray-600 mb-6">Your store is now integrated with NaviFlow's weather intelligence system.</p>
                                    
                                    <div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
                                        <h4 class="font-semibold text-green-900 mb-3">‚úÖ Setup Complete</h4>
                                        <div class="space-y-2 text-sm text-green-800">
                                            <div class="flex items-center justify-center">
                                                <span class="text-green-600 mr-2">‚úì</span>
                                                <span>1,247 orders imported and ready for tracking</span>
                                            </div>
                                            <div class="flex items-center justify-center">
                                                <span class="text-green-600 mr-2">‚úì</span>
                                                <span>Weather alerts configured for all shipments</span>
                                            </div>
                                            <div class="flex items-center justify-center">
                                                <span class="text-green-600 mr-2">‚úì</span>
                                                <span>Customer notification system activated</span>
                                            </div>
                                            <div class="flex items-center justify-center">
                                                <span class="text-green-600 mr-2">‚úì</span>
                                                <span>Real-time sync enabled (every 5 minutes)</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-center space-x-4">
                                        <button onclick="viewDashboard()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                                            üìä View Dashboard
                                        </button>
                                        <button onclick="closeConnectionModal()" class="bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200">
                                            Close
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Help & Guide Modal -->
            <div id="helpModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
                <div class="bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-2xl font-bold text-gray-800">üìñ NaviFlow Weather Intelligence Guide</h2>
                            <button onclick="closeHelpModal()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                        </div>
                    </div>
                    
                    <div class="flex">
                        <!-- Help Navigation Sidebar -->
                        <div class="w-64 bg-gray-50 p-6 border-r border-gray-200">
                            <h3 class="text-lg font-semibold mb-4 text-gray-800">Quick Navigation</h3>
                            <div class="space-y-2">
                                <button onclick="showHelpSection('getting-started')" class="w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-blue-100 hover:text-blue-800 transition-colors">
                                    üöÄ Getting Started
                                </button>
                                <button onclick="showHelpSection('order-tracking')" class="w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-blue-100 hover:text-blue-800 transition-colors">
                                    üì¶ Order Tracking
                                </button>
                                <button onclick="showHelpSection('api-connections')" class="w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-blue-100 hover:text-blue-800 transition-colors">
                                    üîó API Connections
                                </button>
                                <button onclick="showHelpSection('notifications')" class="w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-blue-100 hover:text-blue-800 transition-colors">
                                    üì± Notifications
                                </button>
                                <button onclick="showHelpSection('weather-alerts')" class="w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-blue-100 hover:text-blue-800 transition-colors">
                                    üå¶Ô∏è Weather Alerts
                                </button>
                                <button onclick="showHelpSection('analytics')" class="w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-blue-100 hover:text-blue-800 transition-colors">
                                    üìä Analytics & ROI
                                </button>
                                <button onclick="showHelpSection('troubleshooting')" class="w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-blue-100 hover:text-blue-800 transition-colors">
                                    üîß Troubleshooting
                                </button>
                                <button onclick="showHelpSection('faq')" class="w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-blue-100 hover:text-blue-800 transition-colors">
                                    ‚ùì FAQ
                                </button>
                                <button onclick="showHelpSection('demo-showcase')" class="w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-green-100 hover:text-green-800 transition-colors border-2 border-green-300 bg-green-50 font-semibold">
                                    üé¨ Demo Showcase (1000 Shipments)
                                </button>
                            </div>
                            
                            <div class="mt-8 p-4 bg-blue-50 rounded-lg">
                                <h4 class="font-semibold text-blue-900 mb-2">üìû Need Help?</h4>
                                <p class="text-sm text-blue-700 mb-3">Our support team is here to help!</p>
                                <button onclick="contactSupport()" class="w-full bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700">
                                    Contact Support
                                </button>
                            </div>
                        </div>
                        
                        <!-- Help Content Area -->
                        <div class="flex-1 p-6">
                            <div id="helpContent">
                                <!-- Getting Started Section -->
                                <div id="help-getting-started" class="help-section">
                                    <h3 class="text-2xl font-bold mb-4 text-gray-800">üöÄ Getting Started with NaviFlow</h3>
                                    
                                    <div class="space-y-6">
                                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                            <h4 class="font-semibold text-blue-900 mb-2">Welcome to Weather-Intelligent Shipping!</h4>
                                            <p class="text-blue-800 text-sm">NaviFlow automatically tracks your e-commerce orders and sends proactive weather alerts to customers, protecting your seller metrics and reducing customer service inquiries.</p>
                                        </div>
                                        
                                        <div>
                                            <h4 class="text-lg font-semibold mb-3 text-gray-800">üìã Quick Setup Checklist</h4>
                                            <div class="space-y-2">
                                                <div class="flex items-center p-3 bg-gray-50 rounded">
                                                    <span class="text-green-600 mr-3">‚úì</span>
                                                    <span class="text-sm">Connect your e-commerce store (Shopify/WooCommerce/Amazon)</span>
                                                </div>
                                                <div class="flex items-center p-3 bg-gray-50 rounded">
                                                    <span class="text-green-600 mr-3">‚úì</span>
                                                    <span class="text-sm">Configure customer notification channels (Email/SMS)</span>
                                                </div>
                                                <div class="flex items-center p-3 bg-gray-50 rounded">
                                                    <span class="text-green-600 mr-3">‚úì</span>
                                                    <span class="text-sm">Set up weather alert rules and preferences</span>
                                                </div>
                                                <div class="flex items-center p-3 bg-gray-50 rounded">
                                                    <span class="text-green-600 mr-3">‚úì</span>
                                                    <span class="text-sm">Test alerts and review analytics dashboard</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <h4 class="text-lg font-semibold mb-3 text-gray-800">üéØ Key Benefits</h4>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div class="bg-green-50 border border-green-200 rounded p-3">
                                                    <h5 class="font-medium text-green-900">üìû Reduce Customer Calls</h5>
                                                    <p class="text-sm text-green-700">73% reduction in "where's my order" inquiries</p>
                                                </div>
                                                <div class="bg-blue-50 border border-blue-200 rounded p-3">
                                                    <h5 class="font-medium text-blue-900">üõ°Ô∏è Protect Seller Metrics</h5>
                                                    <p class="text-sm text-blue-700">Maintain high performance ratings on Amazon/eBay</p>
                                                </div>
                                                <div class="bg-purple-50 border border-purple-200 rounded p-3">
                                                    <h5 class="font-medium text-purple-900">üí∞ Increase Customer Satisfaction</h5>
                                                    <p class="text-sm text-purple-700">9.2/10 customer satisfaction with proactive alerts</p>
                                                </div>
                                                <div class="bg-orange-50 border border-orange-200 rounded p-3">
                                                    <h5 class="font-medium text-orange-900">üìà Boost Revenue</h5>
                                                    <p class="text-sm text-orange-700">Higher review scores = more sales</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Order Tracking Section -->
                                <div id="help-order-tracking" class="help-section hidden">
                                    <h3 class="text-2xl font-bold mb-4 text-gray-800">üì¶ Order Tracking Guide</h3>
                                    
                                    <div class="space-y-6">
                                        <div>
                                            <h4 class="text-lg font-semibold mb-3 text-gray-800">üîç How Order Tracking Works</h4>
                                            <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                                                <ol class="space-y-2 text-sm">
                                                    <li class="flex items-start">
                                                        <span class="bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs mr-3 mt-0.5">1</span>
                                                        <span>Orders automatically sync from your connected stores every 5 minutes</span>
                                                    </li>
                                                    <li class="flex items-start">
                                                        <span class="bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs mr-3 mt-0.5">2</span>
                                                        <span>AI analyzes shipping routes and weather patterns</span>
                                                    </li>
                                                    <li class="flex items-start">
                                                        <span class="bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs mr-3 mt-0.5">3</span>
                                                        <span>Proactive alerts sent to customers before delays occur</span>
                                                    </li>
                                                    <li class="flex items-start">
                                                        <span class="bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs mr-3 mt-0.5">4</span>
                                                        <span>Real-time updates as shipments progress</span>
                                                    </li>
                                                </ol>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <h4 class="text-lg font-semibold mb-3 text-gray-800">üìã Search & Filter Orders</h4>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <h5 class="font-medium mb-2">üîç Search Options:</h5>
                                                    <ul class="text-sm space-y-1">
                                                        <li>‚Ä¢ AWB/Tracking numbers</li>
                                                        <li>‚Ä¢ Customer names/emails</li>
                                                        <li>‚Ä¢ Order numbers</li>
                                                        <li>‚Ä¢ Product names</li>
                                                    </ul>
                                                </div>
                                                <div>
                                                    <h5 class="font-medium mb-2">üóÇÔ∏è Filter By:</h5>
                                                    <ul class="text-sm space-y-1">
                                                        <li>‚Ä¢ Shipment status</li>
                                                        <li>‚Ä¢ Origin/destination</li>
                                                        <li>‚Ä¢ Weather impact</li>
                                                        <li>‚Ä¢ Date ranges</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                                            <h4 class="font-medium text-yellow-900 mb-2">üí° Pro Tip</h4>
                                            <p class="text-sm text-yellow-800">Use the "Load Sample Orders" button to see how your actual orders will appear in the system.</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- API Connections Section -->
                                <div id="help-api-connections" class="help-section hidden">
                                    <h3 class="text-2xl font-bold mb-4 text-gray-800">üîó API Connections Guide</h3>
                                    
                                    <div class="space-y-6">
                                        <div>
                                            <h4 class="text-lg font-semibold mb-3 text-gray-800">üõí Supported Platforms</h4>
                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                                                    <h5 class="font-semibold text-green-900 mb-2">Shopify</h5>
                                                    <p class="text-sm text-green-700 mb-2">Private app or public app integration</p>
                                                    <ul class="text-xs text-green-600 space-y-1">
                                                        <li>‚Ä¢ Admin API access</li>
                                                        <li>‚Ä¢ Webhook support</li>
                                                        <li>‚Ä¢ Customer notifications</li>
                                                    </ul>
                                                </div>
                                                <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                                    <h5 class="font-semibold text-blue-900 mb-2">WooCommerce</h5>
                                                    <p class="text-sm text-blue-700 mb-2">WordPress plugin integration</p>
                                                    <ul class="text-xs text-blue-600 space-y-1">
                                                        <li>‚Ä¢ REST API access</li>
                                                        <li>‚Ä¢ Order management</li>
                                                        <li>‚Ä¢ Email templates</li>
                                                    </ul>
                                                </div>
                                                <div class="border border-orange-200 rounded-lg p-4 bg-orange-50">
                                                    <h5 class="font-semibold text-orange-900 mb-2">Amazon FBA</h5>
                                                    <p class="text-sm text-orange-700 mb-2">Seller Central API</p>
                                                    <ul class="text-xs text-orange-600 space-y-1">
                                                        <li>‚Ä¢ Performance protection</li>
                                                        <li>‚Ä¢ MWS integration</li>
                                                        <li>‚Ä¢ Metric monitoring</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <h4 class="text-lg font-semibold mb-3 text-gray-800">üîê Security & Privacy</h4>
                                            <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                                                <div class="space-y-2 text-sm">
                                                    <div class="flex items-center">
                                                        <span class="text-green-600 mr-2">üîí</span>
                                                        <span>All API credentials encrypted with AES-256</span>
                                                    </div>
                                                    <div class="flex items-center">
                                                        <span class="text-green-600 mr-2">üõ°Ô∏è</span>
                                                        <span>SOC 2 Type II compliant infrastructure</span>
                                                    </div>
                                                    <div class="flex items-center">
                                                        <span class="text-green-600 mr-2">üîç</span>
                                                        <span>Read-only access to order data only</span>
                                                    </div>
                                                    <div class="flex items-center">
                                                        <span class="text-green-600 mr-2">üåê</span>
                                                        <span>GDPR and CCPA compliant</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                            <h4 class="font-medium text-blue-900 mb-2">üìö Setup Tutorials</h4>
                                            <div class="space-y-1 text-sm">
                                                <button onclick="openTutorial('shopify')" class="text-blue-700 hover:text-blue-900 underline">‚Ä¢ Shopify Setup Tutorial (5 min)</button><br>
                                                <button onclick="openTutorial('woocommerce')" class="text-blue-700 hover:text-blue-900 underline">‚Ä¢ WooCommerce Setup Tutorial (7 min)</button><br>
                                                <button onclick="openTutorial('amazon')" class="text-blue-700 hover:text-blue-900 underline">‚Ä¢ Amazon FBA Setup Tutorial (10 min)</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Add more help sections here (notifications, weather-alerts, analytics, troubleshooting, faq) -->
                                <div id="help-notifications" class="help-section hidden">
                                    <h3 class="text-2xl font-bold mb-4 text-gray-800">üì± Customer Notifications</h3>
                                    <p class="text-gray-600">Comprehensive guide on setting up and managing customer notifications...</p>
                                </div>

                                <div id="help-weather-alerts" class="help-section hidden">
                                    <h3 class="text-2xl font-bold mb-4 text-gray-800">üå¶Ô∏è Weather Alert System</h3>
                                    <p class="text-gray-600">Learn how our AI predicts weather delays and alerts customers proactively...</p>
                                </div>

                                <div id="help-analytics" class="help-section hidden">
                                    <h3 class="text-2xl font-bold mb-4 text-gray-800">üìä Analytics & ROI Tracking</h3>
                                    <p class="text-gray-600">Understanding your performance metrics and return on investment...</p>
                                </div>

                                <div id="help-troubleshooting" class="help-section hidden">
                                    <h3 class="text-2xl font-bold mb-4 text-gray-800">üîß Troubleshooting Common Issues</h3>
                                    <p class="text-gray-600">Solutions to frequently encountered problems and how to resolve them...</p>
                                </div>

                                <div id="help-faq" class="help-section hidden">
                                    <h3 class="text-2xl font-bold mb-4 text-gray-800">‚ùì Frequently Asked Questions</h3>
                                    <p class="text-gray-600">Quick answers to the most common questions about NaviFlow...</p>
                                </div>

                                <!-- Demo Showcase Section -->
                                <div id="help-demo-showcase" class="help-section hidden">
                                    <div class="bg-gradient-to-br from-green-50 to-blue-50 rounded-xl p-6 mb-6">
                                        <h3 class="text-3xl font-bold mb-4 text-gray-800">üé¨ Demo Showcase - 1000 Shipment Capacity</h3>
                                        <p class="text-lg text-gray-700 mb-4">Experience enterprise-level tracking with our enhanced demo platform!</p>
                                        
                                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                                            <div class="bg-white rounded-lg p-4 shadow-sm">
                                                <div class="text-2xl font-bold text-green-600">1,000</div>
                                                <div class="text-sm text-gray-600">Daily Tracking Limit</div>
                                            </div>
                                            <div class="bg-white rounded-lg p-4 shadow-sm">
                                                <div class="text-2xl font-bold text-blue-600">100</div>
                                                <div class="text-sm text-gray-600">Batch Processing</div>
                                            </div>
                                            <div class="bg-white rounded-lg p-4 shadow-sm">
                                                <div class="text-2xl font-bold text-purple-600">50</div>
                                                <div class="text-sm text-gray-600">Concurrent Requests</div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex gap-4 mb-6">
                                            <button onclick="generateDemoData(100)" class="bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-green-700 transition-all transform hover:scale-105">
                                                üöÄ Generate 100 Shipments
                                            </button>
                                            <button onclick="generateDemoData(500)" class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-blue-700 transition-all transform hover:scale-105">
                                                ‚ö° Generate 500 Shipments
                                            </button>
                                            <button onclick="generateDemoData(1000)" class="bg-gradient-to-r from-purple-500 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-600 hover:to-purple-700 transition-all transform hover:scale-105">
                                                üî• Full Demo (1000 Shipments)
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                                        <div class="bg-white rounded-lg p-6 shadow-sm">
                                            <h4 class="text-xl font-semibold mb-4 text-gray-800">üöÄ Enhanced Demo Features</h4>
                                            <div class="space-y-3">
                                                <div class="flex items-center">
                                                    <span class="w-2 h-2 bg-green-500 rounded-full mr-3"></span>
                                                    <span class="text-gray-700">10x higher API rate limits (10,000/hour per carrier)</span>
                                                </div>
                                                <div class="flex items-center">
                                                    <span class="w-2 h-2 bg-blue-500 rounded-full mr-3"></span>
                                                    <span class="text-gray-700">Optimized batch processing for smooth demos</span>
                                                </div>
                                                <div class="flex items-center">
                                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-3"></span>
                                                    <span class="text-gray-700">Real-time tracking data generation</span>
                                                </div>
                                                <div class="flex items-center">
                                                    <span class="w-2 h-2 bg-orange-500 rounded-full mr-3"></span>
                                                    <span class="text-gray-700">Multi-carrier support (FedEx, UPS, DHL)</span>
                                                </div>
                                                <div class="flex items-center">
                                                    <span class="w-2 h-2 bg-red-500 rounded-full mr-3"></span>
                                                    <span class="text-gray-700">Global shipping locations (20+ countries)</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="bg-white rounded-lg p-6 shadow-sm">
                                            <h4 class="text-xl font-semibold mb-4 text-gray-800">üìä Demo Performance Metrics</h4>
                                            <div class="space-y-4">
                                                <div>
                                                    <div class="flex justify-between mb-1">
                                                        <span class="text-sm text-gray-700">Processing Speed</span>
                                                        <span class="text-sm font-semibold text-green-600">100ms/shipment</span>
                                                    </div>
                                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                                        <div class="bg-green-600 h-2 rounded-full" style="width: 95%"></div>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="flex justify-between mb-1">
                                                        <span class="text-sm text-gray-700">Success Rate</span>
                                                        <span class="text-sm font-semibold text-blue-600">99.9%</span>
                                                    </div>
                                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                                        <div class="bg-blue-600 h-2 rounded-full" style="width: 99%"></div>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="flex justify-between mb-1">
                                                        <span class="text-sm text-gray-700">Data Accuracy</span>
                                                        <span class="text-sm font-semibold text-purple-600">100%</span>
                                                    </div>
                                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                                        <div class="bg-purple-600 h-2 rounded-full" style="width: 100%"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-6 border border-yellow-200">
                                        <h4 class="text-lg font-semibold mb-3 text-orange-800">üí° Perfect for Prospect Demonstrations</h4>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                            <div>
                                                <strong class="text-orange-800">üéØ Sales Benefits:</strong>
                                                <ul class="mt-2 space-y-1 text-orange-700">
                                                    <li>‚Ä¢ Show enterprise-scale capability</li>
                                                    <li>‚Ä¢ Demonstrate real-time processing</li>
                                                    <li>‚Ä¢ Prove multi-carrier integration</li>
                                                    <li>‚Ä¢ Highlight weather intelligence</li>
                                                </ul>
                                            </div>
                                            <div>
                                                <strong class="text-orange-800">‚ö° Technical Features:</strong>
                                                <ul class="mt-2 space-y-1 text-orange-700">
                                                    <li>‚Ä¢ Load testing ready</li>
                                                    <li>‚Ä¢ Scalable architecture demo</li>
                                                    <li>‚Ä¢ Performance monitoring</li>
                                                    <li>‚Ä¢ Error handling showcase</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div id="demoResults" class="hidden mt-6">
                                        <div class="bg-white rounded-lg shadow-lg p-6">
                                            <div class="flex items-center justify-between mb-4">
                                                <h4 class="text-xl font-semibold text-gray-800">üìä Demo Results</h4>
                                                <button onclick="clearDemoResults()" class="text-red-600 hover:text-red-800 text-sm">Clear Results</button>
                                            </div>
                                            <div id="demoResultsContent"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="sea-freight" class="page">
                <h2 class="text-2xl font-bold mb-6">üö¢ Sea Freight Intelligence</h2>
                
                <!-- Statistics Dashboard -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-blue-800">üö¢ Active Containers</h3>
                        <div id="activeContainerCount" class="text-3xl font-bold text-blue-900">0</div>
                        <p class="text-sm text-blue-600 mt-1">Being tracked</p>
                        <div class="mt-2 text-xs text-blue-700">
                            üìà <span id="arrivingThisWeekCount">0</span> arriving this week
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-green-800">‚≠ê On-Time Rate</h3>
                        <div class="text-3xl font-bold text-green-900">94%</div>
                        <p class="text-sm text-green-600 mt-1">With weather intelligence</p>
                        <div class="mt-2 text-xs text-green-700">
                            üìä +18% vs industry avg
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-yellow-800">üå™Ô∏è Weather Alerts</h3>
                        <div class="text-3xl font-bold text-yellow-900">3</div>
                        <p class="text-sm text-yellow-600 mt-1">Active events</p>
                        <div class="mt-2 text-xs text-yellow-700">
                            üåä Typhoon in South China Sea
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg shadow p-6">
                        <h3 class="text-lg font-semibold mb-2 text-purple-800">üí∞ Cargo Value</h3>
                        <div class="text-3xl font-bold text-purple-900">$2.4M</div>
                        <p class="text-sm text-purple-600 mt-1">In transit protection</p>
                        <div class="mt-2 text-xs text-purple-700">
                            üõ°Ô∏è Weather monitoring active
                        </div>
                    </div>
                </div>

                <!-- Search & Filter Container Shipments -->
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">üîç Search & Track Container Shipments</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Container/BL Number</label>
                            <input type="text" id="containerRef" placeholder="e.g., MSCU1234567, BL-20240315-001" class="w-full border border-gray-300 rounded-lg px-3 py-2" />
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Vessel/Voyage</label>
                            <input type="text" id="vesselSearch" placeholder="e.g., MSC GULSUN, CMA CGM MARCO POLO" class="w-full border border-gray-300 rounded-lg px-3 py-2" />
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Origin Port</label>
                            <select id="originPort" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="">Select Origin Port</option>
                                
                                <!-- Asia Pacific Major Ports -->
                                <optgroup label="üåè Asia Pacific">
                                    <option value="CNSHA">CNSHA - Shanghai, China</option>
                                    <option value="CNSZX">CNSZX - Shenzhen, China</option>
                                    <option value="CNNBO">CNNBO - Ningbo, China</option>
                                    <option value="CNQIN">CNQIN - Qingdao, China</option>
                                    <option value="CNTIA">CNTIA - Tianjin, China</option>
                                    <option value="CNXMN">CNXMN - Xiamen, China</option>
                                    <option value="SGSIN">SGSIN - Singapore</option>
                                    <option value="HKHKG">HKHKG - Hong Kong</option>
                                    <option value="KRPUS">KRPUS - Busan, South Korea</option>
                                    <option value="JPYOK">JPYOK - Yokohama, Japan</option>
                                    <option value="JPTYO">JPTYO - Tokyo, Japan</option>
                                    <option value="JPKOB">JPKOB - Kobe, Japan</option>
                                    <option value="THTPP">THTPP - Laem Chabang, Thailand</option>
                                    <option value="MYPKG">MYPKG - Port Klang, Malaysia</option>
                                    <option value="IDTPP">IDTPP - Tanjung Priok, Indonesia</option>
                                    <option value="VNCLI">VNCLI - Cat Lai, Vietnam</option>
                                    <option value="PHMNL">PHMNL - Manila, Philippines</option>
                                    <option value="INMUN">INMUN - Mumbai, India</option>
                                    <option value="INJNP">INJNP - Jawaharlal Nehru, India</option>
                                    <option value="INCHE">INCHE - Chennai, India</option>
                                    <option value="AUSYD">AUSYD - Sydney, Australia</option>
                                    <option value="AUMEL">AUMEL - Melbourne, Australia</option>
                                </optgroup>
                                
                                <!-- Europe Major Ports -->
                                <optgroup label="üá™üá∫ Europe">
                                    <option value="NLRTM">NLRTM - Rotterdam, Netherlands</option>
                                    <option value="BEANR">BEANR - Antwerp, Belgium</option>
                                    <option value="DEHAM">DEHAM - Hamburg, Germany</option>
                                    <option value="DEBRE">DEBRE - Bremerhaven, Germany</option>
                                    <option value="GBFXT">GBFXT - Felixstowe, UK</option>
                                    <option value="GBSOU">GBSOU - Southampton, UK</option>
                                    <option value="ESLPA">ESLPA - Las Palmas, Spain</option>
                                    <option value="ESVLC">ESVLC - Valencia, Spain</option>
                                    <option value="ESALG">ESALG - Algeciras, Spain</option>
                                    <option value="FRMRS">FRMRS - Marseille, France</option>
                                    <option value="FRLEH">FRLEH - Le Havre, France</option>
                                    <option value="ITGOA">ITGOA - Genoa, Italy</option>
                                    <option value="ITNAP">ITNAP - Naples, Italy</option>
                                    <option value="ITLIV">ITLIV - Livorno, Italy</option>
                                    <option value="GRPIR">GRPIR - Piraeus, Greece</option>
                                    <option value="TRIST">TRIST - Istanbul, Turkey</option>
                                    <option value="UAODS">UAODS - Odessa, Ukraine</option>
                                    <option value="RULED">RULED - St. Petersburg, Russia</option>
                                </optgroup>
                                
                                <!-- North America Major Ports -->
                                <optgroup label="üá∫üá∏ North America">
                                    <option value="USLAX">USLAX - Los Angeles, CA</option>
                                    <option value="USLGB">USLGB - Long Beach, CA</option>
                                    <option value="USNYC">USNYC - New York/New Jersey</option>
                                    <option value="USSAV">USSAV - Savannah, GA</option>
                                    <option value="USCHA">USCHA - Charleston, SC</option>
                                    <option value="USMIA">USMIA - Miami, FL</option>
                                    <option value="USSEA">USSEA - Seattle, WA</option>
                                    <option value="USTAC">USTAC - Tacoma, WA</option>
                                    <option value="USOAK">USOAK - Oakland, CA</option>
                                    <option value="USBAL">USBAL - Baltimore, MD</option>
                                    <option value="USHOU">USHOU - Houston, TX</option>
                                    <option value="USNOL">USNOL - New Orleans, LA</option>
                                    <option value="CAVAN">CAVAN - Vancouver, Canada</option>
                                    <option value="CATOR">CATOR - Toronto, Canada</option>
                                    <option value="CAHAL">CAHAL - Halifax, Canada</option>
                                    <option value="CAYMX">CAYMX - Montreal, Canada</option>
                                    <option value="MXVER">MXVER - Veracruz, Mexico</option>
                                    <option value="MXMAN">MXMAN - Manzanillo, Mexico</option>
                                </optgroup>
                                
                                <!-- Middle East & Africa -->
                                <optgroup label="üåç Middle East & Africa">
                                    <option value="AEJEA">AEJEA - Jebel Ali, UAE</option>
                                    <option value="AESHJ">AESHJ - Sharjah, UAE</option>
                                    <option value="QADOG">QADOG - Doha, Qatar</option>
                                    <option value="KWKWI">KWKWI - Kuwait</option>
                                    <option value="SADMM">SADMM - Dammam, Saudi Arabia</option>
                                    <option value="SAJED">SAJED - Jeddah, Saudi Arabia</option>
                                    <option value="IRCOO">IRCOO - Bandar Abbas, Iran</option>
                                    <option value="PKKAR">PKKAR - Karachi, Pakistan</option>
                                    <option value="LKGOL">LKGOL - Colombo, Sri Lanka</option>
                                    <option value="ZADUR">ZADUR - Durban, South Africa</option>
                                    <option value="ZACPT">ZACPT - Cape Town, South Africa</option>
                                    <option value="EGALY">EGALY - Alexandria, Egypt</option>
                                    <option value="MACSB">MACSB - Casablanca, Morocco</option>
                                    <option value="NGLAG">NGLAG - Lagos, Nigeria</option>
                                </optgroup>
                                
                                <!-- South America -->
                                <optgroup label="üåé South America">
                                    <option value="BRSST">BRSST - Santos, Brazil</option>
                                    <option value="BRRIG">BRRIG - Rio Grande, Brazil</option>
                                    <option value="BRPNG">BRPNG - Paranagu√°, Brazil</option>
                                    <option value="BRSSZ">BRSSZ - Suape, Brazil</option>
                                    <option value="CLVAP">CLVAP - Valparaiso, Chile</option>
                                    <option value="CLSAI">CLSAI - San Antonio, Chile</option>
                                    <option value="ARBUE">ARBUE - Buenos Aires, Argentina</option>
                                    <option value="ARUSU">ARUSU - Ushuaia, Argentina</option>
                                    <option value="UYMVD">UYMVD - Montevideo, Uruguay</option>
                                    <option value="PECLL">PECLL - Callao, Peru</option>
                                    <option value="COGUA">COGUA - Guayaquil, Ecuador</option>
                                    <option value="COCAR">COCAR - Cartagena, Colombia</option>
                                    <option value="COBAR">COBAR - Barranquilla, Colombia</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Destination Port</label>
                            <select id="destinationPort" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="">Select Destination Port</option>
                                
                                <!-- Same comprehensive port list as origin -->
                                <optgroup label="üåè Asia Pacific">
                                    <option value="CNSHA">CNSHA - Shanghai, China</option>
                                    <option value="CNSZX">CNSZX - Shenzhen, China</option>
                                    <option value="CNNBO">CNNBO - Ningbo, China</option>
                                    <option value="CNQIN">CNQIN - Qingdao, China</option>
                                    <option value="CNTIA">CNTIA - Tianjin, China</option>
                                    <option value="CNXMN">CNXMN - Xiamen, China</option>
                                    <option value="SGSIN">SGSIN - Singapore</option>
                                    <option value="HKHKG">HKHKG - Hong Kong</option>
                                    <option value="KRPUS">KRPUS - Busan, South Korea</option>
                                    <option value="JPYOK">JPYOK - Yokohama, Japan</option>
                                    <option value="JPTYO">JPTYO - Tokyo, Japan</option>
                                    <option value="JPKOB">JPKOB - Kobe, Japan</option>
                                    <option value="THTPP">THTPP - Laem Chabang, Thailand</option>
                                    <option value="MYPKG">MYPKG - Port Klang, Malaysia</option>
                                    <option value="IDTPP">IDTPP - Tanjung Priok, Indonesia</option>
                                    <option value="VNCLI">VNCLI - Cat Lai, Vietnam</option>
                                    <option value="PHMNL">PHMNL - Manila, Philippines</option>
                                    <option value="INMUN">INMUN - Mumbai, India</option>
                                    <option value="INJNP">INJNP - Jawaharlal Nehru, India</option>
                                    <option value="INCHE">INCHE - Chennai, India</option>
                                    <option value="AUSYD">AUSYD - Sydney, Australia</option>
                                    <option value="AUMEL">AUMEL - Melbourne, Australia</option>
                                </optgroup>
                                
                                <optgroup label="üá™üá∫ Europe">
                                    <option value="NLRTM">NLRTM - Rotterdam, Netherlands</option>
                                    <option value="BEANR">BEANR - Antwerp, Belgium</option>
                                    <option value="DEHAM">DEHAM - Hamburg, Germany</option>
                                    <option value="DEBRE">DEBRE - Bremerhaven, Germany</option>
                                    <option value="GBFXT">GBFXT - Felixstowe, UK</option>
                                    <option value="GBSOU">GBSOU - Southampton, UK</option>
                                    <option value="ESLPA">ESLPA - Las Palmas, Spain</option>
                                    <option value="ESVLC">ESVLC - Valencia, Spain</option>
                                    <option value="ESALG">ESALG - Algeciras, Spain</option>
                                    <option value="FRMRS">FRMRS - Marseille, France</option>
                                    <option value="FRLEH">FRLEH - Le Havre, France</option>
                                    <option value="ITGOA">ITGOA - Genoa, Italy</option>
                                    <option value="ITNAP">ITNAP - Naples, Italy</option>
                                    <option value="ITLIV">ITLIV - Livorno, Italy</option>
                                    <option value="GRPIR">GRPIR - Piraeus, Greece</option>
                                    <option value="TRIST">TRIST - Istanbul, Turkey</option>
                                    <option value="UAODS">UAODS - Odessa, Ukraine</option>
                                    <option value="RULED">RULED - St. Petersburg, Russia</option>
                                </optgroup>
                                
                                <optgroup label="üá∫üá∏ North America">
                                    <option value="USLAX" selected>USLAX - Los Angeles, CA</option>
                                    <option value="USLGB">USLGB - Long Beach, CA</option>
                                    <option value="USNYC">USNYC - New York/New Jersey</option>
                                    <option value="USSAV">USSAV - Savannah, GA</option>
                                    <option value="USCHA">USCHA - Charleston, SC</option>
                                    <option value="USMIA">USMIA - Miami, FL</option>
                                    <option value="USSEA">USSEA - Seattle, WA</option>
                                    <option value="USTAC">USTAC - Tacoma, WA</option>
                                    <option value="USOAK">USOAK - Oakland, CA</option>
                                    <option value="USBAL">USBAL - Baltimore, MD</option>
                                    <option value="USHOU">USHOU - Houston, TX</option>
                                    <option value="USNOL">USNOL - New Orleans, LA</option>
                                    <option value="CAVAN">CAVAN - Vancouver, Canada</option>
                                    <option value="CATOR">CATOR - Toronto, Canada</option>
                                    <option value="CAHAL">CAHAL - Halifax, Canada</option>
                                    <option value="CAYMX">CAYMX - Montreal, Canada</option>
                                    <option value="MXVER">MXVER - Veracruz, Mexico</option>
                                    <option value="MXMAN">MXMAN - Manzanillo, Mexico</option>
                                </optgroup>
                                
                                <optgroup label="üåç Middle East & Africa">
                                    <option value="AEJEA">AEJEA - Jebel Ali, UAE</option>
                                    <option value="AESHJ">AESHJ - Sharjah, UAE</option>
                                    <option value="QADOG">QADOG - Doha, Qatar</option>
                                    <option value="KWKWI">KWKWI - Kuwait</option>
                                    <option value="SADMM">SADMM - Dammam, Saudi Arabia</option>
                                    <option value="SAJED">SAJED - Jeddah, Saudi Arabia</option>
                                    <option value="IRCOO">IRCOO - Bandar Abbas, Iran</option>
                                    <option value="PKKAR">PKKAR - Karachi, Pakistan</option>
                                    <option value="LKGOL">LKGOL - Colombo, Sri Lanka</option>
                                    <option value="ZADUR">ZADUR - Durban, South Africa</option>
                                    <option value="ZACPT">ZACPT - Cape Town, South Africa</option>
                                    <option value="EGALY">EGALY - Alexandria, Egypt</option>
                                    <option value="MACSB">MACSB - Casablanca, Morocco</option>
                                    <option value="NGLAG">NGLAG - Lagos, Nigeria</option>
                                </optgroup>
                                
                                <optgroup label="üåé South America">
                                    <option value="BRSST">BRSST - Santos, Brazil</option>
                                    <option value="BRRIG">BRRIG - Rio Grande, Brazil</option>
                                    <option value="BRPNG">BRPNG - Paranagu√°, Brazil</option>
                                    <option value="BRSSZ">BRSSZ - Suape, Brazil</option>
                                    <option value="CLVAP">CLVAP - Valparaiso, Chile</option>
                                    <option value="CLSAI">CLSAI - San Antonio, Chile</option>
                                    <option value="ARBUE">ARBUE - Buenos Aires, Argentina</option>
                                    <option value="ARUSU">ARUSU - Ushuaia, Argentina</option>
                                    <option value="UYMVD">UYMVD - Montevideo, Uruguay</option>
                                    <option value="PECLL">PECLL - Callao, Peru</option>
                                    <option value="COGUA">COGUA - Guayaquil, Ecuador</option>
                                    <option value="COCAR">COCAR - Cartagena, Colombia</option>
                                    <option value="COBAR">COBAR - Barranquilla, Colombia</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Container Status</label>
                            <select id="containerStatus" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="">All Status</option>
                                <option value="loaded">Loaded at Origin</option>
                                <option value="departed">Departed Origin Port</option>
                                <option value="transit">In Transit</option>
                                <option value="arrived">Arrived Destination</option>
                                <option value="discharged">Discharged</option>
                                <option value="delivered">Delivered</option>
                                <option value="weather-delay">Weather Delayed</option>
                                <option value="customs-hold">Customs Hold</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cargo Type</label>
                            <select id="cargoType" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="">All Cargo Types</option>
                                <option value="electronics">Electronics</option>
                                <option value="automotive">Automotive Parts</option>
                                <option value="machinery">Machinery</option>
                                <option value="textiles">Textiles & Apparel</option>
                                <option value="chemicals">Chemicals</option>
                                <option value="food">Food & Beverages</option>
                                <option value="raw-materials">Raw Materials</option>
                                <option value="consumer-goods">Consumer Goods</option>
                                <option value="dangerous">Dangerous Goods</option>
                                <option value="refrigerated">Refrigerated</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ETA Range</label>
                            <select id="etaRange" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="">Any ETA</option>
                                <option value="overdue">Overdue</option>
                                <option value="today">Today</option>
                                <option value="tomorrow">Tomorrow</option>
                                <option value="this-week">This Week</option>
                                <option value="next-week">Next Week</option>
                                <option value="this-month">This Month</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Weather Risk</label>
                            <select id="weatherRisk" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="">All Risk Levels</option>
                                <option value="low">Low Risk</option>
                                <option value="medium">Medium Risk</option>
                                <option value="high">High Risk</option>
                                <option value="critical">Critical</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="flex space-x-4">
                        <button onclick="searchContainers()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                            üîç Search Containers
                        </button>
                        <button onclick="loadSampleContainers()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">
                            üì¶ Load Sample Data
                        </button>
                        <button onclick="exportContainerData()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700">
                            üìä Export Data
                        </button>
                    </div>
                </div>

                <!-- Search Results -->
                <div id="containerResults" class="bg-white rounded-lg shadow p-6 mb-6" style="display: none;">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">üì¶ Container Search Results</h3>
                        <span class="text-sm text-gray-500" id="containerResultCount">0 containers found</span>
                    </div>
                    <div id="containerContent">
                        <!-- Sample container results will be shown here -->
                    </div>
                </div>
                
                <!-- Active Sea Routes -->
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">üåä Active Sea Routes</h3>
                        <button onclick="refreshSeaRoutes()" class="bg-gray-100 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-200">
                            üîÑ Refresh
                        </button>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="border rounded-lg p-4 bg-blue-50">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <div class="flex justify-between items-start mb-2">
                                        <h4 class="font-semibold text-blue-900">Shanghai (CNSHA) ‚Üí Los Angeles (USLAX)</h4>
                                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">ON TRACK</span>
                                    </div>
                                    <p class="text-sm text-blue-700 mb-2">23 containers ‚Ä¢ Electronics cargo ‚Ä¢ MSC GULSUN</p>
                                    <div class="grid grid-cols-3 gap-4 text-xs">
                                        <div>
                                            <span class="text-gray-600">Departed:</span>
                                            <span class="font-medium">Mar 15, 2024</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">ETA:</span>
                                            <span class="font-medium text-green-600">Mar 28, 2024</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">Weather:</span>
                                            <span class="font-medium text-green-600">Clear</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-4 bg-yellow-50">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <div class="flex justify-between items-start mb-2">
                                        <h4 class="font-semibold text-yellow-900">Hamburg (DEHAM) ‚Üí New York (USNYC)</h4>
                                        <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">STORM WATCH</span>
                                    </div>
                                    <p class="text-sm text-yellow-700 mb-2">15 containers ‚Ä¢ Weather monitoring ‚Ä¢ MAERSK EDINBURGH</p>
                                    <div class="grid grid-cols-3 gap-4 text-xs">
                                        <div>
                                            <span class="text-gray-600">Departed:</span>
                                            <span class="font-medium">Mar 18, 2024</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">ETA:</span>
                                            <span class="font-medium text-yellow-600">Mar 30, 2024 (Delayed)</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">Weather:</span>
                                            <span class="font-medium text-red-600">Storm System</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border rounded-lg p-4 bg-green-50">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <div class="flex justify-between items-start mb-2">
                                        <h4 class="font-semibold text-green-900">Singapore (SGSIN) ‚Üí Long Beach (USLGB)</h4>
                                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">OPTIMAL ROUTE</span>
                                    </div>
                                    <p class="text-sm text-green-700 mb-2">31 containers ‚Ä¢ Consumer goods ‚Ä¢ EVERGREEN EVER GIVEN</p>
                                    <div class="grid grid-cols-3 gap-4 text-xs">
                                        <div>
                                            <span class="text-gray-600">Departed:</span>
                                            <span class="font-medium">Mar 20, 2024</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">ETA:</span>
                                            <span class="font-medium text-green-600">Apr 2, 2024</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">Weather:</span>
                                            <span class="font-medium text-green-600">Favorable</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- User Menu Dropdown -->
    <div id="userMenu" class="hidden fixed top-4 right-4 bg-white rounded-lg shadow-lg border border-gray-200 p-4 z-50">
        <div class="flex items-center mb-3">
            <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold mr-3">
                <span id="userInitial">D</span>
            </div>
            <div>
                <p class="font-medium text-gray-800" id="userEmailDisplay">demo@nerva.com</p>
                <p class="text-xs text-gray-500" id="userStatusDisplay">Demo User</p>
            </div>
        </div>
        <hr class="my-3">
        <button onclick="showAppHelp()" class="w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded text-sm">
            üìñ Help & Guide
        </button>
        <button onclick="contactSupport()" class="w-full text-left px-3 py-2 text-blue-600 hover:bg-blue-50 rounded text-sm">
            üí¨ Contact Support
        </button>
    </div>

    <!-- AI Chatbot Widget -->
    <div id="chatWidget" class="fixed bottom-4 right-4 z-50">
        <!-- Chat Button -->
        <button id="chatButton" onclick="toggleChat()" class="bg-blue-600 hover:bg-blue-700 text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg transition-all duration-300">
            <span id="chatButtonIcon">üí¨</span>
        </button>
        
        <!-- Chat Window -->
        <div id="chatWindow" class="hidden absolute bottom-16 right-0 w-96 h-[500px] bg-white rounded-lg shadow-2xl border border-gray-200 flex flex-col">
            <!-- Chat Header -->
            <div class="bg-blue-600 text-white p-4 rounded-t-lg flex items-center justify-between">
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center mr-3">
                        ü§ñ
                    </div>
                    <div>
                        <h3 class="font-semibold">NaviFlow AI Assistant</h3>
                        <p class="text-xs opacity-90">Weather Intelligence Support</p>
                    </div>
                </div>
                <button onclick="toggleChat()" class="text-white hover:text-gray-200">
                    √ó
                </button>
            </div>
            
            <!-- Chat Messages -->
            <div id="chatMessages" class="flex-1 p-4 overflow-y-auto space-y-3">
                <div class="flex items-start space-x-2">
                    <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs">
                        ü§ñ
                    </div>
                    <div class="bg-gray-100 rounded-lg p-4 max-w-sm">
                        <p class="text-base">Hi! I'm your NaviFlow AI assistant. I can help with weather delays, shipping questions, and platform setup. How can I assist you today?</p>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="p-3 border-t border-gray-200">
                <div class="space-y-2">
                    <button onclick="sendQuickMessage('weather-delay')" class="w-full text-left text-sm bg-gray-50 hover:bg-gray-100 p-3 rounded border">
                        üå¶Ô∏è Weather delay questions
                    </button>
                    <button onclick="sendQuickMessage('setup-help')" class="w-full text-left text-sm bg-gray-50 hover:bg-gray-100 p-3 rounded border">
                        ‚öôÔ∏è Platform setup help
                    </button>
                    <button onclick="sendQuickMessage('customer-notifications')" class="w-full text-left text-sm bg-gray-50 hover:bg-gray-100 p-3 rounded border">
                        üìß Customer notification help
                    </button>
                </div>
            </div>
            
            <!-- Chat Input -->
            <div class="p-3 border-t border-gray-200">
                <div class="flex space-x-2">
                    <input type="text" id="chatInput" placeholder="Type your message..." class="flex-1 border border-gray-300 rounded px-3 py-2 text-sm" onkeypress="handleChatKeyPress(event)">
                    <button onclick="sendChatMessage()" class="bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700">
                        üì§
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showPage(pageId) {
            console.log('Switching to:', pageId);
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
                page.style.display = 'none';
            });
            const target = document.getElementById(pageId);
            if (target) {
                target.classList.add('active');
                target.style.display = 'block';
            }
        }

        function showUserMenu() {
            document.getElementById('userMenu').classList.toggle('hidden');
        }

        // Help System Functions
        function showAppHelp() {
            SoundManager.playClick();
            
            const helpModal = document.getElementById('helpModal');
            if (helpModal) {
                helpModal.classList.remove('hidden');
                helpModal.classList.add('flex');
                showHelpSection('getting-started'); // Show default section
            } else {
                // Create a simple help modal if the main one doesn't exist
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
                modal.innerHTML = `
                    <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex items-center justify-between">
                                <h2 class="text-2xl font-bold text-gray-800">üìñ Quick Help Guide</h2>
                                <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                            </div>
                        </div>
                        
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="bg-blue-50 p-4 rounded-lg">
                                    <h3 class="font-bold text-blue-900 mb-2">üöÄ Getting Started</h3>
                                    <p class="text-sm text-blue-800">Navigate through different sections using the sidebar menu. Start with Order Tracking to see live shipment data.</p>
                                </div>
                                
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h3 class="font-bold text-green-900 mb-2">üîó API Connections</h3>
                                    <p class="text-sm text-green-800">Connect your Shopify, WooCommerce, or Amazon stores using the API Connections tab. Use the tutorial videos and permission templates for easy setup.</p>
                                </div>
                                
                                <div class="bg-purple-50 p-4 rounded-lg">
                                    <h3 class="font-bold text-purple-900 mb-2">üí¨ Need More Help?</h3>
                                    <p class="text-sm text-purple-800">Click the "Need Help?" button in the API Connections section for live chat support with our integration specialists.</p>
                                </div>
                                
                                <div class="bg-yellow-50 p-4 rounded-lg">
                                    <h3 class="font-bold text-yellow-900 mb-2">üìä Features</h3>
                                    <ul class="text-sm text-yellow-800 space-y-1">
                                        <li>‚Ä¢ Real-time weather impact tracking</li>
                                        <li>‚Ä¢ Automated customer notifications</li>
                                        <li>‚Ä¢ Multi-carrier shipment tracking</li>
                                        <li>‚Ä¢ CSV data import/export</li>
                                        <li>‚Ä¢ Performance analytics</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
            }
        }

        function closeHelpModal() {
            const helpModal = document.getElementById('helpModal');
            if (helpModal) {
                helpModal.classList.add('hidden');
                helpModal.classList.remove('flex');
            }
        }

        function showHelpSection(sectionId) {
            try {
                // Hide all help sections
                document.querySelectorAll('.help-section').forEach(section => {
                    section.classList.add('hidden');
                });
                
                // Show target section
                const targetSection = document.getElementById(`help-${sectionId}`);
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                }
                
                // Update navigation highlight
                document.querySelectorAll('[onclick*="showHelpSection"]').forEach(btn => {
                    btn.classList.remove('bg-blue-100', 'text-blue-800');
                });
                
                const activeBtn = document.querySelector(`[onclick="showHelpSection('${sectionId}')"]`);
                if (activeBtn) {
                    activeBtn.classList.add('bg-blue-100', 'text-blue-800');
                }
            } catch (error) {
                console.warn('Help section error:', error);
                // Fallback - just log the error and continue
            }
        }

        function contactSupport() {
            SoundManager.playNotification();
            createNotification('üìû Contact Support', '‚úâÔ∏è Email: support@nerva.ai\nüì± Phone: +1-800-NERVA-AI\nüí¨ Live Chat: Available 24/7\nüìö Knowledge Base: docs.nerva.ai\n\nOur average response time is under 2 hours!', 'info');
        }

        function openTutorial(platform) {
            const tutorials = {
                'shopify': 'Opening Shopify Setup Tutorial...\n\nüìã Steps covered:\n1. Create private app\n2. Generate API credentials\n3. Configure webhooks\n4. Test connection\n\nEstimated time: 5 minutes',
                'woocommerce': 'Opening WooCommerce Setup Tutorial...\n\nüìã Steps covered:\n1. Install WordPress plugin\n2. Generate REST API keys\n3. Configure order sync\n4. Setup email templates\n\nEstimated time: 7 minutes',
                'amazon': 'Opening Amazon FBA Tutorial...\n\nüìã Steps covered:\n1. MWS API registration\n2. Seller Central permissions\n3. Performance monitoring setup\n4. Alert configuration\n\nEstimated time: 10 minutes'
            };
            
            SoundManager.playClick();
            createNotification('üìö Tutorial Guide', tutorials[platform] || 'Tutorial not found', 'info');
        }

        // Shipment Data Generation Functions
        function generateSampleShipments(count) {
            const products = [
                'iPhone 15 Pro Cases (Premium Bundle)', 'Samsung Galaxy S24 Screen Protectors', 'Wireless Bluetooth Headphones',
                'Fashion Jewelry Collection', 'Organic Skincare Products', 'Fitness Tracker Bands', 'Kitchen Appliance Set',
                'Baby Clothing Bundle', 'Office Desk Organizer', 'Car Phone Mount', 'Yoga Mat Set', 'Pet Toy Collection',
                'Gaming Mouse & Keyboard', 'Wall Art Canvas Prints', 'Essential Oil Diffuser', 'Laptop Accessories Kit',
                'Home Security Camera', 'Bluetooth Speaker', 'Watch Bands Collection', 'Protein Supplement',
                'LED Strip Lights', 'Coffee Grinder', 'Portable Charger', 'Resistance Bands', 'Makeup Brushes Set',
                'Garden Tool Set', 'Phone Cases Variety Pack', 'Bluetooth Earbuds', 'Tablet Stand', 'Travel Backpack'
            ];
            
            const customers = [
                'Sarah Johnson', 'Michael Chen', 'Emma Wilson', 'David Rodriguez', 'Lisa Thompson', 'James Anderson',
                'Maria Garcia', 'Robert Miller', 'Jennifer Davis', 'William Brown', 'Ashley Taylor', 'Christopher Lee',
                'Amanda White', 'Kevin Martin', 'Rachel Green', 'Daniel Clark', 'Jessica Lewis', 'Matthew Hall',
                'Nicole Young', 'Anthony Walker', 'Stephanie Allen', 'Brian King', 'Melissa Wright', 'Joshua Scott',
                'Heather Adams', 'Ryan Baker', 'Kimberly Hill', 'Brandon Nelson', 'Samantha Carter', 'Tyler Mitchell'
            ];
            
            const statuses = [
                { status: 'In Transit', color: 'blue', weight: 40 },
                { status: 'Out for Delivery', color: 'green', weight: 20 },
                { status: 'Delivered', color: 'green', weight: 25 },
                { status: 'Weather Delay', color: 'yellow', weight: 10 },
                { status: 'Processing', color: 'purple', weight: 5 }
            ];
            
            const routes = [
                'CHI ‚Üí MEM ‚Üí Customer', 'LAX ‚Üí PHX ‚Üí Customer', 'NYC ‚Üí ATL ‚Üí Customer', 'SEA ‚Üí DEN ‚Üí Customer',
                'MIA ‚Üí JAX ‚Üí Customer', 'HOU ‚Üí DAL ‚Üí Customer', 'BOS ‚Üí BWI ‚Üí Customer', 'SFO ‚Üí LAS ‚Üí Customer',
                'DET ‚Üí CLE ‚Üí Customer', 'PHI ‚Üí PIT ‚Üí Customer', 'MSP ‚Üí MSY ‚Üí Customer', 'SLC ‚Üí PDX ‚Üí Customer'
            ];
            
            const weatherConditions = [
                { condition: 'Clear conditions, no delays', color: 'blue' },
                { condition: 'Light rain, minimal impact', color: 'yellow' },
                { condition: 'Snow advisory, 2hr delay', color: 'orange' },
                { condition: 'Fog clearing, on schedule', color: 'blue' },
                { condition: 'Thunderstorm watch, monitoring', color: 'red' }
            ];
            
            const shipments = [];
            
            for (let i = 0; i < count; i++) {
                const product = products[Math.floor(Math.random() * products.length)];
                const customer = customers[Math.floor(Math.random() * customers.length)];
                const route = routes[Math.floor(Math.random() * routes.length)];
                const weather = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
                
                // Weighted random status selection
                const rand = Math.random() * 100;
                let currentWeight = 0;
                let selectedStatus = statuses[0];
                
                for (const statusOption of statuses) {
                    currentWeight += statusOption.weight;
                    if (rand <= currentWeight) {
                        selectedStatus = statusOption;
                        break;
                    }
                }
                
                const orderNumber = `#${String.fromCharCode(65 + Math.floor(Math.random() * 26))}${String.fromCharCode(65 + Math.floor(Math.random() * 26))}${Math.floor(Math.random() * 900000) + 100000}`;
                const value = `$${(Math.random() * 200 + 20).toFixed(2)}`;
                
                const etaOptions = [
                    'On Schedule (Tomorrow 2-6pm)', 'On Schedule (Today 4-8pm)', 'Delayed (2 days)',
                    'On Schedule (Monday 10am-2pm)', 'Express (Today before 3pm)', 'Standard (3-5 days)'
                ];
                
                const customerNotifications = [
                    '‚úì Auto-notified', '‚úì SMS sent', '‚úì Email delivered', '‚è≥ Notifying now', '‚úì WhatsApp sent'
                ];
                
                shipments.push({
                    product,
                    customer,
                    orderNumber,
                    value,
                    status: selectedStatus.status,
                    statusColor: selectedStatus.color,
                    route,
                    eta: etaOptions[Math.floor(Math.random() * etaOptions.length)],
                    weather: weather.condition,
                    weatherColor: weather.color,
                    customerStatus: customerNotifications[Math.floor(Math.random() * customerNotifications.length)]
                });
            }
            
            return shipments;
        }
        
        function populateShipmentDisplay(shipments) {
            const shipmentContent = document.getElementById('shipmentContent');
            
            // Update the dashboard counter
            document.getElementById('activeShipmentCount').textContent = shipments.length;
            
            // Calculate arriving today (simulate based on ETA)
            const arrivingToday = shipments.filter(s => s.eta.includes('Today')).length;
            document.getElementById('arrivingTodayCount').textContent = arrivingToday;
            
            const shipmentsHtml = shipments.map(shipment => `
                <div class="border rounded-lg p-4 bg-gradient-to-r from-blue-50 to-blue-100 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex-1">
                            <h4 class="font-semibold text-blue-900">${shipment.product}</h4>
                            <p class="text-sm text-blue-700">Order: ${shipment.orderNumber} | Customer: ${shipment.customer} | Value: ${shipment.value}</p>
                        </div>
                        <span class="bg-${shipment.statusColor}-100 text-${shipment.statusColor}-800 px-3 py-1 rounded-full text-sm font-medium ml-4 whitespace-nowrap">
                            ${shipment.status}
                        </span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
                        <div>
                            <p class="text-gray-600">Route</p>
                            <p class="font-semibold">${shipment.route}</p>
                        </div>
                        <div>
                            <p class="text-gray-600">Delivery ETA</p>
                            <p class="font-semibold text-green-600">${shipment.eta}</p>
                        </div>
                        <div>
                            <p class="text-gray-600">Weather Status</p>
                            <p class="font-semibold text-${shipment.weatherColor}-600">${shipment.weather}</p>
                        </div>
                        <div>
                            <p class="text-gray-600">Customer Status</p>
                            <p class="font-semibold text-green-600">${shipment.customerStatus}</p>
                        </div>
                    </div>
                </div>
            `).join('');
            
            shipmentContent.innerHTML = `
                <div class="space-y-4">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-semibold text-gray-800">Showing ${shipments.length} shipments</h4>
                        <div class="flex gap-2">
                            <button onclick="exportShipmentData()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                                üìä Export Data
                            </button>
                            <button onclick="refreshShipmentData()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm">
                                üîÑ Refresh
                            </button>
                        </div>
                    </div>
                    <div class="max-h-96 overflow-y-auto space-y-3">
                        ${shipmentsHtml}
                    </div>
                </div>
            `;
        }
        
        function exportShipmentData() {
            SoundManager.playClick();
            createNotification('üìä Export Started', 'Shipment data is being exported to CSV format.\n\nThis will include:\n‚úÖ All shipment details\n‚úÖ Customer information\n‚úÖ Weather impact data\n‚úÖ Delivery status updates', 'success');
        }
        
        function refreshShipmentData() {
            SoundManager.playClick();
            createNotification('üîÑ Refreshing Data', 'Updating shipment information...\n\n‚è≥ Fetching latest status\n‚è≥ Checking weather conditions\n‚è≥ Updating delivery estimates', 'info');
            
            // Simulate refresh by reloading sample data
            setTimeout(() => {
                loadSampleShipments();
                createNotification('‚úÖ Data Refreshed', 'All shipment data updated successfully!\n\nüìä Latest tracking information loaded\nüå§Ô∏è Weather conditions updated\nüì± Customer notifications synchronized', 'success');
            }, 2000);
        }

        // Additional functions for the app
        function searchShipments() {
            // Generate and display 47 matching shipments
            const shipments = generateSampleShipments(47);
            populateShipmentDisplay(shipments);
            
            document.getElementById('shipmentResults').style.display = 'block';
            SoundManager.playClick();
            createNotification('üîç Search Complete', 'Found 47 matching shipments\n‚úÖ Weather data applied\n‚úÖ Customer alerts active\n‚úÖ Results filtered by criteria', 'success');
        }

        function loadSampleShipments() {
            // Generate and display 89 actual shipments
            const shipments = generateSampleShipments(89);
            populateShipmentDisplay(shipments);
            
            document.getElementById('shipmentResults').style.display = 'block';
            SoundManager.playSuccess();
            createNotification('üì¶ Sample Data Loaded', '‚úÖ 89 active shipments imported\n‚úÖ Weather intelligence applied\n‚úÖ Customer notifications ready\n‚úÖ All carriers connected', 'success');
        }

        function showCustomerImport() {
            SoundManager.playClick();
            showCustomerImportModal();
        }

        function showCustomerImportModal() {
            const modal = document.createElement('div');
            modal.id = 'customerImportModal';
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-2xl font-bold text-gray-800">üì• Customer Import Options</h2>
                            <button onclick="closeCustomerImportModal()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- API Integrations -->
                            <div class="space-y-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">üîó API Integrations</h3>
                                
                                <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer" onclick="connectShopify()">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                                                üõçÔ∏è
                                            </div>
                                            <div>
                                                <h4 class="font-semibold text-gray-900">Shopify</h4>
                                                <p class="text-sm text-gray-600">Direct API sync</p>
                                            </div>
                                        </div>
                                        <span class="text-green-600 text-sm font-medium">Real-time</span>
                                    </div>
                                </div>

                                <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer" onclick="connectWooCommerce()">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                                üõí
                                            </div>
                                            <div>
                                                <h4 class="font-semibold text-gray-900">WooCommerce</h4>
                                                <p class="text-sm text-gray-600">REST API integration</p>
                                            </div>
                                        </div>
                                        <span class="text-blue-600 text-sm font-medium">Automated</span>
                                    </div>
                                </div>

                                <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer" onclick="connectAmazon()">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mr-4">
                                                üì¶
                                            </div>
                                            <div>
                                                <h4 class="font-semibold text-gray-900">Amazon FBA</h4>
                                                <p class="text-sm text-gray-600">MWS integration</p>
                                            </div>
                                        </div>
                                        <span class="text-orange-600 text-sm font-medium">Enterprise</span>
                                    </div>
                                </div>
                            </div>

                            <!-- CSV Upload -->
                            <div class="space-y-4">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">üìÑ Manual Import</h3>
                                
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors">
                                    <div class="mb-4">
                                        <div class="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                                            üìÑ
                                        </div>
                                        <h4 class="font-semibold text-gray-900 mb-2">CSV Upload</h4>
                                        <p class="text-sm text-gray-600 mb-4">Upload customer data from spreadsheet</p>
                                    </div>
                                    
                                    <input type="file" id="csvFileInput" accept=".csv,.xlsx,.xls" class="hidden" onchange="handleCSVUpload(event)">
                                    <button onclick="document.getElementById('csvFileInput').click()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                        üìÅ Choose CSV File
                                    </button>
                                    
                                    <div class="mt-4 text-xs text-gray-500">
                                        Supports: CSV, Excel (.xlsx, .xls)<br>
                                        Max file size: 10MB
                                    </div>
                                </div>

                                <!-- Excel Template Download -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h5 class="font-semibold text-gray-800 mb-2">üìä Excel Template</h5>
                                    <p class="text-sm text-gray-600 mb-3">Download our Excel-compatible template with sample data and instructions</p>
                                    
                                    <div class="grid grid-cols-1 gap-2 mb-3">
                                        <div class="text-xs text-green-600">
                                            ‚úÖ <strong>Opens directly in Excel or Google Sheets</strong>
                                        </div>
                                        <div class="text-xs text-gray-500">
                                            <strong>Required:</strong> First Name, Last Name, Email
                                        </div>
                                        <div class="text-xs text-gray-500">
                                            <strong>Optional:</strong> Phone, Address, Tags, Notifications
                                        </div>
                                        <div class="text-xs text-blue-600">
                                            üí° <strong>Save as CSV when ready to upload</strong>
                                        </div>
                                    </div>
                                    
                                    <button onclick="downloadCSVTemplate()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm w-full">
                                        üìä Download Excel Template
                                    </button>
                                </div>

                                <!-- Upload Progress -->
                                <div id="uploadProgress" class="hidden bg-blue-50 rounded-lg p-4">
                                    <h5 class="font-semibold text-blue-800 mb-2">üì§ Upload Progress</h5>
                                    <div class="w-full bg-blue-200 rounded-full h-2 mb-2">
                                        <div id="progressBar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                                    </div>
                                    <p id="progressText" class="text-sm text-blue-700">Preparing upload...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Imports -->
                        <div class="mt-8 border-t border-gray-200 pt-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">üìä Recent Imports</h3>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Source</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Records</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200">
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2024-01-19 14:30</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">üìÑ customers_jan.csv</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">1,247</td>
                                            <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">‚úÖ Complete</span></td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2024-01-18 09:15</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">üõçÔ∏è Shopify API</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">892</td>
                                            <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">‚úÖ Synced</span></td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2024-01-17 16:45</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">üì¶ Amazon FBA</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2,156</td>
                                            <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">üîÑ Auto-sync</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            modal.classList.add('fade-in');
        }

        function closeCustomerImportModal() {
            const modal = document.getElementById('customerImportModal');
            if (modal) {
                modal.remove();
            }
        }

        function handleCSVUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Validate file type
            const validTypes = ['text/csv', 'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'];
            if (!validTypes.includes(file.type) && !file.name.toLowerCase().endsWith('.csv')) {
                SoundManager.playError();
                createNotification('‚ùå Invalid File Type', 'Please upload a CSV or Excel file (.csv, .xlsx, .xls)', 'error');
                return;
            }

            // Validate file size (10MB limit)
            if (file.size > 10 * 1024 * 1024) {
                SoundManager.playError();
                createNotification('‚ùå File Too Large', 'File size must be less than 10MB.\n\nPlease reduce file size or split into multiple files.', 'error');
                return;
            }

            SoundManager.playClick();
            simulateCSVUpload(file);
        }

        function simulateCSVUpload(file) {
            const progressContainer = document.getElementById('uploadProgress');
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            
            progressContainer.classList.remove('hidden');
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                
                progressBar.style.width = progress + '%';
                
                if (progress < 25) {
                    progressText.textContent = 'Reading file format...';
                } else if (progress < 50) {
                    progressText.textContent = 'Validating customer data...';
                } else if (progress < 75) {
                    progressText.textContent = 'Processing records...';
                } else if (progress < 95) {
                    progressText.textContent = 'Finalizing import...';
                } else {
                    progressText.textContent = 'Upload complete!';
                }
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        SoundManager.playSuccess();
                        createNotification('‚úÖ CSV Upload Successful', `File: ${file.name}\n\n‚úÖ 1,247 customers imported\n‚úÖ Data validation passed\n‚úÖ Weather alerts configured\n‚úÖ All records ready for tracking`, 'success');
                        
                        // Hide progress and reset
                        setTimeout(() => {
                            progressContainer.classList.add('hidden');
                            progressBar.style.width = '0%';
                            progressText.textContent = 'Preparing upload...';
                        }, 2000);
                    }, 500);
                }
            }, 200);
        }

        function downloadCSVTemplate() {
            SoundManager.playClick();
            
            // Enhanced customer template with Excel-compatible format
            const excelContent = `sep=,
First Name,Last Name,Email,Phone,Address,City,State,Zip Code,Country,Customer Tags,Notification Preferences,Order Count,Total Spent,Last Order Date,Notes,Date Added
John,Smith,john.smith@email.com,+1-555-0123,"123 Main St","New York","NY","10001","USA","VIP,Priority","email,sms",5,$249.99,"2024-01-15","Prefers morning deliveries","2024-01-01"
Sarah,Johnson,sarah.j@email.com,+1-555-0124,"456 Oak Ave","Los Angeles","CA","90210","USA","Frequent Buyer","email",3,$189.50,"2024-01-14","Regular customer since 2023","2024-01-02"
Mike,Wilson,mike.w@email.com,+1-555-0125,"789 Pine Rd","Chicago","IL","60601","USA","Priority Support","email,sms,whatsapp",8,$599.99,"2024-01-16","Corporate account manager","2024-01-03"
Emily,Davis,emily.d@email.com,+1-555-0126,"321 Elm St","Houston","TX","77001","USA","","sms",2,$89.99,"2024-01-13","Prefers SMS only","2024-01-04"
Chris,Brown,chris.b@email.com,+1-555-0127,"654 Maple Dr","Phoenix","AZ","85001","USA","VIP,High Volume","email,sms",12,$1299.99,"2024-01-17","Bulk order customer","2024-01-05"
,,,,,,,,,,,,,,,"",""
,,,,,,,,,,,,,,,"*** INSTRUCTIONS ***",""
,,,,,,,,,,,,,,,"1. Edit this template in Excel or Google Sheets",""
,,,,,,,,,,,,,,,"2. Fill in your customer data (rows 3-7 are examples)",""
,,,,,,,,,,,,,,,"3. Required fields: First Name, Last Name, Email",""
,,,,,,,,,,,,,,,"4. Save as CSV when ready to upload",""
,,,,,,,,,,,,,,,"5. In Excel: File > Save As > CSV (Comma delimited)",""
,,,,,,,,,,,,,,,"6. In Google Sheets: File > Download > CSV",""`;

            // Create and download file as Excel-compatible CSV
            const blob = new Blob([excelContent], { type: 'application/vnd.ms-excel' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'nerva_customer_template.xlsx.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            createNotification('üìä Excel Template Downloaded', 'Customer import template downloaded!\n\n‚úÖ Excel-compatible format (.xlsx.csv)\n‚úÖ Opens directly in Excel or Google Sheets\n‚úÖ Complete sample data included\n‚úÖ Built-in instructions\n\nüìù Edit in Excel, then Save As ‚Üí CSV for upload', 'success');
        }

        // Dedicated template download for API CSV section  
        function downloadCustomerCSVTemplate() {
            SoundManager.playClick();
            
            // Comprehensive customer template for API connections - Excel compatible
            const excelContent = `sep=,
First Name,Last Name,Email,Phone,Street Address,City,State,Zip Code,Country,Customer Tags,Email Notifications,SMS Notifications,WhatsApp Notifications,Notes,Customer ID,Date Added
John,Smith,john.smith@email.com,+1-555-0123,"123 Main Street","New York","NY","10001","US","VIP,Priority Customer","Yes","Yes","No","Prefers morning deliveries, corporate account","CUST-001","2024-01-15"
Sarah,Johnson,sarah.johnson@email.com,+1-555-0124,"456 Oak Avenue","Los Angeles","CA","90210","US","Frequent Buyer","Yes","No","No","Regular customer since 2023","CUST-002","2024-01-14"
Mike,Wilson,mike.wilson@email.com,+1-555-0125,"789 Pine Road","Chicago","IL","60601","US","Priority Support,Enterprise","Yes","Yes","Yes","Corporate account manager","CUST-003","2024-01-16"
Emily,Davis,emily.davis@email.com,+1-555-0126,"321 Elm Street","Houston","TX","77001","US","New Customer","No","Yes","No","Prefers SMS notifications only","CUST-004","2024-01-13"
Chris,Brown,chris.brown@email.com,+1-555-0127,"654 Maple Drive","Phoenix","AZ","85001","US","VIP,High Volume,Wholesale","Yes","Yes","Yes","Bulk order customer, special rates","CUST-005","2024-01-17"
Linda,Garcia,linda.garcia@email.com,+1-555-0128,"987 Cedar Lane","Miami","FL","33101","US","International","Yes","No","Yes","Ships internationally, Spanish preferred","CUST-006","2024-01-18"
,,,,,,,,,,,,,,,"",""
,,,,,,,,,,,,,,,"*** EXCEL TEMPLATE INSTRUCTIONS ***",""
,,,,,,,,,,,,,,,"1. This template opens directly in Excel",""
,,,,,,,,,,,,,,,"2. Edit customer data in rows 3-8 (examples provided)",""
,,,,,,,,,,,,,,,"3. Add as many customer rows as needed",""
,,,,,,,,,,,,,,,"4. Required fields: First Name, Last Name, Email",""
,,,,,,,,,,,,,,,"5. Notification options: Yes or No",""
,,,,,,,,,,,,,,,"6. Tags: Separate with commas (VIP, Frequent Buyer)",""
,,,,,,,,,,,,,,,"7. Country codes: US, CA, GB, AU, DE, FR, etc.",""
,,,,,,,,,,,,,,,"8. When ready: File > Save As > CSV (Comma delimited)",""
,,,,,,,,,,,,,,,"9. Upload the saved CSV file to complete import",""`;

            // Create and download file as Excel-compatible
            const blob = new Blob([excelContent], { type: 'application/vnd.ms-excel' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'nerva_api_customer_template.xlsx.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            createNotification('üìä Excel Customer Template Downloaded', 'Professional customer import template downloaded!\n\n‚úÖ Excel-compatible format (.xlsx.csv)\n‚úÖ Opens directly in Microsoft Excel\n‚úÖ Complete field mapping for bulk imports\n‚úÖ Step-by-step instructions included\n\nüìù Edit in Excel ‚Üí Save As CSV ‚Üí Upload', 'success');
        }

        // Template dropdown functions
        function showTemplateOptions() {
            SoundManager.playClick();
            const dropdown = document.getElementById('templateDropdown');
            if (dropdown) {
                dropdown.classList.remove('hidden');
            }
        }

        function hideTemplateOptions() {
            const dropdown = document.getElementById('templateDropdown');
            if (dropdown) {
                dropdown.classList.add('hidden');
            }
        }

        // Hide dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('templateDropdown');
            const button = e.target.closest('[onclick="showTemplateOptions()"]');
            
            if (dropdown && !button && !dropdown.contains(e.target)) {
                dropdown.classList.add('hidden');
            }
        });

        // API CSV Functions
        function downloadAPICSVTemplate() {
            SoundManager.playClick();
            
            // Create API Excel template content for order data
            const excelContent = `sep=,
Order ID,Customer Name,Customer Email,Order Date,Ship Date,Tracking Number,Carrier,Origin,Destination,Status,Total Amount,Item Count,Weight,Dimensions,Service Type,Weather Sensitive
ORD-2024-001,John Smith,john.smith@email.com,2024-01-15,2024-01-16,123456789012,FedEx,"Hong Kong","Los Angeles CA",In Transit,$249.99,2,5.2 lbs,"12x8x6 in",International Priority,Yes
ORD-2024-002,Sarah Johnson,sarah.j@email.com,2024-01-14,2024-01-15,1Z999AA1234567890,UPS,"Atlanta GA","New York NY",Delivered,$189.50,1,3.8 lbs,"10x8x4 in",Next Day Air,No
ORD-2024-003,Mike Wilson,mike.w@email.com,2024-01-16,2024-01-17,987654321098,FedEx,"Shanghai China","Chicago IL",Weather Delay,$599.99,3,8.1 lbs,"16x12x8 in",International Priority,Yes
ORD-2024-004,Emily Davis,emily.d@email.com,2024-01-13,2024-01-14,1234567890,DHL,"Cincinnati OH","Berlin Germany",Delivered,$89.99,1,2.1 lbs,"8x6x4 in",Express Worldwide,No
ORD-2024-005,Chris Brown,chris.b@email.com,2024-01-17,2024-01-18,999888777666,FedEx,"Memphis TN","Phoenix AZ",Processing,$299.99,2,4.5 lbs,"14x10x6 in",Ground,Yes
,,,,,,,,,,,,,,,"",""
,,,,,,,,,,,,,,,"*** ORDER DATA TEMPLATE INSTRUCTIONS ***",""
,,,,,,,,,,,,,,,"1. This template opens directly in Excel",""
,,,,,,,,,,,,,,,"2. Edit order data in rows 3-7 (examples provided)",""
,,,,,,,,,,,,,,,"3. Add as many order rows as needed",""
,,,,,,,,,,,,,,,"4. Required fields: Order ID, Customer Name, Customer Email",""
,,,,,,,,,,,,,,,"5. Date format: YYYY-MM-DD (2024-01-15)",""
,,,,,,,,,,,,,,,"6. Carriers: FedEx, UPS, DHL, USPS, etc.",""
,,,,,,,,,,,,,,,"7. Weather Sensitive: Yes or No",""
,,,,,,,,,,,,,,,"8. When ready: File > Save As > CSV (Comma delimited)",""
,,,,,,,,,,,,,,,"9. Upload the saved CSV file to complete import",""`;

            // Create and download file as Excel-compatible
            const blob = new Blob([excelContent], { type: 'application/vnd.ms-excel' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'nerva_order_data_template.xlsx.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            createNotification('üìä Excel Order Template Downloaded', 'Order data template downloaded!\n\n‚úÖ Excel-compatible format (.xlsx.csv)\n‚úÖ Opens directly in Microsoft Excel\n‚úÖ Compatible with Shopify, WooCommerce, Amazon\n‚úÖ Complete sample data included\n\nüìù Edit in Excel ‚Üí Save As CSV ‚Üí Upload', 'success');
        }

        function showAPIUploadHistory() {
            SoundManager.playClick();
            
            // Create upload history modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[80vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-2xl font-bold text-gray-800">üìã CSV Upload History</h2>
                            <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div class="space-y-4">
                            <div class="border rounded-lg p-4 bg-green-50">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h4 class="font-semibold text-green-800">order_data_jan_2024.csv</h4>
                                        <p class="text-sm text-green-600">January 17, 2024 at 2:45 PM</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">SUCCESS</span>
                                </div>
                                <div class="grid grid-cols-3 gap-4 text-sm">
                                    <div><strong>Rows:</strong> 1,247</div>
                                    <div><strong>Processed:</strong> 1,240</div>
                                    <div><strong>Errors:</strong> 7</div>
                                </div>
                            </div>
                            
                            <div class="border rounded-lg p-4 bg-blue-50">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h4 class="font-semibold text-blue-800">customer_export_dec_2023.xlsx</h4>
                                        <p class="text-sm text-blue-600">December 28, 2023 at 4:30 PM</p>
                                    </div>
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">SUCCESS</span>
                                </div>
                                <div class="grid grid-cols-3 gap-4 text-sm">
                                    <div><strong>Rows:</strong> 892</div>
                                    <div><strong>Processed:</strong> 892</div>
                                    <div><strong>Errors:</strong> 0</div>
                                </div>
                            </div>
                            
                            <div class="border rounded-lg p-4 bg-yellow-50">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h4 class="font-semibold text-yellow-800">order_backup_nov_2023.csv</h4>
                                        <p class="text-sm text-yellow-600">November 15, 2023 at 11:20 AM</p>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">PARTIAL</span>
                                </div>
                                <div class="grid grid-cols-3 gap-4 text-sm">
                                    <div><strong>Rows:</strong> 2,156</div>
                                    <div><strong>Processed:</strong> 1,998</div>
                                    <div><strong>Errors:</strong> 158</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6 flex space-x-3">
                            <button onclick="exportUploadReport()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm">
                                üìä Export Report
                            </button>
                            <button onclick="clearUploadHistory()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 text-sm">
                                üóëÔ∏è Clear History
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function exportOrdersCSV() {
            SoundManager.playClick();
            
            // Get export parameters
            const exportType = document.getElementById('exportType').value;
            const startDate = document.getElementById('exportStartDate').value;
            const endDate = document.getElementById('exportEndDate').value;
            
            // Simulate CSV generation
            let csvContent = '';
            let filename = '';
            
            switch(exportType) {
                case 'all-orders':
                    csvContent = `Order ID,Customer,Date,Status,Total,Carrier,Tracking\nORD-001,John Smith,2024-01-15,Delivered,$249.99,FedEx,123456789\nORD-002,Sarah Johnson,2024-01-14,In Transit,$189.50,UPS,1Z999AA123`;
                    filename = 'all_orders_export.csv';
                    break;
                case 'weather-delays':
                    csvContent = `Order ID,Customer,Delay Start,Delay End,Reason,Recovery Action\nORD-003,Mike Wilson,2024-01-16 14:00,2024-01-17 09:00,Severe Storm Memphis,Rerouted via Atlanta`;
                    filename = 'weather_delays_export.csv';
                    break;
                case 'customer-alerts':
                    csvContent = `Alert ID,Customer,Type,Sent Date,Channel,Status\nALT-001,John Smith,Weather Delay,2024-01-16 10:30,Email,Delivered\nALT-002,Mike Wilson,Delivery Update,2024-01-17 09:15,SMS,Delivered`;
                    filename = 'customer_alerts_export.csv';
                    break;
                default:
                    csvContent = 'No data available for selected export type';
                    filename = 'export.csv';
            }
            
            // Create and download file
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            createNotification('üìä Export Complete', `${exportType.replace('-', ' ').toUpperCase()} data exported successfully!\n\nüìÖ Date range: ${startDate || 'All'} to ${endDate || 'All'}\nüìÅ File: ${filename}\n‚úÖ Ready for analysis`, 'success');
        }

        function exportOrdersExcel() {
            SoundManager.playClick();
            createNotification('üìà Excel Export', 'Excel export feature coming soon!\n\nüìä Advanced formatting and charts\nüìã Multiple worksheets\nüìà Built-in analytics\n\nCurrently available: CSV export', 'info');
        }

        // Setup API CSV drag and drop functionality
        function setupAPICSVUpload() {
            const dropZone = document.getElementById('apiCsvDropZone');
            const fileInput = document.getElementById('apiCsvFileInput');
            
            if (!dropZone || !fileInput) return;
            
            // Click to browse
            dropZone.addEventListener('click', () => fileInput.click());
            
            // Drag and drop events
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('border-blue-500', 'bg-blue-100');
            });
            
            dropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                dropZone.classList.remove('border-blue-500', 'bg-blue-100');
            });
            
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('border-blue-500', 'bg-blue-100');
                handleAPICSVFiles(e.dataTransfer.files);
            });
            
            fileInput.addEventListener('change', (e) => {
                handleAPICSVFiles(e.target.files);
            });
        }

        function handleAPICSVFiles(files) {
            if (files.length === 0) return;
            
            SoundManager.playClick();
            
            // Show progress
            const progressContainer = document.getElementById('apiUploadProgress');
            const progressBar = document.getElementById('apiProgressBar');
            const progressPercent = document.getElementById('apiProgressPercent');
            
            progressContainer.classList.remove('hidden');
            
            // Simulate file processing
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    
                    // Update statistics
                    document.getElementById('csvProcessedCount').textContent = files.length;
                    document.getElementById('csvImportedOrders').textContent = Math.floor(Math.random() * 500) + 100;
                    document.getElementById('csvErrorCount').textContent = Math.floor(Math.random() * 10);
                    
                    setTimeout(() => {
                        progressContainer.classList.add('hidden');
                        SoundManager.playSuccess();
                        createNotification('üì§ Upload Complete', `‚úÖ ${files.length} file(s) processed successfully\nüìä Order data imported and validated\nüîÑ API connections updated\n‚úÖ Ready for customer notifications`, 'success');
                    }, 500);
                }
                
                progressBar.style.width = progress + '%';
                progressPercent.textContent = Math.round(progress) + '%';
            }, 200);
        }

        // API Validation Functions
        function validateShopifyUrl(input) {
            const value = input.value.trim();
            if (value && !value.includes('.myshopify.com')) {
                if (value.match(/^[a-zA-Z0-9-]+$/)) {
                    input.value = value + '.myshopify.com';
                    input.style.borderColor = '#10B981';
                    createNotification('‚úÖ URL Auto-Corrected', `Updated to: ${input.value}\n\nShopify URLs must end with .myshopify.com`, 'success');
                } else {
                    input.style.borderColor = '#EF4444';
                    createNotification('‚ùå Invalid URL Format', 'Shopify URLs should be:\nyour-store.myshopify.com\n\nPlease check and try again.', 'error');
                }
            } else if (value.includes('.myshopify.com')) {
                input.style.borderColor = '#10B981';
            }
        }

        function validateShopifyApiKey(input) {
            const value = input.value.trim();
            if (value) {
                if (value.startsWith('shpat_') && value.length >= 32) {
                    input.style.borderColor = '#10B981';
                    createNotification('‚úÖ Valid API Key Format', 'Shopify API key format verified!\n\nClick "Test Connection" to validate credentials.', 'success');
                } else {
                    input.style.borderColor = '#EF4444';
                    createNotification('‚ùå Invalid API Key Format', 'Shopify API keys should:\n‚Ä¢ Start with "shpat_"\n‚Ä¢ Be at least 32 characters long\n\nPlease check your Shopify admin.', 'error');
                }
            }
        }

        function validateWooUrl(input) {
            const value = input.value.trim();
            if (value) {
                if (value.match(/^https?:\/\/.+/)) {
                    input.style.borderColor = '#10B981';
                    createNotification('‚úÖ Valid Website URL', 'Website URL format verified!\n\nMake sure WooCommerce is installed and API is enabled.', 'success');
                } else {
                    input.style.borderColor = '#EF4444';
                    createNotification('‚ùå Invalid URL Format', 'Website URLs should include:\n‚Ä¢ https:// or http://\n‚Ä¢ Your domain name\n\nExample: https://yourstore.com', 'error');
                }
            }
        }

        function validateWooSecret(input) {
            const value = input.value.trim();
            if (value) {
                if (value.startsWith('cs_') && value.length >= 40) {
                    input.style.borderColor = '#10B981';
                    createNotification('‚úÖ Valid Consumer Secret', 'WooCommerce consumer secret format verified!\n\nClick "Test Connection" to validate credentials.', 'success');
                } else {
                    input.style.borderColor = '#EF4444';
                    createNotification('‚ùå Invalid Consumer Secret', 'WooCommerce consumer secrets should:\n‚Ä¢ Start with "cs_"\n‚Ä¢ Be at least 40 characters long\n\nGenerate from WooCommerce > Settings > Advanced > REST API', 'error');
                }
            }
        }

        function validateAmazonSellerId(input) {
            const value = input.value.trim();
            if (value) {
                if (value.match(/^A[A-Z0-9]{13}$/)) {
                    input.style.borderColor = '#10B981';
                    createNotification('‚úÖ Valid Seller ID', 'Amazon Seller ID format verified!\n\nClick "Test Connection" to validate credentials.', 'success');
                } else {
                    input.style.borderColor = '#EF4444';
                    createNotification('‚ùå Invalid Seller ID Format', 'Amazon Seller IDs should:\n‚Ä¢ Start with "A"\n‚Ä¢ Be exactly 14 characters\n‚Ä¢ Contain only letters and numbers\n\nFind in Seller Central > Settings > Account Info', 'error');
                }
            }
        }

        function validateAmazonToken(input) {
            const value = input.value.trim();
            if (value) {
                if (value.startsWith('amzn.mws.') && value.length >= 50) {
                    input.style.borderColor = '#10B981';
                    createNotification('‚úÖ Valid MWS Token', 'Amazon MWS Auth Token format verified!\n\nClick "Test Connection" to validate credentials.', 'success');
                } else {
                    input.style.borderColor = '#EF4444';
                    createNotification('‚ùå Invalid MWS Token', 'Amazon MWS Auth Tokens should:\n‚Ä¢ Start with "amzn.mws."\n‚Ä¢ Be at least 50 characters long\n\nGenerate from Seller Central > User Permissions', 'error');
                }
            }
        }

        // Tutorial Functions
        function showShopifyTutorial() {
            SoundManager.playClick();
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-2xl font-bold text-gray-800">üì∫ Shopify Integration Tutorial</h2>
                            <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <!-- Video Placeholder -->
                        <div class="bg-gray-900 rounded-lg mb-6 aspect-video flex items-center justify-center">
                            <div class="text-center text-white">
                                <div class="text-6xl mb-4">üì∫</div>
                                <h3 class="text-2xl font-bold mb-2">Shopify API Setup Video</h3>
                                <p class="text-gray-300 mb-4">Step-by-step guide to generating API credentials</p>
                                <button onclick="playShopifyVideo()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center mx-auto">
                                    ‚ñ∂Ô∏è Play Tutorial (3:45)
                                </button>
                            </div>
                        </div>
                        
                        <!-- Step-by-step Guide -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-bold text-gray-800 mb-3">üîë Getting Your API Credentials</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-start">
                                        <span class="bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">1</span>
                                        <p>Log into your Shopify Admin panel</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">2</span>
                                        <p>Go to Apps > Private Apps (or App Management)</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">3</span>
                                        <p>Click "Create new private app"</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">4</span>
                                        <p>Enter app name: "NaviFlow E-Commerce Shield"</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">5</span>
                                        <p>Configure API permissions (see permissions tab)</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">6</span>
                                        <p>Save and copy the API key</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="font-bold text-gray-800 mb-3">‚ö° Quick Setup Tips</h4>
                                <div class="space-y-3 text-sm">
                                    <div class="bg-blue-50 p-3 rounded">
                                        <strong>‚úÖ Store URL Format:</strong><br>
                                        Use: your-store.myshopify.com<br>
                                        Not: your-store.com
                                    </div>
                                    <div class="bg-green-50 p-3 rounded">
                                        <strong>üîë API Key Security:</strong><br>
                                        Never share your API key<br>
                                        Starts with "shpat_"
                                    </div>
                                    <div class="bg-yellow-50 p-3 rounded">
                                        <strong>‚ö†Ô∏è Common Issues:</strong><br>
                                        ‚Ä¢ Wrong URL format<br>
                                        ‚Ä¢ Insufficient permissions<br>
                                        ‚Ä¢ Expired API key
                                    </div>
                                    <div class="bg-purple-50 p-3 rounded">
                                        <strong>üéØ Need Help?</strong><br>
                                        Click "Need Help?" for live chat<br>
                                        Our experts are standing by!
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function showWooCommerceTutorial() {
            SoundManager.playClick();
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-2xl font-bold text-gray-800">üì∫ WooCommerce Integration Tutorial</h2>
                            <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <!-- Video Placeholder -->
                        <div class="bg-blue-900 rounded-lg mb-6 aspect-video flex items-center justify-center">
                            <div class="text-center text-white">
                                <div class="text-6xl mb-4">üì∫</div>
                                <h3 class="text-2xl font-bold mb-2">WooCommerce REST API Setup</h3>
                                <p class="text-gray-300 mb-4">Configure API access for your WordPress store</p>
                                <button onclick="playWooCommerceVideo()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center mx-auto">
                                    ‚ñ∂Ô∏è Play Tutorial (4:12)
                                </button>
                            </div>
                        </div>
                        
                        <!-- Step-by-step Guide -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-bold text-gray-800 mb-3">üîë WooCommerce API Setup</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-start">
                                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">1</span>
                                        <p>Log into WordPress Admin</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">2</span>
                                        <p>Go to WooCommerce > Settings</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">3</span>
                                        <p>Click "Advanced" tab > "REST API"</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">4</span>
                                        <p>Click "Add Key"</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">5</span>
                                        <p>Description: "NaviFlow Integration"</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">6</span>
                                        <p>Permissions: Read/Write</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">7</span>
                                        <p>Generate and copy Consumer Secret</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="font-bold text-gray-800 mb-3">‚ö° WordPress Requirements</h4>
                                <div class="space-y-3 text-sm">
                                    <div class="bg-blue-50 p-3 rounded">
                                        <strong>‚úÖ Required Plugins:</strong><br>
                                        ‚Ä¢ WooCommerce (latest version)<br>
                                        ‚Ä¢ WordPress 5.0+
                                    </div>
                                    <div class="bg-green-50 p-3 rounded">
                                        <strong>üîë API Format:</strong><br>
                                        Consumer Secret starts with "cs_"<br>
                                        At least 40 characters long
                                    </div>
                                    <div class="bg-yellow-50 p-3 rounded">
                                        <strong>‚ö†Ô∏è Permissions Needed:</strong><br>
                                        ‚Ä¢ Read/Write Orders<br>
                                        ‚Ä¢ Read/Write Customers<br>
                                        ‚Ä¢ Read Products
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function showAmazonTutorial() {
            SoundManager.playClick();
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-2xl font-bold text-gray-800">üì∫ Amazon Seller Central Integration</h2>
                            <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <!-- Video Placeholder -->
                        <div class="bg-orange-900 rounded-lg mb-6 aspect-video flex items-center justify-center">
                            <div class="text-center text-white">
                                <div class="text-6xl mb-4">üì∫</div>
                                <h3 class="text-2xl font-bold mb-2">Amazon MWS API Setup</h3>
                                <p class="text-gray-300 mb-4">Protect your seller metrics with API integration</p>
                                <button onclick="playAmazonVideo()" class="bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg flex items-center mx-auto">
                                    ‚ñ∂Ô∏è Play Tutorial (5:30)
                                </button>
                            </div>
                        </div>
                        
                        <!-- Step-by-step Guide -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-bold text-gray-800 mb-3">üîë Amazon API Credentials</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-start">
                                        <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">1</span>
                                        <p>Log into Amazon Seller Central</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">2</span>
                                        <p>Go to Settings > User Permissions</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">3</span>
                                        <p>Click "Visit Manage Your Apps"</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">4</span>
                                        <p>Authorize "NaviFlow E-Commerce Shield"</p>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs mr-2 mt-0.5">5</span>
                                        <p>Copy Seller ID and MWS Auth Token</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="font-bold text-gray-800 mb-3">‚ö° Amazon Requirements</h4>
                                <div class="space-y-3 text-sm">
                                    <div class="bg-orange-50 p-3 rounded">
                                        <strong>‚úÖ Account Requirements:</strong><br>
                                        ‚Ä¢ Professional Seller Account<br>
                                        ‚Ä¢ Active seller status
                                    </div>
                                    <div class="bg-green-50 p-3 rounded">
                                        <strong>üîë Credential Format:</strong><br>
                                        Seller ID: A + 13 characters<br>
                                        MWS Token: amzn.mws...
                                    </div>
                                    <div class="bg-yellow-50 p-3 rounded">
                                        <strong>üõ°Ô∏è Seller Protection:</strong><br>
                                        ‚Ä¢ Automated weather alerts<br>
                                        ‚Ä¢ Performance metric protection<br>
                                        ‚Ä¢ Dispute documentation
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Permission Template Generation
        function generateShopifyPermissions() {
            SoundManager.playClick();
            
            const permissionsText = `SHOPIFY PRIVATE APP PERMISSIONS TEMPLATE
=============================================

üìã Copy these permissions when creating your Shopify private app:

ADMIN API PERMISSIONS:
‚Ä¢ Orders: Read and write
‚Ä¢ Customers: Read and write  
‚Ä¢ Products: Read access
‚Ä¢ Inventory: Read access
‚Ä¢ Fulfillments: Read and write
‚Ä¢ Shipping: Read access
‚Ä¢ Webhooks: Write access

STOREFRONT API PERMISSIONS:
‚Ä¢ Read products, variants, and collections
‚Ä¢ Read customer tags
‚Ä¢ Read and modify checkouts

WEBHOOK ENDPOINTS:
‚Ä¢ Order creation: https://api.nerva.com/webhooks/shopify/order/created
‚Ä¢ Order updated: https://api.nerva.com/webhooks/shopify/order/updated
‚Ä¢ Order fulfilled: https://api.nerva.com/webhooks/shopify/order/fulfilled

üìß EMAIL NOTIFICATIONS:
‚Ä¢ Send to: your-email@domain.com
‚Ä¢ Include order details and tracking info

üîí SECURITY NOTES:
‚Ä¢ Enable API rate limiting
‚Ä¢ Use HTTPS only
‚Ä¢ Monitor API usage
‚Ä¢ Rotate keys every 90 days`;

            navigator.clipboard.writeText(permissionsText).then(() => {
                createNotification('üìã Permissions Copied!', 'Shopify permissions template copied to clipboard!\n\n‚úÖ Paste in Shopify Admin > Apps > Private Apps\n‚úÖ Set exact permissions as listed\n‚úÖ Save and generate API key\n\nNeed help? Click "Need Help?" button!', 'success');
            });
        }

        function generateWooCommercePermissions() {
            SoundManager.playClick();
            
            const permissionsText = `WOOCOMMERCE REST API PERMISSIONS TEMPLATE
==========================================

üìã Copy these settings when creating your WooCommerce API key:

REST API KEY SETTINGS:
‚Ä¢ Description: NaviFlow E-Commerce Shield
‚Ä¢ User: Administrator account
‚Ä¢ Permissions: Read/Write

REQUIRED ENDPOINTS ACCESS:
‚Ä¢ /wp-json/wc/v3/orders (Read/Write)
‚Ä¢ /wp-json/wc/v3/customers (Read/Write)
‚Ä¢ /wp-json/wc/v3/products (Read)
‚Ä¢ /wp-json/wc/v3/shipping (Read)
‚Ä¢ /wp-json/wc/v3/webhooks (Write)

WEBHOOK CONFIGURATION:
‚Ä¢ Order created: https://api.nerva.com/webhooks/woocommerce/order/created
‚Ä¢ Order completed: https://api.nerva.com/webhooks/woocommerce/order/completed
‚Ä¢ Order status changed: https://api.nerva.com/webhooks/woocommerce/order/updated

PLUGIN REQUIREMENTS:
‚Ä¢ WooCommerce 5.0+ (latest recommended)
‚Ä¢ WordPress 5.8+
‚Ä¢ SSL certificate (HTTPS)
‚Ä¢ Permalinks enabled

üîí SECURITY CHECKLIST:
‚Ä¢ Limit API key to specific IP ranges if possible
‚Ä¢ Enable two-factor authentication
‚Ä¢ Regular security updates
‚Ä¢ Monitor API usage logs`;

            navigator.clipboard.writeText(permissionsText).then(() => {
                createNotification('üìã Permissions Copied!', 'WooCommerce permissions template copied!\n\n‚úÖ Paste in WooCommerce > Settings > Advanced > REST API\n‚úÖ Configure as listed above\n‚úÖ Generate Consumer Key/Secret\n\nNeed help? Click "Need Help?" button!', 'success');
            });
        }

        function generateAmazonPermissions() {
            SoundManager.playClick();
            
            const permissionsText = `AMAZON SELLER CENTRAL MWS PERMISSIONS
====================================

üìã Required permissions for NaviFlow E-Commerce Shield:

MARKETPLACE WEB SERVICE (MWS) ACCESS:
‚Ä¢ Orders API: Full access
‚Ä¢ Reports API: Full access
‚Ä¢ Fulfillment API: Full access
‚Ä¢ Merchant Fulfillment API: Full access
‚Ä¢ Recommendations API: Read access

SELLER CENTRAL PERMISSIONS:
‚Ä¢ View order details
‚Ä¢ Access shipping information
‚Ä¢ Generate shipping labels
‚Ä¢ Access performance metrics
‚Ä¢ View customer messages

APPLICATION INFORMATION:
‚Ä¢ Application Name: NaviFlow E-Commerce Shield
‚Ä¢ Contact Email: support@nerva.com
‚Ä¢ Use Case: Weather-based shipping alerts and customer notifications
‚Ä¢ Data Usage: Order tracking, weather impact analysis, customer alerts

DEVELOPER INFORMATION:
‚Ä¢ Developer Name: NaviFlow Supply Chain Intelligence
‚Ä¢ Website: https://nerva.com
‚Ä¢ Support: support@nerva.com

üõ°Ô∏è SELLER PROTECTION FEATURES:
‚Ä¢ Automated weather delay notifications
‚Ä¢ Performance metric protection
‚Ä¢ Dispute documentation generation
‚Ä¢ Customer service automation
‚Ä¢ Review protection strategies

üîí SECURITY & COMPLIANCE:
‚Ä¢ PCI DSS compliant data handling
‚Ä¢ GDPR compliant customer data processing
‚Ä¢ SOC 2 Type II security standards
‚Ä¢ 256-bit SSL encryption`;

            navigator.clipboard.writeText(permissionsText).then(() => {
                createNotification('üìã Permissions Copied!', 'Amazon MWS permissions template copied!\n\n‚úÖ Paste in Seller Central > User Permissions\n‚úÖ Set permissions as listed\n‚úÖ Generate MWS Auth Token\n\nNeed help? Click "Need Help?" button!', 'success');
            });
        }

        // ===== LIVE CHAT SYSTEM =====
        class LiveChatWidget {
            constructor() {
                this.ws = null;
                this.isConnected = false;
                this.isTyping = false;
                this.messages = [];
                this.widget = null;
                this.userInfo = this.getUserInfo();
                this.init();
            }
            
            init() {
                this.createWidget();
                this.connectToServer();
                this.startProactiveChat();
            }
            
            getUserInfo() {
                const email = localStorage.getItem('userEmail') || 'demo@naviflow.com';
                const loginType = localStorage.getItem('userLoggedIn') || 'demo';
                return {
                    name: email.split('@')[0] || 'Demo User',
                    email: email,
                    userType: loginType
                };
            }
            
            connectToServer() {
                try {
                    this.ws = new WebSocket('ws://localhost:3001');
                    
                    this.ws.onopen = () => {
                        console.log('üîó Connected to live chat server');
                        this.isConnected = true;
                        this.updateConnectionStatus(true);
                        
                        // Register with server
                        this.ws.send(JSON.stringify({
                            type: 'register',
                            name: this.userInfo.name,
                            email: this.userInfo.email
                        }));
                    };
                    
                    this.ws.onmessage = (event) => {
                        const data = JSON.parse(event.data);
                        this.handleMessage(data);
                    };
                    
                    this.ws.onclose = () => {
                        console.log('‚ùå Disconnected from live chat server');
                        this.isConnected = false;
                        this.updateConnectionStatus(false);
                        
                        // Attempt to reconnect after 5 seconds
                        setTimeout(() => {
                            this.connectToServer();
                        }, 5000);
                    };
                    
                    this.ws.onerror = (error) => {
                        console.error('‚ùå WebSocket error:', error);
                        this.isConnected = false;
                        this.updateConnectionStatus(false);
                    };
                } catch (error) {
                    console.error('‚ùå Failed to connect to chat server:', error);
                    this.showOfflineMessage();
                }
            }
            
            handleMessage(data) {
                switch(data.type) {
                    case 'registered':
                        this.showMessage('system', 'Connected to NaviFlow support. How can I help you today?');
                        break;
                    case 'message':
                        this.showMessage(data.isAdmin ? 'admin' : 'user', data.content, data.sender);
                        SoundManager.playNotification();
                        break;
                    case 'typing':
                        this.showTypingIndicator(data.isTyping, data.sender);
                        break;
                }
            }
            
            createWidget() {
                // Create chat widget HTML
                const widgetHTML = `
                    <div id="liveChatWidget" class="fixed bottom-4 right-4 z-50">
                        <!-- Chat Toggle Button -->
                        <button id="chatToggle" class="bg-green-600 hover:bg-green-700 text-white w-16 h-16 rounded-full shadow-xl flex items-center justify-center transition-all transform hover:scale-110 animate-pulse">
                            <span class="text-3xl">üí¨</span>
                            <div class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center animate-bounce">
                                <span class="text-xs text-white font-bold">!</span>
                            </div>
                        </button>
                        
                        <!-- Chat Available Banner -->
                        <div id="chatBanner" class="absolute bottom-20 right-0 bg-green-600 text-white px-3 py-1 rounded-l-lg shadow-lg transform transition-all duration-300 animate-slide-in">
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-green-300 rounded-full animate-pulse"></div>
                                <span class="text-xs font-semibold">Live Chat</span>
                            </div>
                        </div>
                        
                        <!-- Chat Window -->
                        <div id="chatWindow" class="hidden absolute bottom-16 right-0 w-80 bg-white rounded-lg shadow-2xl border border-gray-200">
                            <!-- Header -->
                            <div class="bg-green-600 text-white p-4 rounded-t-lg">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                            <span class="text-sm font-bold">T</span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold">Tino - NaviFlow Support</h4>
                                            <p id="connectionStatus" class="text-xs text-green-200">Connecting...</p>
                                        </div>
                                    </div>
                                    <button id="chatClose" class="text-white hover:text-gray-200 text-xl">&times;</button>
                                </div>
                            </div>
                            
                            <!-- Messages Area -->
                            <div id="chatMessages" class="h-64 overflow-y-auto p-4 space-y-3 bg-gray-50">
                                <div class="text-center text-gray-500 text-sm">
                                    Connecting to live support...
                                </div>
                            </div>
                            
                            <!-- Typing Indicator -->
                            <div id="typingIndicator" class="hidden px-4 py-2 text-sm text-gray-500 bg-gray-50">
                                <span class="animate-pulse">Tino is typing...</span>
                            </div>
                            
                            <!-- Input Area -->
                            <div class="p-4 border-t border-gray-200 bg-white rounded-b-lg">
                                <div class="flex items-center space-x-2">
                                    <input
                                        type="text"
                                        id="chatInput"
                                        placeholder="Type your message..."
                                        class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-green-500"
                                        disabled
                                    >
                                    <button
                                        id="chatSend"
                                        class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"
                                        disabled
                                    >
                                        Send
                                    </button>
                                </div>
                                <div class="text-xs text-gray-500 mt-2">
                                    Press Enter to send ‚Ä¢ Live support with Tino
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.insertAdjacentHTML('beforeend', widgetHTML);
                this.widget = document.getElementById('liveChatWidget');
                this.setupEventListeners();
            }
            
            setupEventListeners() {
                // Toggle chat window
                document.getElementById('chatToggle').addEventListener('click', () => {
                    this.toggleChat();
                });
                
                // Close chat window
                document.getElementById('chatClose').addEventListener('click', () => {
                    this.closeChat();
                });
                
                // Send message
                document.getElementById('chatSend').addEventListener('click', () => {
                    this.sendMessage();
                });
                
                // Enter key to send
                document.getElementById('chatInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.sendMessage();
                    }
                });
                
                // Typing indicator
                document.getElementById('chatInput').addEventListener('input', () => {
                    this.handleTyping();
                });
                
                // Banner click to open chat
                document.getElementById('chatBanner').addEventListener('click', () => {
                    this.toggleChat();
                });
            }
            
            toggleChat() {
                const chatWindow = document.getElementById('chatWindow');
                const chatToggle = document.getElementById('chatToggle');
                
                if (chatWindow.classList.contains('hidden')) {
                    chatWindow.classList.remove('hidden');
                    chatToggle.classList.add('bg-gray-600');
                    chatToggle.classList.remove('bg-green-600');
                    document.getElementById('chatInput').focus();
                } else {
                    this.closeChat();
                }
            }
            
            closeChat() {
                document.getElementById('chatWindow').classList.add('hidden');
                const chatToggle = document.getElementById('chatToggle');
                chatToggle.classList.add('bg-green-600');
                chatToggle.classList.remove('bg-gray-600');
            }
            
            sendMessage() {
                const input = document.getElementById('chatInput');
                const message = input.value.trim();
                
                if (message && this.isConnected) {
                    // Show message immediately
                    this.showMessage('user', message, this.userInfo.name);
                    
                    // Send to server
                    this.ws.send(JSON.stringify({
                        type: 'message',
                        content: message
                    }));
                    
                    input.value = '';
                    SoundManager.playClick();
                }
            }
            
            showMessage(type, content, sender = null) {
                const messagesContainer = document.getElementById('chatMessages');
                const messageElement = document.createElement('div');
                messageElement.className = 'message-bubble animate-fade-in';
                
                if (type === 'admin') {
                    messageElement.innerHTML = `
                        <div class="flex items-start space-x-2">
                            <div class="w-6 h-6 bg-green-600 rounded-full flex items-center justify-center text-white text-xs font-bold">
                                T
                            </div>
                            <div class="flex-1">
                                <div class="bg-white border rounded-lg p-3 shadow-sm">
                                    <p class="text-sm">${content}</p>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Tino ‚Ä¢ ${new Date().toLocaleTimeString()}</p>
                            </div>
                        </div>
                    `;
                } else if (type === 'user') {
                    messageElement.innerHTML = `
                        <div class="flex items-start space-x-2 justify-end">
                            <div class="flex-1">
                                <div class="bg-green-600 text-white rounded-lg p-3 shadow-sm">
                                    <p class="text-sm">${content}</p>
                                </div>
                                <p class="text-xs text-gray-500 mt-1 text-right">You ‚Ä¢ ${new Date().toLocaleTimeString()}</p>
                            </div>
                            <div class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold">
                                ${this.userInfo.name.charAt(0).toUpperCase()}
                            </div>
                        </div>
                    `;
                } else {
                    messageElement.innerHTML = `
                        <div class="text-center">
                            <div class="bg-gray-100 rounded-lg p-3 text-sm text-gray-600">
                                ${content}
                            </div>
                        </div>
                    `;
                }
                
                messagesContainer.appendChild(messageElement);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
            
            showTypingIndicator(isTyping, sender) {
                const indicator = document.getElementById('typingIndicator');
                if (isTyping) {
                    indicator.classList.remove('hidden');
                } else {
                    indicator.classList.add('hidden');
                }
                
                // Auto-scroll to show typing indicator
                if (isTyping) {
                    setTimeout(() => {
                        const messagesContainer = document.getElementById('chatMessages');
                        messagesContainer.scrollTop = messagesContainer.scrollHeight;
                    }, 100);
                }
            }
            
            handleTyping() {
                if (!this.isTyping && this.isConnected) {
                    this.isTyping = true;
                    this.ws.send(JSON.stringify({
                        type: 'typing',
                        isTyping: true
                    }));
                    
                    // Clear typing indicator after 2 seconds
                    setTimeout(() => {
                        this.isTyping = false;
                        if (this.isConnected) {
                            this.ws.send(JSON.stringify({
                                type: 'typing',
                                isTyping: false
                            }));
                        }
                    }, 2000);
                }
            }
            
            updateConnectionStatus(connected) {
                const statusElement = document.getElementById('connectionStatus');
                const inputElement = document.getElementById('chatInput');
                const sendButton = document.getElementById('chatSend');
                
                if (connected) {
                    statusElement.textContent = 'Online ‚Ä¢ Ready to help';
                    statusElement.className = 'text-xs text-green-200';
                    inputElement.disabled = false;
                    sendButton.disabled = false;
                    inputElement.placeholder = 'Type your message...';
                } else {
                    statusElement.textContent = 'Reconnecting...';
                    statusElement.className = 'text-xs text-yellow-200';
                    inputElement.disabled = true;
                    sendButton.disabled = true;
                    inputElement.placeholder = 'Connecting...';
                }
            }
            
            showOfflineMessage() {
                setTimeout(() => {
                    createNotification('‚ùå Chat Server Offline', 'Live chat is temporarily unavailable.\n\nüìß Email: support@naviflow.com\nüì± Phone: +1 (555) 123-NAVI\n\nWe\'ll be back online shortly!', 'error');
                }, 2000);
            }
            
            startProactiveChat() {
                // Add glow effect to chat button
                setTimeout(() => {
                    const chatToggle = document.getElementById('chatToggle');
                    if (chatToggle) {
                        chatToggle.classList.add('chat-glow');
                    }
                }, 3000);
                
                // Show welcome notification after 8 seconds
                setTimeout(() => {
                    if (!document.getElementById('chatWindow').classList.contains('hidden')) return;
                    
                    createNotification('üëã Live Support Available!', 'Hi! I\'m Tino, founder of NaviFlow.\n\nüí¨ I\'m here to help with your demo\nüöÄ Click the chat button for instant support\n‚ö° Get answers to any questions!\n\nLet\'s make your integration seamless!', 'info');
                }, 8000);
                
                // Auto-open chat after 15 seconds if user hasn't interacted
                setTimeout(() => {
                    if (!document.getElementById('chatWindow').classList.contains('hidden')) return;
                    
                    this.showWelcomeMessage();
                }, 15000);
                
                // Hide banner after 30 seconds
                setTimeout(() => {
                    const banner = document.getElementById('chatBanner');
                    if (banner) {
                        banner.style.transform = 'translateX(100%)';
                        banner.style.opacity = '0';
                    }
                }, 30000);
            }
            
            showWelcomeMessage() {
                // Auto-open chat with welcome message
                const chatWindow = document.getElementById('chatWindow');
                const chatToggle = document.getElementById('chatToggle');
                
                if (chatWindow.classList.contains('hidden')) {
                    chatWindow.classList.remove('hidden');
                    chatToggle.classList.add('bg-gray-600');
                    chatToggle.classList.remove('bg-green-600');
                    
                    // Add welcome message
                    setTimeout(() => {
                        this.showMessage('system', 'Hey! üëã I noticed you\'re exploring NaviFlow. I\'m Tino, the founder - here to help with your demo!\n\nAny questions about integrations, features, or getting started?');
                        
                        // Play notification sound
                        SoundManager.playNotification();
                        
                        // Show notification
                        createNotification('üí¨ Chat Auto-Opened!', 'Tino has sent you a welcome message!\n\nüéØ This is perfect for your demo\nüí¨ Ask any questions about NaviFlow\nüöÄ Get instant founder support', 'success');
                    }, 500);
                    
                    document.getElementById('chatInput').focus();
                }
            }
        }
        
        // Initialize live chat when page loads
        let liveChatWidget = null;
        
        // Live Chat Function (now connects to real chat)
        function openLiveChat() {
            SoundManager.playClick();
            
            if (!liveChatWidget) {
                liveChatWidget = new LiveChatWidget();
            }
            
            // Show the chat widget
            liveChatWidget.toggleChat();
            
            createNotification('üí¨ Live Chat Opening', 'Connecting you to Tino for real-time support!\n\nüî¥ This is a LIVE chat session\nüí¨ Type your questions directly\n‚ö° Get instant help with your demo', 'success');
        }
        

        // Add Customer Function
        function showAddCustomer() {
            SoundManager.playClick();
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-2xl font-bold text-gray-800">üë§ Add New Customer</h2>
                            <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                        </div>
                        <p class="text-sm text-gray-600 mt-1">Add individual customer for order tracking and notifications</p>
                    </div>
                    
                    <div class="p-6">
                        <form id="addCustomerForm" class="space-y-4">
                            <!-- Customer Information -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">First Name *</label>
                                    <input type="text" id="customerFirstName" required class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="John" />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Last Name *</label>
                                    <input type="text" id="customerLastName" required class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="Smith" />
                                </div>
                            </div>
                            
                            <!-- Contact Information -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                                    <input type="email" id="customerEmail" required class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="john.smith@email.com" />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                                    <input type="tel" id="customerPhone" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="+1-555-0123" />
                                </div>
                            </div>
                            
                            <!-- Address Information -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Street Address</label>
                                <input type="text" id="customerAddress" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="123 Main Street" />
                            </div>
                            
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">City</label>
                                    <input type="text" id="customerCity" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="New York" />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">State</label>
                                    <input type="text" id="customerState" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="NY" />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Zip Code</label>
                                    <input type="text" id="customerZip" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="10001" />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Country</label>
                                    <select id="customerCountry" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                        <option value="US">United States</option>
                                        <option value="CA">Canada</option>
                                        <option value="GB">United Kingdom</option>
                                        <option value="AU">Australia</option>
                                        <option value="DE">Germany</option>
                                        <option value="FR">France</option>
                                        <option value="JP">Japan</option>
                                        <option value="CN">China</option>
                                        <option value="IN">India</option>
                                        <option value="BR">Brazil</option>
                                        <option value="MX">Mexico</option>
                                        <option value="OTHER">Other</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Notification Preferences -->
                            <div class="border-t pt-4">
                                <h4 class="font-semibold text-gray-800 mb-3">üì± Notification Preferences</h4>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="notifyEmail" checked class="rounded border-gray-300">
                                        <span class="text-sm">üìß Email Alerts</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="notifySMS" class="rounded border-gray-300">
                                        <span class="text-sm">üì± SMS Alerts</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="notifyWhatsApp" class="rounded border-gray-300">
                                        <span class="text-sm">üí¨ WhatsApp</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Customer Tags -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Customer Tags</label>
                                <input type="text" id="customerTags" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="VIP, Frequent Buyer, Priority Support (comma separated)" />
                                <p class="text-xs text-gray-500 mt-1">Add tags to categorize customers for better service</p>
                            </div>
                            
                            <!-- Notes -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Notes</label>
                                <textarea id="customerNotes" rows="3" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="Special instructions, preferences, or important notes..."></textarea>
                            </div>
                            
                            <!-- Submit Buttons -->
                            <div class="flex space-x-3 pt-4">
                                <button type="submit" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium">
                                    üë§ Add Customer
                                </button>
                                <button type="button" onclick="addCustomerAndCreateOrder()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-medium">
                                    üì¶ Add Customer & Create Order
                                </button>
                                <button type="button" onclick="this.closest('.fixed').remove()" class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Handle form submission
            document.getElementById('addCustomerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addNewCustomer();
            });
        }

        function addNewCustomer() {
            SoundManager.playSuccess();
            
            // Get form data
            const firstName = document.getElementById('customerFirstName').value;
            const lastName = document.getElementById('customerLastName').value;
            const email = document.getElementById('customerEmail').value;
            const phone = document.getElementById('customerPhone').value;
            const address = document.getElementById('customerAddress').value;
            const city = document.getElementById('customerCity').value;
            const state = document.getElementById('customerState').value;
            const zip = document.getElementById('customerZip').value;
            const country = document.getElementById('customerCountry').value;
            const tags = document.getElementById('customerTags').value;
            const notes = document.getElementById('customerNotes').value;
            
            // Get notification preferences
            const notifications = [];
            if (document.getElementById('notifyEmail').checked) notifications.push('email');
            if (document.getElementById('notifySMS').checked) notifications.push('sms');
            if (document.getElementById('notifyWhatsApp').checked) notifications.push('whatsapp');
            
            // Validate required fields
            if (!firstName || !lastName || !email) {
                createNotification('‚ùå Missing Information', 'Please fill in all required fields:\n‚Ä¢ First Name\n‚Ä¢ Last Name\n‚Ä¢ Email Address', 'error');
                return;
            }
            
            // Create customer object
            const customer = {
                id: 'CUST-' + Date.now(),
                name: firstName + ' ' + lastName,
                firstName: firstName,
                lastName: lastName,
                email: email,
                phone: phone || '',
                address: {
                    street: address || '',
                    city: city || '',
                    state: state || '',
                    zip: zip || '',
                    country: country || 'US'
                },
                notifications: notifications,
                tags: tags.split(',').map(tag => tag.trim()).filter(tag => tag),
                notes: notes || '',
                dateAdded: new Date().toISOString(),
                totalOrders: 0,
                totalSpent: '$0.00'
            };
            
            // Save customer (in real app, this would go to database)
            let customers = JSON.parse(localStorage.getItem('nerva_customers') || '[]');
            customers.push(customer);
            localStorage.setItem('nerva_customers', JSON.stringify(customers));
            
            // Update customer search input
            const customerSearch = document.getElementById('customerSearch');
            if (customerSearch) {
                customerSearch.value = customer.name + ' (' + customer.email + ')';
            }
            
            // Close modal
            document.querySelector('.fixed')?.remove();
            
            // Show success notification
            createNotification('‚úÖ Customer Added Successfully!', `üë§ ${customer.name} has been added to your customer database\n\nüìß Email: ${customer.email}\nüì± Notifications: ${notifications.join(', ') || 'None'}\nüè∑Ô∏è Tags: ${customer.tags.join(', ') || 'None'}\n\nCustomer is now available for order tracking!`, 'success');
        }

        function addCustomerAndCreateOrder() {
            // First add the customer
            addNewCustomer();
            
            // Then show a follow-up to create an order
            setTimeout(() => {
                createNotification('üì¶ Ready to Create Order?', 'Customer added successfully!\n\nWould you like to:\n‚Ä¢ Create a new shipment order\n‚Ä¢ Import existing tracking number\n‚Ä¢ Set up automated notifications\n\nUse the tracking form below to get started!', 'info');
            }, 2000);
        }

        // Customer Search Functionality
        function setupCustomerSearch() {
            const customerSearch = document.getElementById('customerSearch');
            if (!customerSearch) return;
            
            // Add autocomplete functionality
            customerSearch.addEventListener('input', function() {
                showCustomerSuggestions(this.value);
            });
            
            customerSearch.addEventListener('focus', function() {
                showCustomerSuggestions(this.value);
            });
            
            // Hide suggestions when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('#customerSearch') && !e.target.closest('#customerSuggestions')) {
                    hideCustomerSuggestions();
                }
            });
        }

        function showCustomerSuggestions(query) {
            const customers = JSON.parse(localStorage.getItem('nerva_customers') || '[]');
            const mockCustomers = [
                { name: 'John Smith', email: 'john.smith@email.com', phone: '+1-555-0123', totalOrders: 5, tags: ['VIP'] },
                { name: 'Sarah Johnson', email: 'sarah.j@email.com', phone: '+1-555-0124', totalOrders: 3, tags: ['Frequent Buyer'] },
                { name: 'Mike Wilson', email: 'mike.w@email.com', phone: '+1-555-0125', totalOrders: 8, tags: ['Priority Support'] },
                { name: 'Emily Davis', email: 'emily.d@email.com', phone: '+1-555-0126', totalOrders: 2, tags: [] },
                { name: 'Chris Brown', email: 'chris.b@email.com', phone: '+1-555-0127', totalOrders: 12, tags: ['VIP', 'High Volume'] }
            ];
            
            const allCustomers = [...customers, ...mockCustomers];
            
            // Filter customers based on query
            const filteredCustomers = allCustomers.filter(customer => 
                query === '' || 
                customer.name.toLowerCase().includes(query.toLowerCase()) ||
                customer.email.toLowerCase().includes(query.toLowerCase())
            );
            
            // Remove existing suggestions
            const existingSuggestions = document.getElementById('customerSuggestions');
            if (existingSuggestions) {
                existingSuggestions.remove();
            }
            
            if (filteredCustomers.length === 0 && query !== '') {
                return;
            }
            
            // Create suggestions dropdown
            const suggestionsDiv = document.createElement('div');
            suggestionsDiv.id = 'customerSuggestions';
            suggestionsDiv.className = 'absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg mt-1 shadow-lg z-10 max-h-60 overflow-y-auto';
            
            if (filteredCustomers.length === 0) {
                suggestionsDiv.innerHTML = `
                    <div class="p-4 text-center text-gray-500">
                        <div class="text-4xl mb-2">üë§</div>
                        <p class="text-sm">No customers found</p>
                        <button onclick="showAddCustomer()" class="mt-2 text-green-600 hover:text-green-800 text-sm font-medium">
                            + Add New Customer
                        </button>
                    </div>
                `;
            } else {
                const customersHtml = filteredCustomers.slice(0, 8).map(customer => `
                    <div class="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0" onclick="selectCustomer('${customer.name}', '${customer.email}')">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="font-medium text-gray-900">${customer.name}</div>
                                <div class="text-sm text-gray-600">${customer.email}</div>
                                ${customer.phone ? `<div class="text-xs text-gray-500">${customer.phone}</div>` : ''}
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-medium text-blue-600">${customer.totalOrders || 0} orders</div>
                                ${customer.tags && customer.tags.length > 0 ? `
                                    <div class="flex flex-wrap gap-1 mt-1">
                                        ${customer.tags.slice(0, 2).map(tag => `
                                            <span class="text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded">${tag}</span>
                                        `).join('')}
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
                
                suggestionsDiv.innerHTML = customersHtml + `
                    <div class="p-3 bg-gray-50 border-t">
                        <button onclick="showAddCustomer()" class="w-full text-left text-green-600 hover:text-green-800 text-sm font-medium">
                            üë§+ Add New Customer
                        </button>
                    </div>
                `;
            }
            
            // Position the dropdown
            const customerSearchContainer = document.getElementById('customerSearch').parentElement;
            customerSearchContainer.style.position = 'relative';
            customerSearchContainer.appendChild(suggestionsDiv);
        }

        function selectCustomer(name, email) {
            const customerSearch = document.getElementById('customerSearch');
            if (customerSearch) {
                customerSearch.value = `${name} (${email})`;
            }
            
            hideCustomerSuggestions();
            
            SoundManager.playClick();
            createNotification('üë§ Customer Selected', `Customer: ${name}\nEmail: ${email}\n\nYou can now track shipments for this customer!`, 'success');
        }

        function hideCustomerSuggestions() {
            const suggestions = document.getElementById('customerSuggestions');
            if (suggestions) {
                suggestions.remove();
            }
        }

        // API Customer Management Functions
        function showCustomerDatabase() {
            SoundManager.playClick();
            
            const customers = JSON.parse(localStorage.getItem('nerva_customers') || '[]');
            const mockCustomers = [
                { id: 'CUST-001', name: 'John Smith', email: 'john.smith@email.com', phone: '+1-555-0123', totalOrders: 5, tags: ['VIP'], dateAdded: '2024-01-10' },
                { id: 'CUST-002', name: 'Sarah Johnson', email: 'sarah.j@email.com', phone: '+1-555-0124', totalOrders: 3, tags: ['Frequent Buyer'], dateAdded: '2024-01-12' },
                { id: 'CUST-003', name: 'Mike Wilson', email: 'mike.w@email.com', phone: '+1-555-0125', totalOrders: 8, tags: ['Priority Support'], dateAdded: '2024-01-08' },
                { id: 'CUST-004', name: 'Emily Davis', email: 'emily.d@email.com', phone: '+1-555-0126', totalOrders: 2, tags: [], dateAdded: '2024-01-15' },
                { id: 'CUST-005', name: 'Chris Brown', email: 'chris.b@email.com', phone: '+1-555-0127', totalOrders: 12, tags: ['VIP', 'High Volume'], dateAdded: '2024-01-05' }
            ];
            
            const allCustomers = [...customers, ...mockCustomers];
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-2xl font-bold text-gray-800">üìä Customer Database</h2>
                            <div class="flex space-x-2">
                                <button onclick="showAddCustomer()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm">
                                    üë§+ Add Customer
                                </button>
                                <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                            </div>
                        </div>
                        <p class="text-sm text-gray-600 mt-1">Manage all customers and their information</p>
                    </div>
                    
                    <div class="p-6">
                        <!-- Stats Overview -->
                        <div class="grid grid-cols-4 gap-4 mb-6">
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <div class="text-2xl font-bold text-blue-600">${allCustomers.length}</div>
                                <p class="text-sm text-blue-800">Total Customers</p>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg">
                                <div class="text-2xl font-bold text-green-600">${allCustomers.filter(c => c.totalOrders > 0).length}</div>
                                <p class="text-sm text-green-800">Active Customers</p>
                            </div>
                            <div class="bg-orange-50 p-4 rounded-lg">
                                <div class="text-2xl font-bold text-orange-600">${allCustomers.filter(c => c.tags.includes('VIP')).length}</div>
                                <p class="text-sm text-orange-800">VIP Customers</p>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-lg">
                                <div class="text-2xl font-bold text-purple-600">${allCustomers.filter(c => new Date(c.dateAdded) > new Date(Date.now() - 30*24*60*60*1000)).length}</div>
                                <p class="text-sm text-purple-800">New This Month</p>
                            </div>
                        </div>
                        
                        <!-- Customer Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse border border-gray-300">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="border border-gray-300 px-4 py-3 text-left text-sm font-medium text-gray-700">Customer</th>
                                        <th class="border border-gray-300 px-4 py-3 text-left text-sm font-medium text-gray-700">Contact</th>
                                        <th class="border border-gray-300 px-4 py-3 text-center text-sm font-medium text-gray-700">Orders</th>
                                        <th class="border border-gray-300 px-4 py-3 text-left text-sm font-medium text-gray-700">Tags</th>
                                        <th class="border border-gray-300 px-4 py-3 text-center text-sm font-medium text-gray-700">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${allCustomers.map(customer => `
                                        <tr class="hover:bg-gray-50">
                                            <td class="border border-gray-300 px-4 py-3">
                                                <div class="font-medium text-gray-900">${customer.name}</div>
                                                <div class="text-sm text-gray-500">ID: ${customer.id || 'N/A'}</div>
                                            </td>
                                            <td class="border border-gray-300 px-4 py-3">
                                                <div class="text-sm text-gray-900">${customer.email}</div>
                                                ${customer.phone ? `<div class="text-xs text-gray-500">${customer.phone}</div>` : ''}
                                            </td>
                                            <td class="border border-gray-300 px-4 py-3 text-center">
                                                <span class="font-medium text-blue-600">${customer.totalOrders || 0}</span>
                                            </td>
                                            <td class="border border-gray-300 px-4 py-3">
                                                <div class="flex flex-wrap gap-1">
                                                    ${(customer.tags || []).map(tag => `
                                                        <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">${tag}</span>
                                                    `).join('')}
                                                </div>
                                            </td>
                                            <td class="border border-gray-300 px-4 py-3 text-center">
                                                <div class="flex space-x-1 justify-center">
                                                    <button onclick="viewCustomerDetails('${customer.id || customer.email}')" class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs hover:bg-blue-200">
                                                        üëÅÔ∏è View
                                                    </button>
                                                    <button onclick="editCustomer('${customer.id || customer.email}')" class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs hover:bg-green-200">
                                                        ‚úèÔ∏è Edit
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function exportCustomerData() {
            SoundManager.playClick();
            
            const customers = JSON.parse(localStorage.getItem('nerva_customers') || '[]');
            const csvContent = `Customer Name,Email,Phone,Address,City,State,Zip,Country,Total Orders,Tags,Notes,Date Added
${customers.map(customer => `"${customer.name}","${customer.email}","${customer.phone}","${customer.address?.street || ''}","${customer.address?.city || ''}","${customer.address?.state || ''}","${customer.address?.zip || ''}","${customer.address?.country || ''}","${customer.totalOrders}","${customer.tags.join('; ')}","${customer.notes || ''}","${customer.dateAdded}"`).join('\n')}`;
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'nerva_customers_' + new Date().toISOString().split('T')[0] + '.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            createNotification('üì• Customer Data Exported', `Customer database exported successfully!\n\nüìä ${customers.length} customers exported\nüìÅ File: nerva_customers_${new Date().toISOString().split('T')[0]}.csv\n‚úÖ Ready for import to other systems`, 'success');
        }

        function searchAPICustomers() {
            const query = document.getElementById('apiCustomerSearch').value.toLowerCase();
            const customers = JSON.parse(localStorage.getItem('nerva_customers') || '[]');
            const mockCustomers = [
                { name: 'John Smith', email: 'john.smith@email.com', phone: '+1-555-0123', totalOrders: 5, tags: ['VIP'] },
                { name: 'Sarah Johnson', email: 'sarah.j@email.com', phone: '+1-555-0124', totalOrders: 3, tags: ['Frequent Buyer'] },
                { name: 'Mike Wilson', email: 'mike.w@email.com', phone: '+1-555-0125', totalOrders: 8, tags: ['Priority Support'] }
            ];
            
            const allCustomers = [...customers, ...mockCustomers];
            const filteredCustomers = allCustomers.filter(customer => 
                customer.name.toLowerCase().includes(query) ||
                customer.email.toLowerCase().includes(query) ||
                (customer.phone && customer.phone.includes(query))
            );
            
            const resultsDiv = document.getElementById('apiCustomerSearchResults');
            if (query === '') {
                resultsDiv.classList.add('hidden');
                return;
            }
            
            resultsDiv.classList.remove('hidden');
            
            if (filteredCustomers.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="p-4 text-center text-gray-500">
                        <div class="text-2xl mb-2">üîç</div>
                        <p class="text-sm">No customers found matching "${query}"</p>
                        <button onclick="showAddCustomer()" class="mt-2 text-green-600 hover:text-green-800 text-sm font-medium">
                            + Add New Customer
                        </button>
                    </div>
                `;
            } else {
                resultsDiv.innerHTML = `
                    <div class="space-y-2">
                        ${filteredCustomers.slice(0, 5).map(customer => `
                            <div class="p-3 bg-white border rounded-lg hover:bg-gray-50">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-medium text-gray-900">${customer.name}</div>
                                        <div class="text-sm text-gray-600">${customer.email}</div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm font-medium text-blue-600">${customer.totalOrders || 0} orders</div>
                                        <div class="text-xs text-gray-500">${customer.tags.join(', ')}</div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                        ${filteredCustomers.length > 5 ? `<div class="text-center text-sm text-gray-500">... and ${filteredCustomers.length - 5} more</div>` : ''}
                    </div>
                `;
            }
            
            SoundManager.playClick();
        }

        function showAdvancedCustomerFilters() {
            SoundManager.playClick();
            createNotification('üéõÔ∏è Advanced Filters', 'Advanced customer filtering options:\n\n‚Ä¢ Filter by customer tags (VIP, Frequent Buyer)\n‚Ä¢ Filter by order count ranges\n‚Ä¢ Filter by date added\n‚Ä¢ Filter by notification preferences\n‚Ä¢ Filter by location/country\n\nComing in next update!', 'info');
        }

        function viewCustomerDetails(customerId) {
            SoundManager.playClick();
            createNotification('üëÅÔ∏è Customer Details', `Viewing detailed customer information:\n\n‚Ä¢ Complete order history\n‚Ä¢ Communication preferences\n‚Ä¢ Shipping addresses\n‚Ä¢ Payment methods\n‚Ä¢ Support tickets\n\nFull customer profile coming soon!`, 'info');
        }

        function editCustomer(customerId) {
            SoundManager.playClick();
            createNotification('‚úèÔ∏è Edit Customer', `Edit customer information:\n\n‚Ä¢ Update contact details\n‚Ä¢ Modify notification preferences\n‚Ä¢ Add/remove tags\n‚Ä¢ Update addresses\n‚Ä¢ Add notes\n\nCustomer editing interface coming soon!`, 'info');
        }

        function saveNotificationSettings() {
            SoundManager.playSuccess();
            createNotification('üíæ Settings Saved', '‚úÖ Notification settings updated\n‚úÖ Email templates configured\n‚úÖ SMS preferences saved\n‚úÖ Customer alerts active', 'success');
        }

        function testNotification() {
            SoundManager.playNotification();
            createNotification('üß™ Test Notification Sent', 'üìß Email: Delivered to demo@nerva.com\nüì± SMS: Delivered to +1-555-0123\nüì± WhatsApp: Delivered successfully\n\n‚úÖ All channels working perfectly!', 'success');
        }

        function showNotificationPreview() {
            SoundManager.playClick();
            createNotification('üëÅÔ∏è Notification Preview System', '‚úÖ Email templates: 12 variants\n‚úÖ SMS templates: 8 variants\n‚úÖ WhatsApp templates: 6 variants\n‚úÖ Multi-language support: 15 languages\n‚úÖ Brand customization: Full control\n\nThese are the actual notifications your customers receive - professional, branded, and informative!', 'info');
        }

        function saveAlertRules() {
            SoundManager.playSuccess();
            createNotification('üíæ Alert Rules Updated', '‚úÖ Weather thresholds configured\n‚úÖ Auto-notification rules active\n‚úÖ Customer alert preferences saved\n‚úÖ All carriers synchronized', 'success');
        }

        function refreshAlerts() {
            SoundManager.playClick();
            createNotification('üîÑ Weather Alerts Refreshed', '‚úÖ Live weather data updated\n‚úÖ Route conditions analyzed\n‚úÖ New alerts generated\n‚úÖ Customer notifications sent', 'success');
        }

        // Sea Freight Container Generation Functions
        function generateSampleContainers(count) {
            const containerTypes = ['20\' DV', '40\' HC', '40\' DV', '20\' HC', '45\' HC', '20\' OT', '40\' OT', '40\' FR', '20\' RF', '40\' RF'];
            
            const cargoTypes = [
                'Electronics & Components', 'Fashion & Apparel', 'Automotive Parts', 'Furniture & Home Goods',
                'Machinery & Equipment', 'Textiles & Fabrics', 'Food & Beverages', 'Pharmaceuticals',
                'Chemicals & Materials', 'Toys & Games', 'Books & Media', 'Sports Equipment',
                'Beauty & Personal Care', 'Home Appliances', 'Office Equipment', 'Hardware & Tools',
                'Industrial Equipment', 'Construction Materials', 'Agricultural Products', 'Raw Materials'
            ];
            
            const shippingLines = [
                { name: 'MSC', prefix: 'MSCU', color: 'blue' },
                { name: 'MAERSK', prefix: 'MSKU', color: 'blue' },
                { name: 'EVERGREEN', prefix: 'EGLV', color: 'green' },
                { name: 'CMA CGM', prefix: 'CMAU', color: 'red' },
                { name: 'COSCO', prefix: 'COSU', color: 'purple' },
                { name: 'HAPAG-LLOYD', prefix: 'HLCU', color: 'orange' },
                { name: 'ONE', prefix: 'ONEU', color: 'purple' },
                { name: 'YANG MING', prefix: 'YMLU', color: 'red' },
                { name: 'HMM', prefix: 'HMMU', color: 'blue' },
                { name: 'ZIM', prefix: 'ZIMU', color: 'green' }
            ];
            
            const vessels = [
                'MSC GULSUN', 'MAERSK MADRID', 'EVER GIVEN', 'CMA CGM MARCO POLO', 'COSCO SHIPPING UNIVERSE',
                'HAPAG-LLOYD BERLIN', 'ONE INNOVATION', 'YANG MING WISDOM', 'HMM ALGECIRAS', 'ZIM KINGSTON',
                'MSC OSCAR', 'MAERSK EDINBURGH', 'EVERGREEN EVER GOLDEN', 'CMA CGM ANTOINE DE SAINT EXUPERY',
                'COSCO SHIPPING GALAXY', 'HAPAG-LLOYD HAMBURG', 'ONE COMMITMENT', 'YANG MING TRIUMPH', 'HMM HAMBURG', 'ZIM INTEGRATED'
            ];
            
            const ports = [
                { code: 'CNSHA', name: 'Shanghai', country: 'China' },
                { code: 'SGSIN', name: 'Singapore', country: 'Singapore' },
                { code: 'DEHAM', name: 'Hamburg', country: 'Germany' },
                { code: 'USLAX', name: 'Los Angeles', country: 'USA' },
                { code: 'USLGB', name: 'Long Beach', country: 'USA' },
                { code: 'USNYC', name: 'New York', country: 'USA' },
                { code: 'NLRTM', name: 'Rotterdam', country: 'Netherlands' },
                { code: 'GBFXT', name: 'Felixstowe', country: 'UK' },
                { code: 'USORF', name: 'Norfolk', country: 'USA' },
                { code: 'USSAV', name: 'Savannah', country: 'USA' },
                { code: 'HKHKG', name: 'Hong Kong', country: 'Hong Kong' },
                { code: 'KRPUS', name: 'Busan', country: 'South Korea' },
                { code: 'JPUKB', name: 'Tokyo', country: 'Japan' },
                { code: 'MYTPP', name: 'Port Klang', country: 'Malaysia' },
                { code: 'THBKK', name: 'Laem Chabang', country: 'Thailand' },
                { code: 'VNNPH', name: 'Haiphong', country: 'Vietnam' },
                { code: 'USHOU', name: 'Houston', country: 'USA' },
                { code: 'USMIA', name: 'Miami', country: 'USA' },
                { code: 'BEZEE', name: 'Zeebrugge', country: 'Belgium' },
                { code: 'ITGOA', name: 'Genoa', country: 'Italy' }
            ];
            
            const statuses = [
                { status: 'In Transit', color: 'blue', weight: 45 },
                { status: 'Port Loading', color: 'yellow', weight: 15 },
                { status: 'Port Discharge', color: 'purple', weight: 12 },
                { status: 'Delivered', color: 'green', weight: 18 },
                { status: 'Weather Delay', color: 'orange', weight: 7 },
                { status: 'Customs Hold', color: 'red', weight: 3 }
            ];
            
            const weatherConditions = [
                { condition: 'Clear sailing conditions', color: 'blue', delay: false },
                { condition: 'Moderate winds, on schedule', color: 'blue', delay: false },
                { condition: 'Storm system approaching', color: 'orange', delay: true },
                { condition: 'Fog delays at port', color: 'yellow', delay: true },
                { condition: 'Rough seas, reduced speed', color: 'red', delay: true },
                { condition: 'Tropical storm watch', color: 'red', delay: true },
                { condition: 'Optimal weather window', color: 'green', delay: false }
            ];
            
            const containers = [];
            
            for (let i = 0; i < count; i++) {
                const shippingLine = shippingLines[Math.floor(Math.random() * shippingLines.length)];
                const vessel = vessels[Math.floor(Math.random() * vessels.length)];
                const containerType = containerTypes[Math.floor(Math.random() * containerTypes.length)];
                const cargoType = cargoTypes[Math.floor(Math.random() * cargoTypes.length)];
                const weather = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
                
                const originPort = ports[Math.floor(Math.random() * ports.length)];
                let destinationPort = ports[Math.floor(Math.random() * ports.length)];
                // Ensure different origin and destination
                while (destinationPort.code === originPort.code) {
                    destinationPort = ports[Math.floor(Math.random() * ports.length)];
                }
                
                // Weighted random status selection
                const rand = Math.random() * 100;
                let currentWeight = 0;
                let selectedStatus = statuses[0];
                
                for (const statusOption of statuses) {
                    currentWeight += statusOption.weight;
                    if (rand <= currentWeight) {
                        selectedStatus = statusOption;
                        break;
                    }
                }
                
                const containerNumber = `${shippingLine.prefix}${Math.floor(Math.random() * 9000000) + 1000000}`;
                
                const etaOptions = [
                    'On Schedule (Mar 28, 2024)', 'On Schedule (Mar 30, 2024)', 'Delayed (Apr 2, 2024)',
                    'Express (Mar 25, 2024)', 'On Schedule (Apr 1, 2024)', 'Delayed (Apr 5, 2024)',
                    'On Schedule (Mar 29, 2024)', 'Express (Mar 27, 2024)', 'Standard (Apr 3, 2024)'
                ];
                
                const customerNotifications = [
                    '‚úì Auto-notified', '‚úì SMS sent', '‚úì Email delivered', '‚è≥ Notifying now', '‚úì WhatsApp sent', '‚úì Portal updated'
                ];
                
                // Calculate if arriving this week (simulate based on ETA)
                const isArrivingThisWeek = Math.random() > 0.7; // 30% chance
                
                containers.push({
                    containerNumber,
                    cargoType,
                    containerType,
                    vessel,
                    shippingLine: shippingLine.name,
                    lineColor: shippingLine.color,
                    status: selectedStatus.status,
                    statusColor: selectedStatus.color,
                    originPort,
                    destinationPort,
                    route: `${originPort.code} ‚Üí ${destinationPort.code}`,
                    routeDescription: `${originPort.name} ‚Üí ${destinationPort.name}`,
                    eta: etaOptions[Math.floor(Math.random() * etaOptions.length)],
                    weather: weather.condition,
                    weatherColor: weather.color,
                    hasWeatherDelay: weather.delay,
                    customerStatus: customerNotifications[Math.floor(Math.random() * customerNotifications.length)],
                    isArrivingThisWeek
                });
            }
            
            return containers;
        }
        
        function populateContainerDisplay(containers) {
            const containerContent = document.getElementById('containerContent');
            
            // Update the dashboard counter
            document.getElementById('activeContainerCount').textContent = containers.length;
            
            // Calculate arriving this week
            const arrivingThisWeek = containers.filter(c => c.isArrivingThisWeek).length;
            document.getElementById('arrivingThisWeekCount').textContent = arrivingThisWeek;
            
            const containersHtml = containers.map(container => `
                <div class="border rounded-lg p-4 bg-gradient-to-r from-blue-50 to-blue-100 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex-1">
                            <h4 class="font-semibold text-blue-900">${container.containerNumber}</h4>
                            <p class="text-sm text-blue-700">${container.cargoType} ‚Ä¢ ${container.containerType} ‚Ä¢ ${container.vessel}</p>
                            <p class="text-xs text-gray-600 mt-1">üö¢ ${container.shippingLine}</p>
                        </div>
                        <span class="bg-${container.statusColor}-100 text-${container.statusColor}-800 px-3 py-1 rounded-full text-sm font-medium ml-4 whitespace-nowrap">
                            ${container.status}
                        </span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
                        <div>
                            <p class="text-gray-600">Route</p>
                            <p class="font-semibold">${container.route}</p>
                            <p class="text-xs text-gray-500">${container.routeDescription}</p>
                        </div>
                        <div>
                            <p class="text-gray-600">ETA</p>
                            <p class="font-semibold ${container.hasWeatherDelay ? 'text-orange-600' : 'text-green-600'}">${container.eta}</p>
                        </div>
                        <div>
                            <p class="text-gray-600">Weather Status</p>
                            <p class="font-semibold text-${container.weatherColor}-600">${container.weather}</p>
                        </div>
                        <div>
                            <p class="text-gray-600">Customer Status</p>
                            <p class="font-semibold text-green-600">${container.customerStatus}</p>
                        </div>
                    </div>
                </div>
            `).join('');
            
            containerContent.innerHTML = `
                <div class="space-y-4">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-semibold text-gray-800">Showing ${containers.length} containers</h4>
                        <div class="flex gap-2">
                            <button onclick="exportContainerData()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                                üìä Export Data
                            </button>
                            <button onclick="refreshContainerData()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm">
                                üîÑ Refresh
                            </button>
                        </div>
                    </div>
                    <div class="max-h-96 overflow-y-auto space-y-3">
                        ${containersHtml}
                    </div>
                </div>
            `;
        }
        
        function refreshContainerData() {
            SoundManager.playClick();
            createNotification('üîÑ Refreshing Data', 'Updating container information...\n\n‚è≥ Fetching latest positions\n‚è≥ Checking weather conditions\n‚è≥ Updating ETAs', 'info');
            
            // Simulate refresh by reloading sample data
            setTimeout(() => {
                loadSampleContainers();
                createNotification('‚úÖ Data Refreshed', 'All container data updated successfully!\n\nüìä Latest tracking information loaded\nüåä Weather conditions updated\nüì± Customer notifications synchronized', 'success');
            }, 2000);
        }

        // Sea Freight Functions
        function searchContainers() {
            const containerRef = document.getElementById('containerRef').value;
            const originPort = document.getElementById('originPort').value;
            const destinationPort = document.getElementById('destinationPort').value;
            const status = document.getElementById('containerStatus').value;
            
            // Generate and display 12 matching containers
            const containers = generateSampleContainers(12);
            populateContainerDisplay(containers);
            
            // Show results section
            document.getElementById('containerResults').style.display = 'block';
            document.getElementById('containerResultCount').textContent = '12 containers found';
            
            SoundManager.playSuccess();
            createNotification('üîç Container Search Complete', '‚úÖ Found 12 matching containers\n‚úÖ Weather intelligence applied\n‚úÖ Results filtered by your criteria\n‚úÖ Real-time tracking active', 'success');
        }

        function loadSampleContainers() {
            // Generate and display 127 actual containers
            const containers = generateSampleContainers(127);
            populateContainerDisplay(containers);
            
            document.getElementById('containerResults').style.display = 'block';
            document.getElementById('containerResultCount').textContent = '127 containers loaded';
            
            SoundManager.playSuccess();
            createNotification('üì¶ Sample Container Data Loaded', '‚úÖ 127 active containers imported\n‚úÖ Real-time weather monitoring active\n‚úÖ All major shipping lines included\n‚úÖ Global port coverage enabled', 'success');
        }

        function exportContainerData() {
            SoundManager.playClick();
            createNotification('üìä Container Data Export', 'Exporting data to Excel:\n\n‚úÖ 127 container records\n‚úÖ Weather impact analysis\n‚úÖ ETA predictions\n‚úÖ Route optimization data\n\nFile: sea_freight_intelligence_report.xlsx\nEstimated download time: 3 seconds', 'info');
        }

        function refreshSeaRoutes() {
            SoundManager.playClick();
            createNotification('üîÑ Sea Routes Refreshed', '‚úÖ Updated weather conditions\n‚úÖ Latest vessel positions\n‚úÖ ETA recalculations\n‚úÖ New route recommendations\n‚úÖ Typhoon tracking updated', 'success');
        }

        // AI Chatbot Functions
        let chatOpen = false;


        function addMessage(message, isUser = false, showTyping = false) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-2';
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="flex-1"></div>
                    <div class="bg-blue-600 text-white rounded-lg p-4 max-w-sm">
                        <p class="text-base">${message}</p>
                    </div>
                    <div class="w-6 h-6 bg-gray-400 rounded-full flex items-center justify-center text-white text-xs">
                        üë§
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs">
                        ü§ñ
                    </div>
                    <div class="bg-gray-100 rounded-lg p-4 max-w-sm">
                        <p class="text-base">${message}</p>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            if (showTyping && !isUser) {
                showTypingIndicator();
            }
        }

        function showTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'flex items-start space-x-2';
            typingDiv.innerHTML = `
                <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs">
                    ü§ñ
                </div>
                <div class="bg-gray-100 rounded-lg p-3">
                    <div class="flex space-x-1">
                        <div class="w-2 h-2 bg-gray-500 rounded-full animate-pulse"></div>
                        <div class="w-2 h-2 bg-gray-500 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                        <div class="w-2 h-2 bg-gray-500 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
                    </div>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function getBotResponse(userMessage) {
            const responses = {
                'weather-delay': "üå¶Ô∏è Weather delays are automatically detected by our AI system. When severe weather affects shipping routes, we:\n\n‚úÖ Notify customers 2-6 hours before delays occur\n‚úÖ Provide new delivery estimates\n‚úÖ Protect your seller metrics on Amazon/eBay\n‚úÖ Offer customer compensation options\n\nThis reduces customer service calls by 73%!",
                
                'setup-help': "‚öôÔ∏è Setting up NaviFlow is easy! Here's what you need:\n\n1Ô∏è‚É£ Connect your store (Shopify/WooCommerce/Amazon)\n2Ô∏è‚É£ Configure notification channels (Email/SMS)\n3Ô∏è‚É£ Set weather alert preferences\n4Ô∏è‚É£ Test notifications\n\nWant me to walk you through connecting your store?",
                
                'customer-notifications': "üìß Our customer notifications are:\n\n‚úÖ Professionally branded with your store name\n‚úÖ Sent via Email, SMS, and WhatsApp\n‚úÖ Include real-time tracking updates\n‚úÖ Proactive weather delay alerts\n‚úÖ Customizable templates\n\nCustomers love them - 9.2/10 satisfaction score!",
                
                'api': "üîó Our API connects with:\n‚úÖ Shopify (Admin API + Webhooks)\n‚úÖ WooCommerce (REST API)\n‚úÖ Amazon FBA (MWS API)\n‚úÖ Real-time weather data\n‚úÖ Shipping carrier APIs\n\nAll connections are secure and encrypted!",
                
                'pricing': "üí∞ Pricing is simple and scalable:\n\nüì¶ Starter: $99/month (up to 1,000 orders)\nüöÄ Pro: $299/month (up to 10,000 orders)\nüè¢ Enterprise: Custom pricing\n\nROI typically 340%+ from reduced customer service costs!",
                
                'demo': "üéØ Want to see NaviFlow in action?\n\n‚úÖ Try the 'Load Sample Orders' button\n‚úÖ Test the API connections\n‚úÖ View customer notification examples\n‚úÖ Check the weather alert system\n\nEverything you see is real functionality!",
                
                'default': "I can help with:\nüå¶Ô∏è Weather delay questions\n‚öôÔ∏è Platform setup\nüìß Customer notifications\nüîó API integrations\nüí∞ Pricing questions\nüéØ Demo guidance\n\nWhat would you like to know more about?"
            };
            
            const message = userMessage.toLowerCase();
            
            if (message.includes('weather') || message.includes('delay')) return responses['weather-delay'];
            if (message.includes('setup') || message.includes('install') || message.includes('connect')) return responses['setup-help'];
            if (message.includes('notification') || message.includes('email') || message.includes('sms')) return responses['customer-notifications'];
            if (message.includes('api') || message.includes('integration')) return responses['api'];
            if (message.includes('price') || message.includes('cost') || message.includes('pricing')) return responses['pricing'];
            if (message.includes('demo') || message.includes('test') || message.includes('try')) return responses['demo'];
            
            return responses['default'];
        }

        function sendQuickMessage(type) {
            const messages = {
                'weather-delay': 'How do weather delays work?',
                'setup-help': 'Help me set up my store',
                'customer-notifications': 'Tell me about customer notifications'
            };
            
            const userMessage = messages[type];
            addMessage(userMessage, true);
            
            setTimeout(() => {
                hideTypingIndicator();
                addMessage(getBotResponse(type));
            }, 1500);
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, true);
                input.value = '';
                
                setTimeout(() => {
                    hideTypingIndicator();
                    addMessage(getBotResponse(message));
                }, 1500);
            }
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        // Modal Management
        function showConnectionModal(platform) {
            document.getElementById('connectionModal').classList.remove('hidden');
            document.getElementById('connectionModal').classList.add('flex');
            document.getElementById('modalTitle').textContent = `Connect Your ${platform} Store`;
            goToStep(1);
        }

        function closeConnectionModal() {
            document.getElementById('connectionModal').classList.add('hidden');
            document.getElementById('connectionModal').classList.remove('flex');
        }

        function goToStep(stepNumber) {
            // Hide all steps
            document.querySelectorAll('.connection-step').forEach(step => {
                step.classList.add('hidden');
            });
            // Show target step
            document.getElementById(`step${stepNumber}`).classList.remove('hidden');
        }

        function runConnectionTest() {
            document.getElementById('connectionTestResult').innerHTML = 
                '<div class="text-green-600"><span class="mr-2">‚úÖ</span>API connection successful! Store verified and accessible.</div>';
        }

        // ===== SHIPPING API INTEGRATION =====
        let shippingManager;

        // Initialize shipping manager when page loads
        window.addEventListener('load', function() {
            try {
                if (typeof ShippingAPIManager !== 'undefined') {
                    shippingManager = new ShippingAPIManager();
                    console.log('üöö Shipping API Manager initialized');
                } else {
                    console.log('üöö ShippingAPIManager not found, using embedded mock data');
                    shippingManager = createMockShippingManager();
                }
            } catch (error) {
                console.error('Error initializing shipping manager:', error);
                shippingManager = createMockShippingManager();
            }
        });

        // Embedded mock shipping manager as fallback
        function createMockShippingManager() {
            return {
                trackPackage: async function(trackingNumber) {
                    // Simulate API delay
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    
                    const mockData = {
                        '123456789012': {
                            carrier: 'FedEx',
                            trackingNumber: '123456789012',
                            status: 'In Transit',
                            estimatedDelivery: '2024-01-20T17:00:00Z',
                            currentLocation: 'Frankfurt, Germany',
                            destination: 'Los Angeles, CA',
                            origin: 'Hong Kong',
                            service: 'FedEx International Priority',
                            dimensions: '24x18x12 inches',
                            weight: '15.5 lbs',
                            events: [
                                { date: '2024-01-18T08:30:00Z', location: 'Hong Kong', status: 'Package picked up', details: 'Shipment picked up from sender' },
                                { date: '2024-01-18T14:15:00Z', location: 'Hong Kong', status: 'Departed facility', details: 'Left origin facility' },
                                { date: '2024-01-19T02:45:00Z', location: 'Frankfurt, Germany', status: 'Arrived at facility', details: 'Arrived at sort facility' },
                                { date: '2024-01-19T06:20:00Z', location: 'Frankfurt, Germany', status: 'In transit', details: 'Package is in transit to next facility' }
                            ]
                        },
                        '987654321098': {
                            carrier: 'FedEx',
                            trackingNumber: '987654321098',
                            status: 'Weather Delay',
                            estimatedDelivery: '2024-01-22T17:00:00Z',
                            currentLocation: 'Memphis, TN',
                            destination: 'New York, NY',
                            origin: 'Shanghai, China',
                            service: 'FedEx International Priority',
                            weatherAlert: {
                                type: 'Severe Storm',
                                location: 'Memphis Hub',
                                impact: 'Flights delayed 4-6 hours',
                                resolution: 'Expected to resume normal operations by 18:00 UTC'
                            },
                            events: [
                                { date: '2024-01-17T10:30:00Z', location: 'Shanghai, China', status: 'Package picked up', details: 'Shipment picked up from sender' },
                                { date: '2024-01-18T22:15:00Z', location: 'Shanghai, China', status: 'Departed facility', details: 'Left origin facility' },
                                { date: '2024-01-19T15:45:00Z', location: 'Memphis, TN', status: 'Weather delay', details: 'Delayed due to severe weather conditions at Memphis hub' }
                            ]
                        },
                        '1Z999AA1234567890': {
                            carrier: 'UPS',
                            trackingNumber: '1Z999AA1234567890',
                            status: 'Out for Delivery',
                            estimatedDelivery: '2024-01-19T18:00:00Z',
                            currentLocation: 'Local Delivery Facility - Los Angeles, CA',
                            destination: 'Los Angeles, CA',
                            origin: 'Atlanta, GA',
                            service: 'UPS Next Day Air',
                            events: [
                                { date: '2024-01-16T09:00:00Z', location: 'Atlanta, GA', status: 'Origin Scan', details: 'Package received for processing' },
                                { date: '2024-01-17T03:30:00Z', location: 'Louisville, KY', status: 'Arrival Scan', details: 'Arrived at UPS facility' },
                                { date: '2024-01-18T15:45:00Z', location: 'Los Angeles, CA', status: 'Arrival Scan', details: 'Arrived at destination facility' },
                                { date: '2024-01-19T06:00:00Z', location: 'Los Angeles, CA', status: 'Out for Delivery', details: 'Package is out for delivery' }
                            ]
                        },
                        '1234567890': {
                            carrier: 'DHL',
                            trackingNumber: '1234567890',
                            status: 'Delivered',
                            estimatedDelivery: '2024-01-18T14:30:00Z',
                            actualDelivery: '2024-01-18T14:25:00Z',
                            currentLocation: 'Delivered',
                            destination: 'Berlin, Germany',
                            origin: 'Cincinnati, OH',
                            service: 'DHL Express Worldwide',
                            signedBy: 'J. MUELLER',
                            events: [
                                { date: '2024-01-15T11:00:00Z', location: 'Cincinnati, OH', status: 'Shipment picked up', details: 'Package picked up from sender' },
                                { date: '2024-01-16T08:20:00Z', location: 'Leipzig, Germany', status: 'Processed at facility', details: 'Arrived at DHL facility' },
                                { date: '2024-01-17T19:45:00Z', location: 'Berlin, Germany', status: 'With delivery courier', details: 'Out for delivery' },
                                { date: '2024-01-18T14:25:00Z', location: 'Berlin, Germany', status: 'Delivered', details: 'Successfully delivered. Signed by: J. MUELLER' }
                            ]
                        },
                        '555666777888': {
                            carrier: 'FedEx',
                            trackingNumber: '555666777888',
                            status: 'Customs Delay',
                            estimatedDelivery: '2024-01-25T16:00:00Z',
                            currentLocation: 'Customs Facility - JFK Airport, NY',
                            destination: 'Miami, FL',
                            origin: 'Tokyo, Japan',
                            service: 'FedEx International Economy',
                            customsAlert: {
                                type: 'Documentation Review',
                                location: 'JFK Customs',
                                impact: 'Package under customs review',
                                resolution: 'Additional documentation requested from sender'
                            },
                            events: [
                                { date: '2024-01-20T12:00:00Z', location: 'Tokyo, Japan', status: 'Package picked up', details: 'International shipment collected' },
                                { date: '2024-01-21T18:30:00Z', location: 'Tokyo, Japan', status: 'Departed facility', details: 'Left origin country' },
                                { date: '2024-01-22T14:15:00Z', location: 'JFK Airport, NY', status: 'Arrived at customs', details: 'Package arrived at US customs facility' },
                                { date: '2024-01-23T09:45:00Z', location: 'JFK Airport, NY', status: 'Customs delay', details: 'Under customs review - documentation required' }
                            ]
                        },
                        '1Z888BB9876543210': {
                            carrier: 'UPS',
                            trackingNumber: '1Z888BB9876543210',
                            status: 'Exception',
                            estimatedDelivery: '2024-01-21T17:00:00Z',
                            currentLocation: 'UPS Customer Center - Denver, CO',
                            destination: 'Boulder, CO',
                            origin: 'Seattle, WA',
                            service: 'UPS Ground',
                            exceptionAlert: {
                                type: 'Address Correction Required',
                                location: 'Denver Facility',
                                impact: 'Delivery attempted - incorrect address',
                                resolution: 'Contact customer for correct delivery address'
                            },
                            events: [
                                { date: '2024-01-18T10:00:00Z', location: 'Seattle, WA', status: 'Origin Scan', details: 'Package processed at origin' },
                                { date: '2024-01-19T08:30:00Z', location: 'Salt Lake City, UT', status: 'In Transit', details: 'Package in transit' },
                                { date: '2024-01-20T16:45:00Z', location: 'Denver, CO', status: 'Out for Delivery', details: 'Package loaded for delivery' },
                                { date: '2024-01-20T19:30:00Z', location: 'Boulder, CO', status: 'Delivery Exception', details: 'Incorrect address - returned to facility' }
                            ]
                        },
                        '9988776655': {
                            carrier: 'DHL',
                            trackingNumber: '9988776655',
                            status: 'In Transit',
                            estimatedDelivery: '2024-01-24T12:00:00Z',
                            currentLocation: 'Leipzig, Germany',
                            destination: 'Paris, France',
                            origin: 'Dubai, UAE',
                            service: 'DHL Express 12:00',
                            events: [
                                { date: '2024-01-21T14:00:00Z', location: 'Dubai, UAE', status: 'Shipment picked up', details: 'Express package collected' },
                                { date: '2024-01-22T02:30:00Z', location: 'Dubai, UAE', status: 'Departed facility', details: 'Left Middle East hub' },
                                { date: '2024-01-22T18:15:00Z', location: 'Leipzig, Germany', status: 'Processed at facility', details: 'Arrived at European hub' },
                                { date: '2024-01-23T06:00:00Z', location: 'Leipzig, Germany', status: 'In transit', details: 'Package sorted for final destination' }
                            ]
                        },
                        '444555666777': {
                            carrier: 'FedEx',
                            trackingNumber: '444555666777',
                            status: 'Priority Express',
                            estimatedDelivery: '2024-01-19T10:30:00Z',
                            currentLocation: 'Memphis, TN - Priority Hub',
                            destination: 'Austin, TX',
                            origin: 'San Francisco, CA',
                            service: 'FedEx First Overnight',
                            priority: true,
                            events: [
                                { date: '2024-01-18T17:00:00Z', location: 'San Francisco, CA', status: 'Priority pickup', details: 'First Overnight service selected' },
                                { date: '2024-01-18T21:30:00Z', location: 'San Francisco, CA', status: 'Departed facility', details: 'Express flight departed' },
                                { date: '2024-01-19T03:15:00Z', location: 'Memphis, TN', status: 'Priority processing', details: 'Express package in priority sort' },
                                { date: '2024-01-19T07:00:00Z', location: 'Memphis, TN', status: 'Out for delivery', details: 'Loaded on express delivery vehicle' }
                            ]
                        },
                        '1Z777CC1122334455': {
                            carrier: 'UPS',
                            trackingNumber: '1Z777CC1122334455',
                            status: 'Delivered',
                            estimatedDelivery: '2024-01-17T15:00:00Z',
                            actualDelivery: '2024-01-17T14:32:00Z',
                            currentLocation: 'Delivered',
                            destination: 'Phoenix, AZ',
                            origin: 'Louisville, KY',
                            service: 'UPS 2nd Day Air',
                            signedBy: 'M. RODRIGUEZ',
                            events: [
                                { date: '2024-01-15T13:00:00Z', location: 'Louisville, KY', status: 'Origin Scan', details: 'Package processed at UPS hub' },
                                { date: '2024-01-16T05:45:00Z', location: 'Phoenix, AZ', status: 'Arrival Scan', details: 'Arrived at destination facility' },
                                { date: '2024-01-17T08:30:00Z', location: 'Phoenix, AZ', status: 'Out for Delivery', details: 'Loaded on delivery vehicle' },
                                { date: '2024-01-17T14:32:00Z', location: 'Phoenix, AZ', status: 'Delivered', details: 'Package delivered. Signed by: M. RODRIGUEZ' }
                            ]
                        },
                        '2233445566': {
                            carrier: 'DHL',
                            trackingNumber: '2233445566',
                            status: 'Out for Delivery',
                            estimatedDelivery: '2024-01-19T16:30:00Z',
                            currentLocation: 'DHL Delivery Vehicle - London, UK',
                            destination: 'London, UK',
                            origin: 'Amsterdam, Netherlands',
                            service: 'DHL Express 9:00',
                            events: [
                                { date: '2024-01-18T09:00:00Z', location: 'Amsterdam, Netherlands', status: 'Shipment picked up', details: 'European express pickup' },
                                { date: '2024-01-18T15:30:00Z', location: 'Amsterdam, Netherlands', status: 'Processed at facility', details: 'Package processed for UK delivery' },
                                { date: '2024-01-19T08:15:00Z', location: 'London, UK', status: 'Arrived at facility', details: 'Arrived at London delivery facility' },
                                { date: '2024-01-19T12:00:00Z', location: 'London, UK', status: 'Out for delivery', details: 'Package loaded for same-day delivery' }
                            ]
                        },
                        '111222333444': {
                            carrier: 'FedEx',
                            trackingNumber: '111222333444',
                            status: 'International Transit',
                            estimatedDelivery: '2024-01-26T14:00:00Z',
                            currentLocation: 'Paris Charles de Gaulle Airport',
                            destination: 'S√£o Paulo, Brazil',
                            origin: 'Mumbai, India',
                            service: 'FedEx International Priority',
                            internationalAlert: {
                                type: 'International Transit',
                                details: 'Package crossing multiple time zones',
                                currentPhase: 'European Hub Processing'
                            },
                            events: [
                                { date: '2024-01-20T11:30:00Z', location: 'Mumbai, India', status: 'International pickup', details: 'International shipment collected' },
                                { date: '2024-01-21T04:45:00Z', location: 'Mumbai, India', status: 'Departed country', details: 'Left origin country' },
                                { date: '2024-01-22T12:15:00Z', location: 'Paris, France', status: 'International hub', details: 'Processing at European hub' },
                                { date: '2024-01-23T08:30:00Z', location: 'Paris, France', status: 'In transit', details: 'Prepared for South American delivery' }
                            ]
                        },
                        '1Z666DD5544332211': {
                            carrier: 'UPS',
                            trackingNumber: '1Z666DD5544332211',
                            status: 'Weather Delay',
                            estimatedDelivery: '2024-01-24T17:00:00Z',
                            currentLocation: 'UPS Worldport - Louisville, KY',
                            destination: 'Miami, FL',
                            origin: 'Chicago, IL',
                            service: 'UPS Next Day Air',
                            weatherAlert: {
                                type: 'Ice Storm',
                                location: 'Louisville Hub',
                                impact: 'Flight operations suspended',
                                resolution: 'Expected to resume operations within 12 hours'
                            },
                            events: [
                                { date: '2024-01-22T14:00:00Z', location: 'Chicago, IL', status: 'Origin Scan', details: 'Package processed for next day delivery' },
                                { date: '2024-01-22T20:30:00Z', location: 'Chicago, IL', status: 'Departed facility', details: 'Package departed origin' },
                                { date: '2024-01-23T02:15:00Z', location: 'Louisville, KY', status: 'Arrival Scan', details: 'Arrived at main hub' },
                                { date: '2024-01-23T18:45:00Z', location: 'Louisville, KY', status: 'Weather delay', details: 'Ice storm affecting flight operations' }
                            ]
                        }
                    };

                    const data = mockData[trackingNumber];
                    if (data) {
                        return {
                            success: true,
                            data: data,
                            source: 'mock'
                        };
                    } else {
                        // Generate random data for unknown tracking numbers
                        const statuses = ['In Transit', 'Out for Delivery', 'Delivered'];
                        const locations = ['New York, NY', 'Los Angeles, CA', 'Chicago, IL', 'Houston, TX'];
                        const carriers = ['FedEx', 'UPS', 'DHL'];
                        
                        const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
                        const randomLocation = locations[Math.floor(Math.random() * locations.length)];
                        const randomCarrier = carriers[Math.floor(Math.random() * carriers.length)];
                        
                        return {
                            success: true,
                            data: {
                                carrier: randomCarrier,
                                trackingNumber: trackingNumber,
                                status: randomStatus,
                                estimatedDelivery: new Date(Date.now() + Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString(),
                                currentLocation: randomLocation,
                                destination: 'Your Address',
                                origin: 'Sender Location',
                                service: `${randomCarrier} Express`,
                                events: [
                                    { 
                                        date: new Date(Date.now() - Math.random() * 3 * 24 * 60 * 60 * 1000).toISOString(), 
                                        location: randomLocation, 
                                        status: randomStatus, 
                                        details: `Package ${randomStatus.toLowerCase()} at ${randomLocation}` 
                                    }
                                ]
                            },
                            source: 'generated-mock'
                        };
                    }
                }
            };
        }

        // Track shipment function
        async function trackShipment() {
            const trackingNumber = document.getElementById('shipmentRef').value.trim();
            
            if (!trackingNumber) {
                SoundManager.playError();
                createNotification('‚ö†Ô∏è Missing Information', 'Please enter a tracking number to continue.\n\nTip: Click "üé≤ Load Demo Number" for sample tracking numbers', 'error');
                return;
            }

            // Show loading state
            const trackingResults = document.getElementById('trackingResults');
            const trackingContent = document.getElementById('trackingContent');
            
            trackingResults.style.display = 'block';
            trackingResults.classList.add('fade-in');
            trackingContent.innerHTML = `
                <div class="bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-8">
                    <div class="text-center mb-6">
                        <div class="loading-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"></div>
                        <h4 class="text-lg font-semibold text-blue-900 mb-2">Tracking Package</h4>
                        <p class="text-blue-700 loading-dots">Connecting to ${trackingNumber.startsWith('1Z') ? 'UPS' : trackingNumber.length === 10 ? 'DHL' : 'FedEx'} systems</p>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 bg-white rounded-lg loading-shimmer">
                            <div class="flex items-center">
                                <div class="w-4 h-4 bg-blue-500 rounded-full loading-pulse mr-3"></div>
                                <span class="text-gray-600">Authenticating with carrier API</span>
                            </div>
                            <span class="text-green-600">‚úì</span>
                        </div>
                        
                        <div class="flex items-center justify-between p-4 bg-white rounded-lg loading-shimmer" style="animation-delay: 0.5s">
                            <div class="flex items-center">
                                <div class="w-4 h-4 bg-yellow-500 rounded-full loading-pulse mr-3"></div>
                                <span class="text-gray-600">Retrieving tracking data</span>
                            </div>
                            <div class="loading-spin w-4 h-4 border-2 border-yellow-500 border-t-transparent rounded-full"></div>
                        </div>
                        
                        <div class="flex items-center justify-between p-4 bg-white rounded-lg loading-shimmer" style="animation-delay: 1s">
                            <div class="flex items-center">
                                <div class="w-4 h-4 bg-gray-400 rounded-full mr-3"></div>
                                <span class="text-gray-400">Processing shipment history</span>
                            </div>
                            <div class="w-4 h-4 border-2 border-gray-300 rounded-full"></div>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <div class="bg-white rounded-lg p-2">
                            <div class="progress-bar rounded"></div>
                        </div>
                        <p class="text-xs text-blue-600 mt-2 text-center">Analyzing route and weather conditions...</p>
                    </div>
                </div>
            `;

            try {
                // Track the package
                const result = await shippingManager.trackPackage(trackingNumber);
                
                if (result.success) {
                    SoundManager.playTrackingComplete();
                    displayTrackingResults(result.data, result.source);
                } else {
                    SoundManager.playError();
                    displayTrackingError(result.error);
                }
            } catch (error) {
                console.error('Tracking error:', error);
                displayTrackingError('Unable to track package. Please try again.');
            }
        }

        function displayTrackingResults(data, source) {
            const trackingContent = document.getElementById('trackingContent');
            
            // Determine status color
            const statusColors = {
                'In Transit': 'bg-blue-100 text-blue-800',
                'Out for Delivery': 'bg-yellow-100 text-yellow-800',
                'Delivered': 'bg-green-100 text-green-800',
                'Exception': 'bg-red-100 text-red-800',
                'Weather Delay': 'bg-orange-100 text-orange-800',
                'Customs Delay': 'bg-yellow-100 text-yellow-800',
                'Priority Express': 'bg-purple-100 text-purple-800',
                'International Transit': 'bg-blue-100 text-blue-800'
            };
            
            const statusColor = statusColors[data.status] || 'bg-gray-100 text-gray-800';
            
            // Format delivery date
            const deliveryDate = data.estimatedDelivery ? 
                new Date(data.estimatedDelivery).toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                }) : 'Not available';

            let alertSection = '';
            if (data.weatherAlert) {
                alertSection = `
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4">
                        <h5 class="font-semibold text-orange-800 mb-2">üå™Ô∏è Weather Alert</h5>
                        <p class="text-sm text-orange-700"><strong>${data.weatherAlert.type}</strong> at ${data.weatherAlert.location}</p>
                        <p class="text-sm text-orange-700">${data.weatherAlert.impact}</p>
                        <p class="text-xs text-orange-600 mt-2">${data.weatherAlert.resolution}</p>
                    </div>
                `;
            } else if (data.customsAlert) {
                alertSection = `
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4">
                        <h5 class="font-semibold text-yellow-800 mb-2">üõÉ Customs Alert</h5>
                        <p class="text-sm text-yellow-700"><strong>${data.customsAlert.type}</strong> at ${data.customsAlert.location}</p>
                        <p class="text-sm text-yellow-700">${data.customsAlert.impact}</p>
                        <p class="text-xs text-yellow-600 mt-2">${data.customsAlert.resolution}</p>
                    </div>
                `;
            } else if (data.exceptionAlert) {
                alertSection = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
                        <h5 class="font-semibold text-red-800 mb-2">‚ö†Ô∏è Delivery Exception</h5>
                        <p class="text-sm text-red-700"><strong>${data.exceptionAlert.type}</strong> at ${data.exceptionAlert.location}</p>
                        <p class="text-sm text-red-700">${data.exceptionAlert.impact}</p>
                        <p class="text-xs text-red-600 mt-2">${data.exceptionAlert.resolution}</p>
                    </div>
                `;
            } else if (data.internationalAlert) {
                alertSection = `
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                        <h5 class="font-semibold text-blue-800 mb-2">üåç International Transit</h5>
                        <p class="text-sm text-blue-700"><strong>${data.internationalAlert.type}</strong></p>
                        <p class="text-sm text-blue-700">${data.internationalAlert.details}</p>
                        <p class="text-xs text-blue-600 mt-2">Current Phase: ${data.internationalAlert.currentPhase}</p>
                    </div>
                `;
            } else if (data.priority) {
                alertSection = `
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4">
                        <h5 class="font-semibold text-purple-800 mb-2">üöÄ Priority Express</h5>
                        <p class="text-sm text-purple-700">High-priority shipment with expedited processing</p>
                        <p class="text-xs text-purple-600 mt-2">Premium service with priority handling at all facilities</p>
                    </div>
                `;
            }

            trackingContent.innerHTML = `
                <div class="border rounded-lg p-6 bg-gradient-to-r from-blue-50 to-blue-100 slide-up">
                    <!-- Header -->
                    <div class="flex justify-between items-start mb-4 fade-in">
                        <div>
                            <h4 class="font-bold text-lg text-blue-900">${data.carrier} Shipment</h4>
                            <p class="text-blue-700">Tracking: ${data.trackingNumber}</p>
                            <p class="text-sm text-blue-600">${data.service || 'Express Service'}</p>
                        </div>
                        <span class="px-4 py-2 rounded-full text-sm font-medium ${statusColor}">
                            ${data.status}
                        </span>
                    </div>

                    ${alertSection}

                    <!-- Main Info Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-white rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-1">Origin</p>
                            <p class="font-semibold text-gray-900">${data.origin}</p>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-1">Current Location</p>
                            <p class="font-semibold text-gray-900">${data.currentLocation}</p>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-1">Destination</p>
                            <p class="font-semibold text-gray-900">${data.destination}</p>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-1">Estimated Delivery</p>
                            <p class="font-semibold text-gray-900">${deliveryDate}</p>
                        </div>
                    </div>

                    <!-- Package Details -->
                    ${data.dimensions || data.weight ? `
                    <div class="bg-white rounded-lg p-4 mb-4">
                        <h5 class="font-semibold text-gray-800 mb-2">üì¶ Package Details</h5>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            ${data.dimensions ? `<div><span class="text-gray-600">Dimensions:</span> <span class="font-medium">${data.dimensions}</span></div>` : ''}
                            ${data.weight ? `<div><span class="text-gray-600">Weight:</span> <span class="font-medium">${data.weight}</span></div>` : ''}
                        </div>
                    </div>
                    ` : ''}

                    <!-- Tracking History -->
                    <div class="bg-white rounded-lg p-4 fade-in" style="animation-delay: 0.3s">
                        <h5 class="font-semibold text-gray-800 mb-3">üìç Tracking History</h5>
                        <div class="space-y-3 tracking-timeline">
                            ${data.events.map((event, index) => `
                                <div class="flex items-start space-x-3 pb-3 border-b border-gray-200 last:border-b-0 fade-in" style="animation-delay: ${0.1 * (index + 1)}s">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full mt-2 relative z-10 loading-pulse"></div>
                                    <div class="flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="font-medium text-gray-900">${event.status}</p>
                                                <p class="text-sm text-gray-600">${event.details}</p>
                                                <p class="text-sm text-blue-600">${event.location}</p>
                                            </div>
                                            <span class="text-xs text-gray-500">
                                                ${new Date(event.date).toLocaleDateString()} ${new Date(event.date).toLocaleTimeString()}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Data Source -->
                    <div class="mt-4 text-xs text-gray-500 text-center">
                        Data source: ${source === 'mock' ? 'üé≠ Demo Mode (Mock Data)' : `üì° Live ${data.carrier} API`} | 
                        Last updated: ${new Date().toLocaleTimeString()}
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="mt-4 flex flex-wrap gap-2">
                    <button onclick="generateCustomerNotification('${data.trackingNumber}')" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm">
                        üìß Send Customer Update
                    </button>
                    <button onclick="trackShipment()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm">
                        üîÑ Refresh Tracking
                    </button>
                    <button onclick="showWeatherImpact('${data.currentLocation}')" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg text-sm">
                        üå§Ô∏è Check Weather Impact
                    </button>
                </div>
            `;
        }

        function displayTrackingError(error) {
            const trackingContent = document.getElementById('trackingContent');
            trackingContent.innerHTML = `
                <div class="bg-red-50 border border-red-200 rounded-lg p-6 text-center">
                    <div class="text-red-500 text-4xl mb-4">‚ùå</div>
                    <h4 class="text-lg font-semibold text-red-800 mb-2">Tracking Error</h4>
                    <p class="text-red-700 mb-4">${error}</p>
                    <button onclick="trackShipment()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm">
                        Try Again
                    </button>
                </div>
            `;
        }

        // Sound Effects System
        const SoundManager = {
            context: null,
            
            init() {
                if (typeof AudioContext !== 'undefined') {
                    this.context = new AudioContext();
                } else if (typeof webkitAudioContext !== 'undefined') {
                    this.context = new webkitAudioContext();
                }
            },
            
            playTone(frequency, duration, type = 'sine') {
                if (!this.context) return;
                
                const oscillator = this.context.createOscillator();
                const gainNode = this.context.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.context.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = type;
                
                gainNode.gain.setValueAtTime(0.1, this.context.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.context.currentTime + duration);
                
                oscillator.start(this.context.currentTime);
                oscillator.stop(this.context.currentTime + duration);
            },
            
            playSuccess() {
                this.playTone(800, 0.1);
                setTimeout(() => this.playTone(1000, 0.1), 100);
            },
            
            playNotification() {
                this.playTone(600, 0.15);
                setTimeout(() => this.playTone(800, 0.15), 150);
            },
            
            playError() {
                this.playTone(300, 0.2);
                setTimeout(() => this.playTone(250, 0.2), 200);
            },
            
            playClick() {
                this.playTone(1200, 0.05);
            },
            
            playTrackingComplete() {
                this.playTone(600, 0.1);
                setTimeout(() => this.playTone(800, 0.1), 100);
                setTimeout(() => this.playTone(1000, 0.2), 200);
            }
        };
        
        // Initialize sound system
        window.addEventListener('load', function() {
            SoundManager.init();
            setTimeout(addSoundToButtons, 1000); // Add sounds after page loads
        });

        // Quick demo functions
        function generateCustomerNotification(trackingNumber) {
            SoundManager.playNotification();
            
            // Create a visual notification instead of alert
            createNotification('üìß Customer Notification Generated!', `‚úÖ Email sent to customer\n‚úÖ SMS notification delivered\n‚úÖ Order status updated in store\n\nCustomer satisfaction maintained!`, 'success');
        }
        
        function createNotification(title, message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 max-w-sm bg-white border-l-4 ${
                type === 'success' ? 'border-green-500' : 
                type === 'error' ? 'border-red-500' : 
                'border-blue-500'
            } rounded-lg shadow-lg p-4 notification-appear`;
            
            notification.innerHTML = `
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <div class="w-6 h-6 ${
                            type === 'success' ? 'bg-green-100 text-green-600' : 
                            type === 'error' ? 'bg-red-100 text-red-600' : 
                            'bg-blue-100 text-blue-600'
                        } rounded-full flex items-center justify-center text-sm">
                            ${type === 'success' ? '‚úì' : type === 'error' ? '‚úó' : '‚Ñπ'}
                        </div>
                    </div>
                    <div class="ml-3 flex-1">
                        <h4 class="text-sm font-semibold text-gray-900">${title}</h4>
                        <p class="text-xs text-gray-600 mt-1 whitespace-pre-line">${message}</p>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-gray-400 hover:text-gray-600">
                        √ó
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.animation = 'fadeOut 0.3s ease-out';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        }

        function showWeatherImpact(location) {
            SoundManager.playClick();
            createNotification('üå§Ô∏è Weather Impact Analysis', `Location: ${location}\n\nüìä Current Conditions: Clear\nüå°Ô∏è Temperature: 72¬∞F\nüí® Wind: 5 mph\n‚òÅÔ∏è Clouds: 20%\n\n‚úÖ No weather delays expected\nüìà Normal delivery schedule maintained`, 'info');
        }
        
        // Add sound effects to buttons
        function addSoundToButtons() {
            // Add click sounds to main buttons
            document.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', () => {
                    if (!button.hasAttribute('data-no-sound')) {
                        SoundManager.playClick();
                    }
                });
            });
        }
        
        // Add sound to chatbot
        function toggleChat() {
            SoundManager.playClick();
            const chatWindow = document.getElementById('chatWindow');
            const chatButton = document.getElementById('chatButton');
            const chatIcon = document.getElementById('chatButtonIcon');
            
            chatOpen = !chatOpen;
            
            if (chatOpen) {
                chatWindow.classList.remove('hidden');
                chatIcon.textContent = '√ó';
                chatButton.classList.add('bg-red-500');
                chatButton.classList.remove('bg-blue-600');
            } else {
                chatWindow.classList.add('hidden');
                chatIcon.textContent = 'üí¨';
                chatButton.classList.remove('bg-red-500');
                chatButton.classList.add('bg-blue-600');
            }
        }

        // Demo tracking numbers for easy testing
        function loadDemoTrackingNumbers() {
            const demoNumbers = [
                '123456789012', // FedEx - In Transit
                '987654321098', // FedEx - Weather Delay  
                '1Z999AA1234567890', // UPS - Out for Delivery
                '1234567890', // DHL - Delivered
                '555666777888', // FedEx - Customs Delay
                '1Z888BB9876543210', // UPS - Exception
                '9988776655', // DHL - In Transit
                '444555666777', // FedEx - Express Priority
                '1Z777CC1122334455', // UPS - Delivered
                '2233445566', // DHL - Out for Delivery
                '111222333444', // FedEx - International
                '1Z666DD5544332211' // UPS - Weather Delay
            ];
            
            const randomNumber = demoNumbers[Math.floor(Math.random() * demoNumbers.length)];
            document.getElementById('shipmentRef').value = randomNumber;
        }

        // Add demo button
        function addDemoTrackingButton() {
            const shipmentRefInput = document.getElementById('shipmentRef');
            if (shipmentRefInput && !document.getElementById('demoTrackingBtn')) {
                const demoBtn = document.createElement('button');
                demoBtn.id = 'demoTrackingBtn';
                demoBtn.onclick = loadDemoTrackingNumbers;
                demoBtn.className = 'mt-1 text-xs text-blue-600 hover:text-blue-800';
                demoBtn.innerHTML = 'üé≤ Load Demo Number';
                shipmentRefInput.parentNode.appendChild(demoBtn);
            }
        }

        // Initialize demo button when page loads
        setTimeout(addDemoTrackingButton, 1000);

        function previewOrders() {
            document.getElementById('orderPreviewResult').innerHTML = 
                '<div class="text-green-600"><span class="mr-2">‚úÖ</span>Found 1,247 orders ready for import. Recent: iPhone cases, Gaming headsets, Electronics.</div>';
        }

        function setupWebhooks() {
            document.getElementById('webhookSetupResult').innerHTML = 
                '<div class="text-green-600"><span class="mr-2">‚úÖ</span>Webhooks configured! Real-time order sync active.</div>';
        }

        function completeConnection() {
            goToStep(4);
        }

        function viewDashboard() {
            closeConnectionModal();
            showPage('aviation-weather');
        }

        // API Connection Functions
        function connectShopify() {
            showConnectionModal('Shopify');
        }

        function testShopifyConnection() {
            SoundManager.playSuccess();
            createNotification('üß™ Shopify Connection Test', '‚úÖ Connection successful!\n‚úÖ 1,247 orders found\n‚úÖ Real-time webhook active\n‚úÖ Customer data accessible', 'success');
        }

        function syncShopifyOrders() {
            SoundManager.playSuccess();
            createNotification('üîÑ Shopify Orders Synced', '‚úÖ 23 new orders imported\n‚úÖ 156 orders updated\n‚úÖ All customers ready for alerts\n‚úÖ Weather monitoring active', 'success');
        }

        function connectWooCommerce() {
            showConnectionModal('WooCommerce');
        }

        function testWooConnection() {
            SoundManager.playSuccess();
            createNotification('üß™ WooCommerce Connection Test', '‚úÖ API connection active\n‚úÖ 892 orders accessible\n‚úÖ Customer data synced\n‚úÖ Real-time webhook configured', 'success');
        }

        function connectAmazon() {
            showConnectionModal('Amazon');
        }

        function testAmazonConnection() {
            SoundManager.playSuccess();
            createNotification('üß™ Amazon Connection Test', '‚úÖ Seller Central API active\n‚úÖ Performance metrics: 99.2%\n‚úÖ 2,156 orders protected\n‚úÖ Review shield activated', 'success');
        }

        function saveEmailConfig() {
            SoundManager.playSuccess();
            createNotification('üíæ Email Configuration Saved', '‚úÖ SMTP server connected\n‚úÖ Email templates ready\n‚úÖ Customer alerts active\n‚úÖ Professional branding applied', 'success');
        }

        function testEmailAlert() {
            SoundManager.playNotification();
            createNotification('üìß Test Email Sent', 'To: demo-customer@email.com\nSubject: "Your iPhone case shipment update"\nDelivery: ‚úÖ Successful\n\nEmail preview available in notifications tab', 'success');
        }

        function saveSMSConfig() {
            SoundManager.playSuccess();
            createNotification('üíæ SMS Configuration Saved', '‚úÖ Twilio integration active\n‚úÖ SMS templates ready\n‚úÖ Global delivery enabled\n‚úÖ Character optimization active', 'success');
        }

        function testSMSAlert() {
            SoundManager.playNotification();
            createNotification('üì± Test SMS Sent', 'To: +1-555-0123\nMessage: "Hi Sarah! Your iPhone cases are on track for tomorrow 2-6pm delivery!"\nStatus: ‚úÖ Delivered\n\nReal customer will receive this format', 'success');
        }

        function refreshClientList() {
            SoundManager.playSuccess();
            createNotification('üîÑ Client List Refreshed', '‚úÖ 25 connected stores\n‚úÖ 4,295 total orders\n‚úÖ All integrations healthy\n‚úÖ Real-time sync verified', 'success');
        }

        function viewClientOrders(clientId) {
            const clientNames = {
                'techgadgets': 'TechGadgets Pro Store',
                'fashion': 'Fashion Forward Boutique', 
                'electroworld': 'ElectroWorld Amazon Store'
            };
            SoundManager.playClick();
            createNotification(`üì¶ ${clientNames[clientId]} Orders`, '‚úÖ Real-time order sync active\n‚úÖ Weather alerts configured\n‚úÖ Customer notifications enabled\n\nClick "Air Freight Intelligence" tab to see live orders!', 'info');
        }

        // Initialize shipment display on page load
        function initializeShipmentDisplay() {
            // Load sample shipments on app start
            const defaultShipments = generateSampleShipments(89);
            populateShipmentDisplay(defaultShipments);
            
            // Set up initial display
            document.getElementById('shipmentResults').style.display = 'block';
        }

        // Initialize container display on page load
        function initializeContainerDisplay() {
            // Load sample containers on app start
            const defaultContainers = generateSampleContainers(127);
            populateContainerDisplay(defaultContainers);
            
            // Set up initial display
            document.getElementById('containerResults').style.display = 'block';
        }

        // Login and App Initialization
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            
            // Initialize displays after a short delay
            setTimeout(() => {
                initializeShipmentDisplay();
                initializeContainerDisplay();
            }, 1000);
        });

        function initializeApp() {
            // Show loading screen first
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
                
                // Check if user is already logged in
                const userLoggedIn = localStorage.getItem('userLoggedIn');
                if (userLoggedIn) {
                    showMainApp();
                } else {
                    showLoginScreen();
                }
            }, 2000); // 2 second loading screen
        }

        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        function showMainApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            showPage('aviation-weather'); // Show default page
            
            // Update user info
            const userEmail = localStorage.getItem('userEmail') || 'Demo User';
            const userInfo = document.getElementById('userInfo');
            if (userInfo) {
                userInfo.textContent = userEmail;
            }
            
            
            // Initialize live chat widget
            if (!liveChatWidget) {
                liveChatWidget = new LiveChatWidget();
            }
            
            // Initialize CSV upload functionality
            setupAPICSVUpload();
            
            // Initialize customer search functionality
            setupCustomerSearch();
            
            // Show welcome notification
            setTimeout(() => {
                createNotification('üéâ Welcome to NaviFlow!', 'Your weather-intelligent shipping platform is ready!\n\nüå§Ô∏è Check weather impact on shipments\nüì¶ Track packages with real-time updates\nüîî Get proactive delay notifications\n‚ö° Powered by Open-Meteo API', 'success');
            }, 1000);
        }

        // Login form handling
        document.addEventListener('DOMContentLoaded', function() {
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
                    
                    if (email && password) {
                        localStorage.setItem('userLoggedIn', 'true');
                        localStorage.setItem('userEmail', email);
                        localStorage.setItem('loginTime', new Date().toISOString());
                        
                        SoundManager.playSuccess();
                        createNotification('‚úÖ Login Successful', `Welcome back, ${email}!\n\nAccessing your air freight dashboard...`, 'success');
                        
                        setTimeout(() => {
                            showMainApp();
                        }, 1000);
                    } else {
                        SoundManager.playError();
                        createNotification('‚ö†Ô∏è Login Error', 'Please enter both email and password to continue.', 'error');
                    }
                });
            }
        });

        // Demo login
        function demoLogin() {
            localStorage.setItem('userLoggedIn', 'demo');
            localStorage.setItem('userEmail', 'demo@naviflow.com');
            localStorage.setItem('loginTime', new Date().toISOString());
            
            SoundManager.playSuccess();
            createNotification('üé¨ Demo Mode Activated', 'Welcome to NaviFlow Air Freight Intelligence!\n\nAll features unlocked for demonstration.', 'success');
            
            setTimeout(() => {
                showMainApp();
            }, 1000);
        }

        // Guest access
        function guestAccess() {
            localStorage.setItem('userLoggedIn', 'guest');
            localStorage.setItem('userEmail', 'guest@naviflow.com');
            localStorage.setItem('loginTime', new Date().toISOString());
            
            SoundManager.playSuccess();
            createNotification('üë§ Guest Access Granted', 'Exploring NaviFlow as a guest user.\n\nLimited functionality available.', 'info');
            
            setTimeout(() => {
                showMainApp();
            }, 1000);
        }

        // Logout function
        function logout() {
            localStorage.removeItem('userLoggedIn');
            localStorage.removeItem('userEmail');
            localStorage.removeItem('loginTime');
            
            SoundManager.playClick();
            createNotification('üëã Logged Out', 'You have been successfully logged out.\n\nReturning to login screen...', 'info');
            
            setTimeout(() => {
                showLoginScreen();
            }, 1000);
        }

        // Login help
        function showLoginHelp() {
            SoundManager.playClick();
            createNotification('üìñ Login Help', 'üé¨ Demo Mode: Full access without credentials\nüë§ Guest Access: Limited exploration mode\nüìß Regular Login: Enter any email/password\n\nüí° Tip: Use Demo Mode for presentations!', 'info');
        }

        // ===== DEMO SHOWCASE FUNCTIONS =====
        let demoShipmentsGenerated = [];
        
        async function generateDemoData(count) {
            SoundManager.playClick();
            
            createNotification('üé¨ Demo Generation Started', `Generating ${count} shipments for prospect demonstration...\n‚è±Ô∏è Processing time: ~${Math.ceil(count/50)} seconds\nüöÄ Enhanced demo mode active!`, 'info');
            
            const startTime = Date.now();
            
            // Show loading animation
            const demoResults = document.getElementById('demoResults');
            const demoResultsContent = document.getElementById('demoResultsContent');
            
            demoResults.classList.remove('hidden');
            demoResultsContent.innerHTML = `
                <div class="text-center py-8">
                    <div class="loading-spin inline-block w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mb-4"></div>
                    <p class="text-gray-600">Generating ${count} shipments...</p>
                    <div class="w-full bg-gray-200 rounded-full h-2 mt-4">
                        <div id="progressBar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>
            `;
            
            // Initialize shipping manager if not available
            if (typeof window.ShippingAPIManager === 'undefined') {
                // Fallback: use the embedded mock system
                await generateDemoDataFallback(count, startTime);
                return;
            }
            
            try {
                const shippingManager = new ShippingAPIManager();
                
                // Generate demo shipments
                const demoShipments = shippingManager.generateDemoShipments(count);
                demoShipmentsGenerated = demoShipments;
                
                // Simulate batch processing with progress updates
                const batchSize = 50;
                const processed = [];
                
                for (let i = 0; i < demoShipments.length; i += batchSize) {
                    const batch = demoShipments.slice(i, i + batchSize);
                    const trackingNumbers = batch.map(s => s.trackingNumber);
                    
                    // Process batch
                    const batchResult = await shippingManager.trackMultiplePackages(trackingNumbers);
                    processed.push(...batchResult.results);
                    
                    // Update progress
                    const progress = ((i + batchSize) / demoShipments.length) * 100;
                    const progressBar = document.getElementById('progressBar');
                    if (progressBar) {
                        progressBar.style.width = Math.min(progress, 100) + '%';
                    }
                    
                    // Small delay for visual effect
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
                
                const endTime = Date.now();
                const processingTime = ((endTime - startTime) / 1000).toFixed(2);
                
                displayDemoResults(demoShipments, processed, processingTime, count);
                
                SoundManager.playSuccess();
                createNotification('‚úÖ Demo Complete!', `Successfully generated ${count} shipments!\n‚è±Ô∏è Processing time: ${processingTime}s\nüìä Ready for prospect demonstration\nüéØ 100% success rate achieved`, 'success');
                
            } catch (error) {
                console.error('Demo generation error:', error);
                await generateDemoDataFallback(count, startTime);
            }
        }
        
        async function generateDemoDataFallback(count, startTime) {
            // Fallback demo generation without ShippingAPIManager
            const carriers = ['FedEx', 'UPS', 'DHL'];
            const statuses = ['In Transit', 'Out for Delivery', 'Delivered', 'Processing', 'Weather Delay'];
            const locations = [
                'New York, NY', 'Los Angeles, CA', 'Chicago, IL', 'Houston, TX',
                'Frankfurt, Germany', 'Hong Kong', 'Singapore', 'Tokyo, Japan',
                'London, UK', 'Paris, France', 'Amsterdam, Netherlands', 'Dubai, UAE'
            ];
            
            const demoShipments = [];
            const processed = [];
            
            for (let i = 0; i < count; i++) {
                const carrier = carriers[Math.floor(Math.random() * carriers.length)];
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                const location = locations[Math.floor(Math.random() * locations.length)];
                
                const shipment = {
                    trackingNumber: `DEMO${String(i + 1).padStart(8, '0')}`,
                    carrier,
                    status,
                    currentLocation: location,
                    estimatedDelivery: new Date(Date.now() + Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString(),
                    value: `$${(Math.random() * 5000 + 100).toFixed(2)}`,
                    weight: `${(Math.random() * 50 + 1).toFixed(1)} lbs`,
                    customerName: `Customer ${String(i + 1).padStart(4, '0')}`,
                    destination: locations[Math.floor(Math.random() * locations.length)]
                };
                
                demoShipments.push(shipment);
                processed.push({ success: true, data: shipment });
                
                // Update progress every 50 items
                if (i % 50 === 0) {
                    const progress = (i / count) * 100;
                    const progressBar = document.getElementById('progressBar');
                    if (progressBar) {
                        progressBar.style.width = progress + '%';
                    }
                    await new Promise(resolve => setTimeout(resolve, 50));
                }
            }
            
            demoShipmentsGenerated = demoShipments;
            
            const endTime = Date.now();
            const processingTime = ((endTime - startTime) / 1000).toFixed(2);
            
            displayDemoResults(demoShipments, processed, processingTime, count);
            
            SoundManager.playSuccess();
            createNotification('‚úÖ Demo Complete!', `Successfully generated ${count} shipments!\n‚è±Ô∏è Processing time: ${processingTime}s\nüìä Ready for prospect demonstration\nüéØ 100% success rate achieved`, 'success');
        }
        
        function displayDemoResults(shipments, processed, processingTime, count) {
            const demoResultsContent = document.getElementById('demoResultsContent');
            
            const carrierCounts = {};
            const statusCounts = {};
            const locationCounts = {};
            
            shipments.forEach(shipment => {
                carrierCounts[shipment.carrier] = (carrierCounts[shipment.carrier] || 0) + 1;
                statusCounts[shipment.status] = (statusCounts[shipment.status] || 0) + 1;
                locationCounts[shipment.currentLocation] = (locationCounts[shipment.currentLocation] || 0) + 1;
            });
            
            const successRate = ((processed.filter(p => p.success).length / processed.length) * 100).toFixed(1);
            const avgProcessingTime = (parseFloat(processingTime) / count * 1000).toFixed(0);
            
            demoResultsContent.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-green-600">${count}</div>
                        <div class="text-sm text-gray-600">Total Shipments Generated</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-blue-600">${successRate}%</div>
                        <div class="text-sm text-gray-600">Success Rate</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-purple-600">${avgProcessingTime}ms</div>
                        <div class="text-sm text-gray-600">Avg Processing Time</div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h5 class="font-semibold mb-3 text-gray-800">üì¶ By Carrier</h5>
                        ${Object.entries(carrierCounts).map(([carrier, count]) => 
                            `<div class="flex justify-between mb-2">
                                <span class="text-sm text-gray-600">${carrier}</span>
                                <span class="text-sm font-semibold">${count}</span>
                            </div>`
                        ).join('')}
                    </div>
                    
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h5 class="font-semibold mb-3 text-gray-800">üìä By Status</h5>
                        ${Object.entries(statusCounts).map(([status, count]) => 
                            `<div class="flex justify-between mb-2">
                                <span class="text-sm text-gray-600">${status}</span>
                                <span class="text-sm font-semibold">${count}</span>
                            </div>`
                        ).join('')}
                    </div>
                    
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h5 class="font-semibold mb-3 text-gray-800">üåç Top Locations</h5>
                        ${Object.entries(locationCounts)
                            .sort(([,a], [,b]) => b - a)
                            .slice(0, 5)
                            .map(([location, count]) => 
                                `<div class="flex justify-between mb-2">
                                    <span class="text-sm text-gray-600">${location}</span>
                                    <span class="text-sm font-semibold">${count}</span>
                                </div>`
                        ).join('')}
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 text-center">
                    <h5 class="font-semibold text-gray-800 mb-2">üéØ Demo Performance Summary</h5>
                    <p class="text-sm text-gray-600">
                        Generated ${count} shipments in ${processingTime}s ‚Ä¢ ${avgProcessingTime}ms per shipment ‚Ä¢ 
                        ${successRate}% success rate ‚Ä¢ Ready for prospect demonstration!
                    </p>
                    <div class="mt-3 flex gap-2 justify-center">
                        <button onclick="exportDemoData()" class="bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700">
                            üìä Export Data
                        </button>
                        <button onclick="shareDemo()" class="bg-green-600 text-white px-4 py-2 rounded text-sm hover:bg-green-700">
                            üì§ Share Demo
                        </button>
                    </div>
                </div>
                
                <div class="mt-4 max-h-64 overflow-y-auto bg-gray-50 rounded-lg p-4">
                    <h5 class="font-semibold mb-3 text-gray-800">üìã Sample Shipments (First 10)</h5>
                    <div class="space-y-2">
                        ${shipments.slice(0, 10).map(shipment => 
                            `<div class="bg-white rounded p-3 text-xs">
                                <div class="flex justify-between items-center">
                                    <span class="font-mono font-semibold">${shipment.trackingNumber}</span>
                                    <span class="bg-${getStatusColor(shipment.status)}-100 text-${getStatusColor(shipment.status)}-800 px-2 py-1 rounded">${shipment.status}</span>
                                </div>
                                <div class="text-gray-600 mt-1">${shipment.carrier} ‚Ä¢ ${shipment.currentLocation} ‚Üí ${shipment.destination}</div>
                            </div>`
                        ).join('')}
                    </div>
                </div>
            `;
        }
        
        function getStatusColor(status) {
            const colors = {
                'Delivered': 'green',
                'Out for Delivery': 'blue',
                'In Transit': 'yellow',
                'Processing': 'purple',
                'Weather Delay': 'red'
            };
            return colors[status] || 'gray';
        }
        
        function clearDemoResults() {
            SoundManager.playClick();
            document.getElementById('demoResults').classList.add('hidden');
            demoShipmentsGenerated = [];
            createNotification('üóëÔ∏è Results Cleared', 'Demo results have been cleared. Ready for next demonstration!', 'info');
        }
        
        function exportDemoData() {
            SoundManager.playClick();
            
            if (demoShipmentsGenerated.length === 0) {
                createNotification('‚ùå No Data', 'Please generate demo data first!', 'error');
                return;
            }
            
            const csvContent = 'data:text/csv;charset=utf-8,' + 
                'Tracking Number,Carrier,Status,Current Location,Destination,Customer,Value,Weight,Estimated Delivery\n' +
                demoShipmentsGenerated.map(shipment => 
                    `"${shipment.trackingNumber}","${shipment.carrier}","${shipment.status}","${shipment.currentLocation}","${shipment.destination}","${shipment.customerName}","${shipment.value}","${shipment.weight}","${shipment.estimatedDelivery}"`
                ).join('\n');
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', `demo-shipments-${demoShipmentsGenerated.length}-${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            createNotification('üìä Export Complete', `Demo data exported to CSV!\nüìÅ ${demoShipmentsGenerated.length} shipments included\nüíæ File ready for prospect presentation`, 'success');
        }
        
        function shareDemo() {
            SoundManager.playClick();
            
            if (demoShipmentsGenerated.length === 0) {
                createNotification('‚ùå No Data', 'Please generate demo data first!', 'error');
                return;
            }
            
            const summary = `üé¨ NaviFlow E-Commerce Shield Demo Results
            
üìä Generated: ${demoShipmentsGenerated.length} shipments
üöÄ Success Rate: 99.9%
‚è±Ô∏è Processing: ${(demoShipmentsGenerated.length * 100)}ms avg
üåç Multi-carrier: FedEx, UPS, DHL
üì¶ Real-time tracking active
üõ°Ô∏è Weather intelligence enabled

Ready for enterprise deployment!`;
            
            navigator.clipboard.writeText(summary).then(() => {
                createNotification('üì§ Demo Shared', 'Demo summary copied to clipboard!\n\n‚úÖ Paste in emails or presentations\nüéØ Perfect for prospect follow-ups\nüìä Professional metrics included', 'success');
            });
        }
    </script>
</body>
</html>